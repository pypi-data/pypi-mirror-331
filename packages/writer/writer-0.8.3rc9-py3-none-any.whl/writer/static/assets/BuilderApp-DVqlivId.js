function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./WdsDropdownMenu-DdPD0rv7.js","./index-CUGDV1IA.js","./index-DsXsOFA4.css","./WdsDropdownMenu-2tTk3P_q.css","./BuilderEmbeddedCodeEditor-BY_NqBZ-.js","./BuilderEmbeddedCodeEditor-DiDqfWdt.css","./BuilderSettings-oWe5fV87.js","./instancePath-BsbOTTI8.js","./marked.esm-273vDTCT.js","./BuilderSettings-C5fn5ktN.css","./BuilderSidebar-Cu6BAjKV.js","./BuilderSidebar-BDpKaarp.css","./ComponentRenderer-BRt_Me-n.js","./ComponentRenderer-DJcTgXDs.css","./BuilderInstanceTracker-CRARK37a.js","./BuilderInstanceTracker-BECcXNnW.css","./BuilderInsertionOverlay-2iKOQQYg.js","./BuilderInsertionOverlay-D2XS0ij9.css","./BuilderInsertionLabel-B-JQXmdI.js","./BuilderInsertionLabel-_YS5WPfq.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as R,i as K,a as Z,r as W,c as k,o as v,e as b,f as r,s as A,z as V,_ as M,L as St,b as L,M as _,t as D,N as P,n as F,q as I,W as Y,D as ue,x as z,y as fe,T as nt,O as Re,P as Ve,j as Se,l as Fe,Q as ot,m as Ue,v as lt,E as Ne,G as ye,R as zt,S as be,w as ve,U as st,V as ct,X as Q,Y as Me,Z as pe,$ as ke,a0 as Ye,a1 as Ht,a2 as qt,a3 as dt,a4 as jt,a5 as Kt,a6 as Zt,a7 as Ce,a8 as Gt,a9 as ae,K as re,aa as Xt,ab as Bt,ac as Yt,ad as ft,ae as Jt,af as Qt,ag as en,ah as tn,ai as nn,aj as on,ak as ln,al as sn,A as an,am as rn,an as un,ao as pt}from"./index-CUGDV1IA.js";import{marked as cn}from"./marked.esm-273vDTCT.js";const dn="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='48'%20height='48'%20rx='24'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M34.0187%2028.9434L37.2255%2015.7128H32.7659L30.812%2015.7128L34.0187%2028.9434Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M25.4266%2015.7128H20.967L25.4266%2034.1126L27.4085%2034.1126H31.8681L27.4085%2015.7128H25.4266L25.4266%2015.7128Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M17.5635%2015.7129H13.1038L13.1039%2015.7132H11.1219L15.5816%2034.113H20.0413L20.0412%2034.1126H22.0231L17.5635%2015.7129Z'%20fill='white'/%3e%3c/svg%3e",fn={class:"BuilderSwitcher"},pn=R({__name:"BuilderSwitcher",setup(e){const t=K(Z.builderManager);let n=W(null);const o=i=>{const s=t.getMode();s!=i&&(n.value=i,t.setMode(i),(i=="preview"||s=="workflows"||i=="workflows")&&t.setSelection(null))},l=k(()=>t.getMode());return(i,s)=>(v(),b("div",fn,[r("div",{"data-automation-action":"set-mode-ui",class:V({active:l.value=="ui"}),onClick:s[0]||(s[0]=u=>o("ui"))},s[3]||(s[3]=[r("i",{class:"icon material-symbols-outlined"}," brush ",-1),A(" UI ")]),2),r("div",{"data-automation-action":"set-mode-workflows",class:V({active:l.value=="workflows"}),onClick:s[1]||(s[1]=u=>o("workflows"))},s[4]||(s[4]=[r("i",{class:"icon material-symbols-outlined"}," linked_services ",-1),A(" Blueprints ")]),2),r("div",{class:V({active:l.value=="preview"}),"data-automation-action":"set-mode-preview",onClick:s[2]||(s[2]=u=>o("preview"))},s[5]||(s[5]=[r("i",{class:"icon material-symbols-outlined"}," preview ",-1),A(" Preview ")]),2)]))}}),mn=M(pn,[["__scopeId","data-v-33d00133"]]),vn={class:"main"},gn={class:"titleContainer"},yn={key:0,class:"material-symbols-outlined"},hn={class:"slotContainer"},wn={key:0,class:"actionContainer"},_n=R({__name:"BuilderModal",props:{modalTitle:{type:String,required:!0},icon:{type:String,required:!1,default:void 0},closeAction:{type:Object,required:!0},menuActions:{type:Array,required:!1,default:void 0},allowOverflow:{type:Boolean,required:!1}},setup(e){const t=e,{modalTitle:n,icon:o,closeAction:l,menuActions:i}=St(t),s=u=>{u.key=="Escape"&&l.value.fn()};return(u,p)=>{var m,c;return v(),L(nt,{to:"#modal"},[r("div",{class:V(["BuilderModal",{"BuilderModal--overflow":e.allowOverflow}]),tabindex:"-1",onKeydown:s},[r("div",vn,[r("div",gn,[_(o)?(v(),b("i",yn,D(_(o)),1)):P("",!0),r("h2",null,D(_(n)),1),F(Y,{variant:"neutral",size:"icon","data-writer-tooltip":((m=_(l))==null?void 0:m.desc)??"Close",onClick:_(l).fn},{default:I(()=>p[0]||(p[0]=[r("i",{class:"material-symbols-outlined"},"close",-1)])),_:1},8,["data-writer-tooltip","onClick"])]),r("div",hn,[ue(u.$slots,"default",{},void 0,!0)]),((c=_(i))==null?void 0:c.length)>0?(v(),b("div",wn,[(v(!0),b(z,null,fe(_(i),(w,f)=>(v(),L(Y,{key:f,variant:"primary",size:"small",onClick:w.fn},{default:I(()=>[A(D(w.desc),1)]),_:2},1032,["onClick"]))),128))])):P("",!0)])],34)])}}}),bn=M(_n,[["__scopeId","data-v-c090e9f1"]]),Cn={class:"BuilderStateExplorer"},kn=R({__name:"BuilderStateExplorer",setup(e){const t=K(Z.core);return(n,o)=>(v(),b("div",Cn,[F(Re,{data:_(t).userState.value,"enable-copy-to-json":!0,"initial-depth":1,"hide-root":!0},null,8,["data"])]))}}),xn=M(kn,[["__scopeId","data-v-eafb7b97"]]),Sn={class:"BuilderHeader"},Bn={class:"undoRedo"},$n=["data-writer-tooltip","disabled"],Tn=["data-writer-tooltip","disabled"],Dn=["title"],Pn={key:0},Ln=R({__name:"BuilderHeader",setup(e){const t=K(Z.core),n=K(Z.builderManager),{undo:o,redo:l,getUndoRedoSnapshot:i}=Ve(t,n),s=W(!1),u=k(()=>i()),p=()=>{let w="";switch(t.syncHealth.value){case"offline":w+="Offline. Not syncing.";break;case"connected":w+="Online. Syncing...";break;case"idle":w+="Sync not initialised.";break;case"suspended":w+="Sync suspended.";break}return t.featureFlags.value.length>0&&(w+=` Feature flags: ${t.featureFlags.value.join(", ")}`),w};function m(){s.value=!0}const c={desc:"Close",fn:()=>{s.value=!1}};return(w,f)=>(v(),b("div",Sn,[f[6]||(f[6]=r("img",{src:dn,alt:"Writer Framework logo"},null,-1)),F(mn),r("div",Bn,[r("button",{class:"undo","data-writer-tooltip":u.value.isUndoAvailable?`Undo: ${u.value.undoDesc}`:"Nothing to undo",disabled:!u.value.isUndoAvailable,"data-writer-tooltip-placement":"bottom",onClick:f[0]||(f[0]=d=>_(o)())},f[2]||(f[2]=[r("i",{class:"material-symbols-outlined"}," undo ",-1),A(" Undo ")]),8,$n),r("button",{class:"redo","data-writer-tooltip":u.value.isRedoAvailable?`Redo: ${u.value.redoDesc}`:"Nothing to redo",disabled:!u.value.isRedoAvailable,"data-writer-tooltip-placement":"bottom",onClick:f[1]||(f[1]=d=>_(l)())},f[3]||(f[3]=[r("i",{class:"material-symbols-outlined"}," redo ",-1),A(" Redo ")]),8,Tn)]),r("div",null,[r("button",{onClick:m},f[4]||(f[4]=[r("i",{class:"material-symbols-outlined"}," mystery ",-1),A(" State Explorer ")])),s.value?(v(),L(bn,{key:0,"close-action":c,icon:"mystery","modal-title":"State Explorer"},{default:I(()=>[F(xn)]),_:1})):P("",!0)]),f[7]||(f[7]=r("div",{class:"gap"},null,-1)),r("div",{class:V(["syncHealth",_(t).syncHealth.value]),title:p()},[f[5]||(f[5]=r("i",{class:"material-symbols-outlined icon"},"sync",-1)),_(t).syncHealth.value=="offline"?(v(),b("span",Pn,"Offline")):P("",!0)],10,Dn)]))}}),En=M(Ln,[["__scopeId","data-v-85cc3ebb"]]),Fn={class:"text"},An=200,In=4,Rn=R({__name:"BuilderTooltip",setup(e){const t=Se("rootEl"),n=W(!1),o=W(null);let l=null,i=null;const s=W("top"),u=W({top:0,left:0});async function p(){if(!l||(o.value=l.dataset.writerTooltip,!o.value))return;const d=l.dataset.writerTooltipGap?parseInt(l.dataset.writerTooltipGap):In;if(n.value=m(l),!n.value)return;await ye();const{x:y,y:a,width:g,height:h}=l.getBoundingClientRect(),{width:C,height:x}=t.value.getBoundingClientRect();switch(s.value){case"top":u.value.top=a-x-d,u.value.left=y+g/2-C/2;break;case"right":u.value.top=a+h/2-x/2,u.value.left=y+g+d;break;case"left":u.value.left=y-C-d,u.value.top=a+h/2-x/2;break;case"bottom":u.value.top=a+h+d,u.value.left=y+g/2-C/2;break}}function m(d){return d.getAttribute("data-writer-tooltip-strategy")==="overflow"?d.scrollWidth>d.clientWidth:!0}function c(d){const a=d.target.closest("[data-writer-tooltip]");if(a)l!==a&&(n.value=!1);else{n.value=!1,l=null;return}l=a,s.value=l.dataset.writerTooltipPlacement??"top",setTimeout(()=>w(a),An)}async function w(d){d===l&&(i==null||i.disconnect(),i=new MutationObserver(p),i.observe(l,{attributes:!0,attributeFilter:["data-writer-tooltip","data-writer-tooltip-placement","data-writer-tooltip-strategy"]}),p())}const f=k(()=>{const{top:d,left:y}=u.value;return{top:`${d}px`,left:`${y}px`}});return Fe(()=>{document.documentElement.addEventListener("mouseover",c)}),ot(()=>{document.documentElement.removeEventListener("mouseover",c),i==null||i.disconnect()}),(d,y)=>Ue((v(),b("div",{ref_key:"rootEl",ref:t,class:"BuilderTooltip",style:Ne(f.value)},[r("div",{class:V(["arrow",s.value])},null,2),r("div",Fn,D(o.value),1)],4)),[[lt,n.value]])}}),Mn=M(Rn,[["__scopeId","data-v-7ba01c7c"]]),On={class:"BuilderAsyncLoader"},Wn=R({__name:"BuilderAsyncLoader",setup(e){return(t,n)=>(v(),b("div",On,[F(zt)]))}}),me=M(Wn,[["__scopeId","data-v-bb820549"]]),Vn=""+new URL("art-paper-WsD9P5Lu.svg",import.meta.url).href,Un="data:image/svg+xml,%3csvg%20width='120'%20height='160'%20viewBox='0%200%20120%20160'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='16.0273'%20y='89.9375'%20width='80.1422'%20height='55.209'%20rx='7.12375'%20fill='%23A95EF8'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M47.9297%20135.352H13.3542C9.41988%20135.352%206.23047%20138.541%206.23047%20142.475V152.27C6.23047%20156.205%209.41987%20159.394%2013.3542%20159.394H97.9487C101.883%20159.394%20105.072%20156.205%20105.072%20152.27V142.475C105.072%20138.541%20101.883%20135.352%2097.9487%20135.352H63.3737C63.3737%20136.103%2063.174%20136.848%2062.7859%20137.542C62.3979%20138.237%2061.8291%20138.868%2061.112%20139.399C60.395%20139.931%2059.5437%20140.352%2058.6068%20140.64C57.6699%20140.928%2056.6658%20141.076%2055.6517%20141.076C54.6376%20141.076%2053.6335%20140.928%2052.6966%20140.64C51.7597%20140.352%2050.9085%20139.931%2050.1914%20139.399C49.4744%20138.868%2048.9056%20138.237%2048.5175%20137.542C48.1295%20136.848%2047.9297%20136.103%2047.9297%20135.352Z'%20fill='%23721CC9'/%3e%3crect%20x='27.6055'%20y='103.295'%20width='56.99'%20height='3.56187'%20rx='1.78094'%20fill='%23F6EFFD'/%3e%3crect%20x='38.293'%20y='112.199'%20width='35.6187'%20height='3.56187'%20rx='1.78094'%20fill='%23F6EFFD'/%3e%3crect%20x='46.3047'%20y='121.104'%20width='19.5903'%20height='3.56187'%20rx='1.78094'%20fill='%23F6EFFD'/%3e%3crect%20y='10.3691'%20width='40.0647'%20height='30.0485'%20rx='7.12375'%20transform='rotate(-15%200%2010.3691)'%20fill='%23EDE2FF'/%3e%3cpath%20d='M15.0475%2021.5308C15.2249%2020.8687%2016.0526%2020.6469%2016.5373%2021.1316L21.9902%2026.5846C22.475%2027.0693%2022.2532%2027.897%2021.5911%2028.0744L14.1421%2030.0703C13.48%2030.2477%2012.8741%2029.6418%2013.0515%2028.9797L15.0475%2021.5308Z'%20fill='%23D4B2F7'/%3e%3cpath%20d='M25.3727%2010.4659C25.5501%209.80376%2026.3777%209.58199%2026.8624%2010.0667L34.9516%2018.1559C35.4363%2018.6406%2035.2145%2019.4682%2034.5524%2019.6456L23.5024%2022.6065C22.8403%2022.7839%2022.2344%2022.178%2022.4118%2021.5159L25.3727%2010.4659Z'%20fill='%23D4B2F7'/%3e%3crect%20x='68.2383'%20y='23.1523'%20width='54.3186'%20height='40.0711'%20rx='7.12375'%20transform='rotate(17.6282%2068.2383%2023.1523)'%20fill='%23D4B2F7'/%3e%3cpath%20d='M72.1976%2052.7145C71.7609%2052.9406%2071.5902%2053.4779%2071.8163%2053.9146C72.0424%2054.3514%2072.5797%2054.5221%2073.0164%2054.296L72.1976%2052.7145ZM82.1128%2048.5839L82.8321%2048.059L82.3818%2047.4419L81.7034%2047.7931L82.1128%2048.5839ZM86.9945%2055.274L86.2752%2055.7989L86.71%2056.3948L87.3764%2056.0784L86.9945%2055.274ZM104.339%2047.7366C104.504%2047.2733%20104.262%2046.764%20103.798%2046.599L96.2487%2043.9102C95.7854%2043.7452%2095.2761%2043.987%2095.1111%2044.4503C94.9461%2044.9136%2095.1879%2045.4229%2095.6512%2045.5879L102.362%2047.9779L99.972%2054.6888C99.807%2055.1521%20100.049%2055.6614%20100.512%2055.8264C100.975%2055.9914%20101.485%2055.7496%20101.65%2055.2863L104.339%2047.7366ZM73.0164%2054.296L82.5222%2049.3746L81.7034%2047.7931L72.1976%2052.7145L73.0164%2054.296ZM81.3935%2049.1087L86.2752%2055.7989L87.7138%2054.7491L82.8321%2048.059L81.3935%2049.1087ZM87.3764%2056.0784L103.882%2048.2423L103.118%2046.6334L86.6126%2054.4696L87.3764%2056.0784Z'%20fill='%23F6EFFD'/%3e%3c/svg%3e",Qe=150;function Nn(e){const t=W(structuredClone(be(e.sourceFiles.value)));ve(e.sourceFiles,(a,g)=>{let h=!1,C=structuredClone(be(t.value));for(const x of ct(a)){const E=Q(x,g),S=Q(x,a);if(ke(S))continue;if(E===void 0||Me(S)){C=Ye(x,C,structuredClone(be(S))),h=!0;continue}if(!pe(E)||!(!E.complete&&S.complete))continue;const T=Q(x,C);pe(T)&&(h=!0,T.complete=!0,T.content=S.content)}for(const x of Ht(C))Q(x,a)===void 0&&(C=qt(x,C),h=!0);h&&(t.value=C)});const n=st(),o=k(()=>Array.from(ct(t.value))),l=k(()=>o.value.filter(a=>{const g=Q(a,t.value);if(Me(g))return!1;if(!pe(g))return!0;const h=Q(a,e.sourceFiles.value);return pe(h)?!g.complete||!h.complete?!1:g.content!==h.content:!0})),i=k(()=>{if(n.value!==void 0)return Q(n.value,t.value)}),s=k({get(){return pe(i.value)?i.value.content:""},set(a){if(n.value===void 0)return;const g=Q(n.value,t.value);pe(g)&&(g.content=a)}});function u(a=1){const g=`new-file-${a}.txt`;return Q([g],t.value)?u(a+1):g}async function p(){const a=u();t.value=Ye([a],be(t.value)),w([a]),await e.sendCreateSourceFileRequest([a])}const m=k(()=>{var g;return(g=n.value)!=null&&g.length?n.value.at(-1).split(".").at(-1):""}),c=k(()=>{switch(m.value){case"py":return"python";case"md":case"markdown":return"markdown";default:return m.value}});function w(a){n.value=a,pe(i.value)&&!i.value.complete&&e.requestSourceFileLoading(a)}async function f(a){if(!(!n.value||!i.value)&&(i.value.type==="file"&&await e.sendCodeSaveRequest(s.value,n.value),a)){const g=[...be(n.value)];n.value=void 0;try{await e.sendRenameSourceFileRequest(g,a)}catch(h){throw n.value=g,h}w(a)}}function d(a){return new Promise((g,h)=>{const C=new FileReader;C.addEventListener("loadend",x=>{const E=x.target.result;if(E instanceof ArrayBuffer){const S=String.fromCharCode.apply(null,new Uint8Array(E));return g(S)}g(E.split(",")[1])}),C.addEventListener("error",()=>{h()}),C.readAsDataURL(a)})}async function y(a){const g=Qe*1024*1024;if(a.size>g)throw Error(`Cannot upload file bigger than ${Qe}mb`);const h=[a.name];if(Q(h,e.sourceFiles.value))throw Error(`The file ${a.name} already exists`);t.value=Ye(h,be(t.value),{type:"binary",uploading:!0});const C=await d(a);await e.sendFileUploadRequest(h,C)}return{code:s,sourceFileDraft:t,fileOpen:i,filepathOpen:n,pathsUnsaved:l,openedFileLanguage:c,save:f,upload:y,openFile:w,openNewFile:p,getNewFilename:u}}const zn={class:"BuilderDropFileZone"},Hn=R({__name:"BuilderDropFileZone",setup(e){return(t,n)=>(v(),b("div",zn,[n[0]||(n[0]=r("img",{src:Un,alt:"Drop file illustration"},null,-1)),n[1]||(n[1]=r("h2",null,"Upload files",-1)),r("p",null,"Files can be up to "+D(_(Qe))+"mb",1)]))}}),qn=M(Hn,[["__scopeId","data-v-92e0a561"]]),jn={class:"BuilderPanel__collapser"},Kn={class:"material-symbols-outlined"},Zn={class:"BuilderPanel__title"},Gn={class:"BuilderPanel__titleCompanion"},Xn=["data-order"],Yn={key:0,class:"BuilderPanel__contents__leftPanel"},Jn={class:"BuilderPanel__actions"},Qn={class:"BuilderPanel__actionsCompanion"},eo={class:"material-symbols-outlined"},to={class:"BuilderPanel__mainContents"},no=R({__name:"BuilderPanel",props:{panelId:{},name:{},actions:{},contentsTeleportEl:{},scrollable:{type:Boolean},keyboardShortcutKey:{},enableLeftPanel:{type:Boolean},enableDropFile:{type:Boolean}},emits:{openned:e=>typeof e=="boolean",filesDrop:e=>Array.isArray(e)&&e.length>0},setup(e,{emit:t}){const n=K(Z.builderManager),o=["code","log"],l=e,i=t,s=k(()=>l.enableDropFile&&u.value),u=W(!1);function p(a,g){l.enableDropFile&&(a.preventDefault(),u.value=g)}function m(a){if(u.value=!1,!l.enableDropFile)return;a.preventDefault();const g=[];if(a.dataTransfer.items)for(const h of a.dataTransfer.items){if(h.kind!=="file")continue;const C=h.getAsFile();C&&g.push(C)}else for(const h of a.dataTransfer.files)g.push(h);g.length>0&&i("filesDrop",g)}const c=k(()=>!n.openPanels.value.has(l.panelId)),w=k(()=>o.indexOf(l.panelId));function f(a){if(n.openPanels.value.has(a)){n.openPanels.value.delete(a),i("openned",!1);return}n.openPanels.value.add(a),i("openned",!0)}function d(a){const g=jt(a);if(g&&a.key==l.keyboardShortcutKey.toLowerCase()){a.preventDefault(),f(l.panelId);return}l.actions.forEach(h=>{if(!h.keyboardShortcut)return;const{key:C,modifierKey:x}=h.keyboardShortcut;C.toLowerCase()==a.key&&(!g&&x||(a.preventDefault(),h.callback()))})}function y(a){if(!a)return"";let g=" (";return a.modifierKey&&(g+=dt()),g+=a.key,g+=")",g}return Fe(async()=>{document.addEventListener("keydown",d)}),ot(()=>{document.removeEventListener("keydown",d)}),(a,g)=>(v(),b("div",{class:V(["BuilderPanel",{collapsed:c.value}])},[r("div",jn,[F(Y,{variant:"neutral",size:"smallIcon","data-automation-action":"toggle-panel","data-automation-key":a.panelId,"data-writer-tooltip":`Toggle ${a.name} (${_(dt)()}${a.keyboardShortcutKey})`,onClick:g[0]||(g[0]=h=>f(a.panelId))},{default:I(()=>[r("i",Kn,D(c.value?"expand_less":"expand_more"),1)]),_:1},8,["data-automation-key","data-writer-tooltip"])]),r("div",Zn,D(a.name),1),r("div",Gn,[ue(a.$slots,"titleCompanion",{},void 0,!0)]),c.value?P("",!0):(v(),L(nt,{key:0,to:a.contentsTeleportEl},[r("div",{style:Ne({order:w.value}),"data-order":w.value,class:V(["BuilderPanel__contents",{"BuilderPanel__contents--leftPanel":a.enableLeftPanel,"BuilderPanel__contents--dropingFile":s.value}]),onDrop:m,onDragover:g[1]||(g[1]=h=>p(h,!0)),onDragleave:g[2]||(g[2]=h=>p(h,!1))},[s.value?(v(),L(qn,{key:0})):(v(),b(z,{key:1},[a.enableLeftPanel?(v(),b("div",Yn,[ue(a.$slots,"leftPanel",{},void 0,!0)])):P("",!0),r("div",Jn,[r("div",Qn,[ue(a.$slots,"actionsCompanion",{},void 0,!0)]),(v(!0),b(z,null,fe(a.actions,(h,C)=>(v(),L(Y,{key:C,"data-writer-tooltip":h.name+y(h.keyboardShortcut),"data-writer-tooltip-placement":"left",variant:"neutral",size:"smallIcon",disabled:h.isDisabled,onClick:h.callback},{default:I(()=>[r("i",eo,D(h.icon),1)]),_:2},1032,["data-writer-tooltip","disabled","onClick"]))),128))]),r("div",to,[ue(a.$slots,"default",{},void 0,!0)])],64))],46,Xn)],8,["to"]))],2))}}),$t=M(no,[["__scopeId","data-v-a30a0b3d"]]),oo=["top","right","bottom","left"],mt=["start","end"],vt=oo.reduce((e,t)=>e.concat(t,t+"-"+mt[0],t+"-"+mt[1]),[]),gt=Math.min,Le=Math.max,Oe=Math.round,le=e=>({x:e,y:e}),lo={left:"right",right:"left",bottom:"top",top:"bottom"},so={start:"end",end:"start"};function Tt(e,t){return typeof e=="function"?e(t):e}function ze(e){return e.split("-")[0]}function ge(e){return e.split("-")[1]}function io(e){return e==="x"?"y":"x"}function Dt(e){return e==="y"?"height":"width"}function Pt(e){return["top","bottom"].includes(ze(e))?"y":"x"}function Lt(e){return io(Pt(e))}function ao(e,t,n){n===void 0&&(n=!1);const o=ge(e),l=Lt(e),i=Dt(l);let s=l==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=yt(s)),[s,yt(s)]}function ro(e){return e.replace(/start|end/g,t=>so[t])}function yt(e){return e.replace(/left|right|bottom|top/g,t=>lo[t])}function uo(e){return{top:0,right:0,bottom:0,left:0,...e}}function co(e){return typeof e!="number"?uo(e):{top:e,right:e,bottom:e,left:e}}function We(e){const{x:t,y:n,width:o,height:l}=e;return{width:o,height:l,top:n,left:t,right:t+o,bottom:n+l,x:t,y:n}}function ht(e,t,n){let{reference:o,floating:l}=e;const i=Pt(t),s=Lt(t),u=Dt(s),p=ze(t),m=i==="y",c=o.x+o.width/2-l.width/2,w=o.y+o.height/2-l.height/2,f=o[u]/2-l[u]/2;let d;switch(p){case"top":d={x:c,y:o.y-l.height};break;case"bottom":d={x:c,y:o.y+o.height};break;case"right":d={x:o.x+o.width,y:w};break;case"left":d={x:o.x-l.width,y:w};break;default:d={x:o.x,y:o.y}}switch(ge(t)){case"start":d[s]-=f*(n&&m?-1:1);break;case"end":d[s]+=f*(n&&m?-1:1);break}return d}const fo=async(e,t,n)=>{const{placement:o="bottom",strategy:l="absolute",middleware:i=[],platform:s}=n,u=i.filter(Boolean),p=await(s.isRTL==null?void 0:s.isRTL(t));let m=await s.getElementRects({reference:e,floating:t,strategy:l}),{x:c,y:w}=ht(m,o,p),f=o,d={},y=0;for(let a=0;a<u.length;a++){const{name:g,fn:h}=u[a],{x:C,y:x,data:E,reset:S}=await h({x:c,y:w,initialPlacement:o,placement:f,strategy:l,middlewareData:d,rects:m,platform:s,elements:{reference:e,floating:t}});c=C??c,w=x??w,d={...d,[g]:{...d[g],...E}},S&&y<=50&&(y++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(m=S.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:l}):S.rects),{x:c,y:w}=ht(m,f,p)),a=-1)}return{x:c,y:w,placement:f,strategy:l,middlewareData:d}};async function po(e,t){var n;t===void 0&&(t={});const{x:o,y:l,platform:i,rects:s,elements:u,strategy:p}=e,{boundary:m="clippingAncestors",rootBoundary:c="viewport",elementContext:w="floating",altBoundary:f=!1,padding:d=0}=Tt(t,e),y=co(d),g=u[f?w==="floating"?"reference":"floating":w],h=We(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:m,rootBoundary:c,strategy:p})),C=w==="floating"?{x:o,y:l,width:s.floating.width,height:s.floating.height}:s.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),E=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},S=We(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:C,offsetParent:x,strategy:p}):C);return{top:(h.top-S.top+y.top)/E.y,bottom:(S.bottom-h.bottom+y.bottom)/E.y,left:(h.left-S.left+y.left)/E.x,right:(S.right-h.right+y.right)/E.x}}function mo(e,t,n){return(e?[...n.filter(l=>ge(l)===e),...n.filter(l=>ge(l)!==e)]:n.filter(l=>ze(l)===l)).filter(l=>e?ge(l)===e||(t?ro(l)!==l:!1):!0)}const vo=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,o,l;const{rects:i,middlewareData:s,placement:u,platform:p,elements:m}=t,{crossAxis:c=!1,alignment:w,allowedPlacements:f=vt,autoAlignment:d=!0,...y}=Tt(e,t),a=w!==void 0||f===vt?mo(w||null,d,f):f,g=await po(t,y),h=((n=s.autoPlacement)==null?void 0:n.index)||0,C=a[h];if(C==null)return{};const x=ao(C,i,await(p.isRTL==null?void 0:p.isRTL(m.floating)));if(u!==C)return{reset:{placement:a[0]}};const E=[g[ze(C)],g[x[0]],g[x[1]]],S=[...((o=s.autoPlacement)==null?void 0:o.overflows)||[],{placement:C,overflows:E}],N=a[h+1];if(N)return{data:{index:h+1,overflows:S},reset:{placement:N}};const T=S.map(j=>{const ne=ge(j.placement);return[j.placement,ne&&c?j.overflows.slice(0,2).reduce(($e,we)=>$e+we,0):j.overflows[0],j.overflows]}).sort((j,ne)=>j[1]-ne[1]),G=((l=T.filter(j=>j[2].slice(0,ge(j[0])?2:3).every(ne=>ne<=0))[0])==null?void 0:l[0])||T[0][0];return G!==u?{data:{index:h+1,overflows:S},reset:{placement:G}}:{}}}};function He(){return typeof window<"u"}function he(e){return it(e)?(e.nodeName||"").toLowerCase():"#document"}function X(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ce(e){var t;return(t=(it(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function it(e){return He()?e instanceof Node||e instanceof X(e).Node:!1}function ee(e){return He()?e instanceof Element||e instanceof X(e).Element:!1}function se(e){return He()?e instanceof HTMLElement||e instanceof X(e).HTMLElement:!1}function wt(e){return!He()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof X(e).ShadowRoot}function Ae(e){const{overflow:t,overflowX:n,overflowY:o,display:l}=te(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(l)}function go(e){return["table","td","th"].includes(he(e))}function qe(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function at(e){const t=rt(),n=ee(e)?te(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function yo(e){let t=de(e);for(;se(t)&&!Be(t);){if(at(t))return t;if(qe(t))return null;t=de(t)}return null}function rt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Be(e){return["html","body","#document"].includes(he(e))}function te(e){return X(e).getComputedStyle(e)}function je(e){return ee(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function de(e){if(he(e)==="html")return e;const t=e.assignedSlot||e.parentNode||wt(e)&&e.host||ce(e);return wt(t)?t.host:t}function Et(e){const t=de(e);return Be(t)?e.ownerDocument?e.ownerDocument.body:e.body:se(t)&&Ae(t)?t:Et(t)}function et(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const l=Et(e),i=l===((o=e.ownerDocument)==null?void 0:o.body),s=X(l);if(i){const u=tt(s);return t.concat(s,s.visualViewport||[],Ae(l)?l:[],u&&n?et(u):[])}return t.concat(l,et(l,[],n))}function tt(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ft(e){const t=te(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const l=se(e),i=l?e.offsetWidth:n,s=l?e.offsetHeight:o,u=Oe(n)!==i||Oe(o)!==s;return u&&(n=i,o=s),{width:n,height:o,$:u}}function At(e){return ee(e)?e:e.contextElement}function xe(e){const t=At(e);if(!se(t))return le(1);const n=t.getBoundingClientRect(),{width:o,height:l,$:i}=Ft(t);let s=(i?Oe(n.width):n.width)/o,u=(i?Oe(n.height):n.height)/l;return(!s||!Number.isFinite(s))&&(s=1),(!u||!Number.isFinite(u))&&(u=1),{x:s,y:u}}const ho=le(0);function It(e){const t=X(e);return!rt()||!t.visualViewport?ho:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function wo(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==X(e)?!1:t}function Ee(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const l=e.getBoundingClientRect(),i=At(e);let s=le(1);t&&(o?ee(o)&&(s=xe(o)):s=xe(e));const u=wo(i,n,o)?It(i):le(0);let p=(l.left+u.x)/s.x,m=(l.top+u.y)/s.y,c=l.width/s.x,w=l.height/s.y;if(i){const f=X(i),d=o&&ee(o)?X(o):o;let y=f,a=tt(y);for(;a&&o&&d!==y;){const g=xe(a),h=a.getBoundingClientRect(),C=te(a),x=h.left+(a.clientLeft+parseFloat(C.paddingLeft))*g.x,E=h.top+(a.clientTop+parseFloat(C.paddingTop))*g.y;p*=g.x,m*=g.y,c*=g.x,w*=g.y,p+=x,m+=E,y=X(a),a=tt(y)}}return We({width:c,height:w,x:p,y:m})}function ut(e,t){const n=je(e).scrollLeft;return t?t.left+n:Ee(ce(e)).left+n}function Rt(e,t,n){n===void 0&&(n=!1);const o=e.getBoundingClientRect(),l=o.left+t.scrollLeft-(n?0:ut(e,o)),i=o.top+t.scrollTop;return{x:l,y:i}}function _o(e){let{elements:t,rect:n,offsetParent:o,strategy:l}=e;const i=l==="fixed",s=ce(o),u=t?qe(t.floating):!1;if(o===s||u&&i)return n;let p={scrollLeft:0,scrollTop:0},m=le(1);const c=le(0),w=se(o);if((w||!w&&!i)&&((he(o)!=="body"||Ae(s))&&(p=je(o)),se(o))){const d=Ee(o);m=xe(o),c.x=d.x+o.clientLeft,c.y=d.y+o.clientTop}const f=s&&!w&&!i?Rt(s,p,!0):le(0);return{width:n.width*m.x,height:n.height*m.y,x:n.x*m.x-p.scrollLeft*m.x+c.x+f.x,y:n.y*m.y-p.scrollTop*m.y+c.y+f.y}}function bo(e){return Array.from(e.getClientRects())}function Co(e){const t=ce(e),n=je(e),o=e.ownerDocument.body,l=Le(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),i=Le(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let s=-n.scrollLeft+ut(e);const u=-n.scrollTop;return te(o).direction==="rtl"&&(s+=Le(t.clientWidth,o.clientWidth)-l),{width:l,height:i,x:s,y:u}}function ko(e,t){const n=X(e),o=ce(e),l=n.visualViewport;let i=o.clientWidth,s=o.clientHeight,u=0,p=0;if(l){i=l.width,s=l.height;const m=rt();(!m||m&&t==="fixed")&&(u=l.offsetLeft,p=l.offsetTop)}return{width:i,height:s,x:u,y:p}}function xo(e,t){const n=Ee(e,!0,t==="fixed"),o=n.top+e.clientTop,l=n.left+e.clientLeft,i=se(e)?xe(e):le(1),s=e.clientWidth*i.x,u=e.clientHeight*i.y,p=l*i.x,m=o*i.y;return{width:s,height:u,x:p,y:m}}function _t(e,t,n){let o;if(t==="viewport")o=ko(e,n);else if(t==="document")o=Co(ce(e));else if(ee(t))o=xo(t,n);else{const l=It(e);o={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return We(o)}function Mt(e,t){const n=de(e);return n===t||!ee(n)||Be(n)?!1:te(n).position==="fixed"||Mt(n,t)}function So(e,t){const n=t.get(e);if(n)return n;let o=et(e,[],!1).filter(u=>ee(u)&&he(u)!=="body"),l=null;const i=te(e).position==="fixed";let s=i?de(e):e;for(;ee(s)&&!Be(s);){const u=te(s),p=at(s);!p&&u.position==="fixed"&&(l=null),(i?!p&&!l:!p&&u.position==="static"&&!!l&&["absolute","fixed"].includes(l.position)||Ae(s)&&!p&&Mt(e,s))?o=o.filter(c=>c!==s):l=u,s=de(s)}return t.set(e,o),o}function Bo(e){let{element:t,boundary:n,rootBoundary:o,strategy:l}=e;const s=[...n==="clippingAncestors"?qe(t)?[]:So(t,this._c):[].concat(n),o],u=s[0],p=s.reduce((m,c)=>{const w=_t(t,c,l);return m.top=Le(w.top,m.top),m.right=gt(w.right,m.right),m.bottom=gt(w.bottom,m.bottom),m.left=Le(w.left,m.left),m},_t(t,u,l));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function $o(e){const{width:t,height:n}=Ft(e);return{width:t,height:n}}function To(e,t,n){const o=se(t),l=ce(t),i=n==="fixed",s=Ee(e,!0,i,t);let u={scrollLeft:0,scrollTop:0};const p=le(0);if(o||!o&&!i)if((he(t)!=="body"||Ae(l))&&(u=je(t)),o){const f=Ee(t,!0,i,t);p.x=f.x+t.clientLeft,p.y=f.y+t.clientTop}else l&&(p.x=ut(l));const m=l&&!o&&!i?Rt(l,u):le(0),c=s.left+u.scrollLeft-p.x-m.x,w=s.top+u.scrollTop-p.y-m.y;return{x:c,y:w,width:s.width,height:s.height}}function Je(e){return te(e).position==="static"}function bt(e,t){if(!se(e)||te(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ce(e)===n&&(n=n.ownerDocument.body),n}function Ot(e,t){const n=X(e);if(qe(e))return n;if(!se(e)){let l=de(e);for(;l&&!Be(l);){if(ee(l)&&!Je(l))return l;l=de(l)}return n}let o=bt(e,t);for(;o&&go(o)&&Je(o);)o=bt(o,t);return o&&Be(o)&&Je(o)&&!at(o)?n:o||yo(e)||n}const Do=async function(e){const t=this.getOffsetParent||Ot,n=this.getDimensions,o=await n(e.floating);return{reference:To(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function Po(e){return te(e).direction==="rtl"}const Lo={convertOffsetParentRelativeRectToViewportRelativeRect:_o,getDocumentElement:ce,getClippingRect:Bo,getOffsetParent:Ot,getElementRects:Do,getClientRects:bo,getDimensions:$o,getScale:xe,isElement:ee,isRTL:Po},Eo=vo,Fo=(e,t,n)=>{const o=new Map,l={platform:Lo,...n},i={...l.platform,_c:o};return fo(e,t,{...l,platform:i})};function Ao(e){return e!=null&&typeof e=="object"&&"$el"in e}function Ct(e){if(Ao(e)){const t=e.$el;return it(t)&&he(t)==="#comment"?null:t}return e}function De(e){return typeof e=="function"?e():_(e)}function Wt(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function kt(e,t){const n=Wt(e);return Math.round(t*n)/n}function Io(e,t,n){n===void 0&&(n={});const o=n.whileElementsMounted,l=k(()=>{var T;return(T=De(n.open))!=null?T:!0}),i=k(()=>De(n.middleware)),s=k(()=>{var T;return(T=De(n.placement))!=null?T:"bottom"}),u=k(()=>{var T;return(T=De(n.strategy))!=null?T:"absolute"}),p=k(()=>{var T;return(T=De(n.transform))!=null?T:!0}),m=k(()=>Ct(e.value)),c=k(()=>Ct(t.value)),w=W(0),f=W(0),d=W(u.value),y=W(s.value),a=st({}),g=W(!1),h=k(()=>{const T={position:d.value,left:"0",top:"0"};if(!c.value)return T;const H=kt(c.value,w.value),G=kt(c.value,f.value);return p.value?{...T,transform:"translate("+H+"px, "+G+"px)",...Wt(c.value)>=1.5&&{willChange:"transform"}}:{position:d.value,left:H+"px",top:G+"px"}});let C;function x(){if(m.value==null||c.value==null)return;const T=l.value;Fo(m.value,c.value,{middleware:i.value,placement:s.value,strategy:u.value}).then(H=>{w.value=H.x,f.value=H.y,d.value=H.strategy,y.value=H.placement,a.value=H.middlewareData,g.value=T!==!1})}function E(){typeof C=="function"&&(C(),C=void 0)}function S(){if(E(),o===void 0){x();return}if(m.value!=null&&c.value!=null){C=o(m.value,c.value,x);return}}function N(){l.value||(g.value=!1)}return ve([i,s,u,l],x,{flush:"sync"}),ve([m,c],S,{flush:"sync"}),ve(l,N,{flush:"sync"}),Kt()&&Zt(E),{x:Ce(w),y:Ce(f),strategy:Ce(d),placement:Ce(y),middlewareData:Ce(a),isPositioned:Ce(g),floatingStyles:h,update:x}}const Ro=R({__name:"BuilderMoreDropdown",props:{options:{type:Array,default:()=>[]},triggerCustomSize:{type:String,default:"smallIcon"},disabled:{type:Boolean},hideIcons:{type:Boolean,required:!1}},emits:{select:e=>typeof e=="string"},setup(e,{emit:t}){const n=ae(()=>re(()=>import("./WdsDropdownMenu-DdPD0rv7.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),o=t,l=W(!1),i=Se("trigger"),s=Se("dropdown"),{floatingStyles:u}=Io(i,s,{placement:"bottom-end",middleware:[Eo({allowedPlacements:["bottom-end","top-end"]})]}),p=Gt(i);ve(p,()=>{p.value||ye().then(()=>l.value=!1)},{immediate:!0});function m(c){l.value=!1,o("select",c)}return(c,w)=>(v(),b("div",{ref_key:"trigger",ref:i,class:"BuilderMoreDropdown"},[F(Y,{variant:"neutral",size:"smallIcon",disabled:e.disabled,"custom-size":e.triggerCustomSize,onClick:w[0]||(w[0]=f=>l.value=!l.value)},{default:I(()=>w[1]||(w[1]=[r("i",{class:"material-symbols-outlined"},"more_horiz",-1)])),_:1},8,["disabled","custom-size"]),l.value?(v(),L(_(n),{key:0,ref_key:"dropdown",ref:s,class:"BuilderMoreDropdown__dropdown",options:e.options,style:Ne(_(u)),onSelect:m},null,8,["options","style"])):P("",!0)],512))}}),Vt=M(Ro,[["__scopeId","data-v-4b95d14b"]]),Mo=Object.freeze(Object.defineProperty({__proto__:null,default:Vt},Symbol.toStringTag,{value:"Module"})),Oo={class:"BuilderTree"},Wo=["draggable","data-automation-key","aria-expanded"],Vo={class:"material-symbols-outlined"},Uo=["data-writer-tooltip"],No={key:1,class:"BuilderTree__main__dropdown"},zo={class:"BuilderTree__children"},Ho=R({__name:"BuilderTree",props:{name:{type:String,required:!0},query:{type:String,required:!1,default:void 0},dataAutomationKey:{type:String,required:!1,default:void 0},hasChildren:{type:Boolean},draggable:{type:Boolean},matched:{type:Boolean},selected:{type:Boolean},disabled:{type:Boolean},dropdownOptions:{type:Array,required:!1,default:void 0}},emits:{expandBranch:()=>!0,select:e=>!!e,dragover:e=>!!e,dragstart:e=>!!e,dragend:e=>!!e,drop:e=>!!e,dropdownSelect:e=>typeof e=="string"},setup(e,{expose:t,emit:n}){const o=ae(()=>re(()=>Promise.resolve().then(()=>Mo),void 0,import.meta.url)),l=e,i=n;t({expand:c,toggleCollapse:w});const s=W(!1),u=W(!1),p=k(()=>!l.matched),m=k(()=>!l.hasChildren);function c(){s.value=!1,i("expandBranch")}function w(f){f??(f=!s.value),f!==s.value&&(s.value=f)}return(f,d)=>(v(),b("div",Oo,[r("div",{class:V(["BuilderTree__main",{selected:e.selected,notMatched:p.value,childless:m.value}]),tabindex:"0",draggable:e.draggable,"data-automation-key":e.dataAutomationKey,"aria-expanded":!s.value,onMouseenter:d[2]||(d[2]=y=>u.value=!0),onMouseleave:d[3]||(d[3]=y=>u.value=!1),onClick:d[4]||(d[4]=y=>f.$emit("select",y)),onKeydown:d[5]||(d[5]=Bt(y=>f.$emit("select",y),["enter"])),onDragover:d[6]||(d[6]=y=>f.$emit("dragover",y)),onDragstart:d[7]||(d[7]=y=>f.$emit("dragstart",y)),onDragend:d[8]||(d[8]=y=>f.$emit("dragend",y)),onDrop:d[9]||(d[9]=y=>f.$emit("drop",y))},[e.hasChildren?(v(),L(Y,{key:0,class:"BuilderTree__main__collapser",variant:"neutral",size:"icon",disabled:e.disabled,onClick:d[0]||(d[0]=Xt(y=>w(void 0),["stop"]))},{default:I(()=>[r("i",Vo,D(s.value?"expand_more":"expand_less"),1)]),_:1},8,["disabled"])):P("",!0),ue(f.$slots,"nameLeft",{},void 0,!0),r("span",{class:V(["BuilderTree__main__name",{"BuilderTree__main__name--disabled":e.disabled}]),"data-writer-tooltip":e.name,"data-writer-tooltip-strategy":"overflow"},D(e.name),11,Uo),ue(f.$slots,"nameRight",{},void 0,!0),e.dropdownOptions&&u.value?(v(),b("div",No,[F(_(o),{options:e.dropdownOptions,"trigger-custom-size":"16px",onSelect:d[1]||(d[1]=y=>f.$emit("dropdownSelect",y))},null,8,["options"])])):P("",!0)],42,Wo),F(Yt,{name:"slide-fade"},{default:I(()=>[Ue(r("div",zo,[ue(f.$slots,"children",{},void 0,!0)],512),[[lt,!s.value&&e.hasChildren]])]),_:3})]))}}),qo=M(Ho,[["__scopeId","data-v-0bf4199a"]]),jo=R({__name:"WdsStateDot",props:{state:{type:String,required:!0}},setup(e){return(t,n)=>(v(),b("div",{class:V(["WdsStateDotState",`WdsStateDotState--${e.state}`])},null,2))}}),Ko=M(jo,[["__scopeId","data-v-4eacfc04"]]),Zo=["width","height","viewBox","aria-valuenow"],Go=["r","cx","cy","stroke","stroke-width"],Xo=["r","cx","cy","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"],Yo=R({__name:"WdsProgressLinear",props:{progress:{type:Number,required:!1,default:100},sizePx:{type:Number,required:!1,default:12},strokeWidth:{type:Number,required:!1,default:2}},setup(e){const t=e,n=k(()=>t.sizePx/2),o=k(()=>t.sizePx/2-t.strokeWidth/2),l=k(()=>2*Math.PI*o.value),i=k(()=>l.value*((100-t.progress)/100)),s=k(()=>`0 0 ${t.sizePx} ${t.sizePx}`);return(u,p)=>(v(),b("svg",{width:e.sizePx,height:e.sizePx,viewBox:s.value,style:{transform:"rotate(-90deg)"},role:"progressbar","aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100"},[r("circle",{r:o.value,cx:n.value,cy:n.value,fill:"transparent",stroke:_(ft).Blue1,"stroke-width":e.strokeWidth},null,8,Go),r("circle",{r:o.value,cx:n.value,cy:n.value,fill:"transparent",stroke:_(ft).Blue5,"stroke-width":e.strokeWidth,"stroke-dasharray":l.value,"stroke-dashoffset":i.value},null,8,Xo)],8,Zo))}}),Jo=R({__name:"BuilderCodePanelFileUploading",props:{timeMs:{type:Number,required:!0}},setup(e){const t=e,n=W(0);return Fe(()=>{let o;const l=i=>{o||(o=i);const s=i-o;n.value=Math.min(s/t.timeMs*100,100),n.value<100&&requestAnimationFrame(l)};requestAnimationFrame(l)}),(o,l)=>(v(),L(Yo,{class:"BuilderCodePanelFileUploading",progress:n.value,"size-px":12,"stroke-width":2},null,8,["progress"]))}}),Qo=M(Jo,[["__scopeId","data-v-449f2dac"]]),xt=[{label:"Delete",value:"delete",icon:"delete"}],el=R({__name:"BuilderCodePanelSourceFilesTree",props:{sourceFiles:{type:Object,required:!0},path:{type:Array,default:()=>[]},pathActive:{type:Array,default:()=>[]},pathsUnsaved:{type:Array,default:()=>[]},displayAddFileButton:{type:Boolean}},emits:{select:e=>Array.isArray(e),delete:e=>Array.isArray(e),addFile:()=>!0},setup(e,{emit:t}){const n=e,o=t;function l(d){return d.join("/")}const i=k(()=>l(n.pathActive)),s=k(()=>n.pathsUnsaved.map(l)),u=k(()=>ke(n.sourceFiles)?Object.entries(n.sourceFiles.children).sort((d,y)=>d[0].localeCompare(y[0])):[]);function p(d){const y=Q([...n.path,d],n.sourceFiles);return Me(y)&&y.uploading}function m(d){const y=l([...n.path,d]);return s.value.includes(y)}function c(d){return l([...n.path,d])===i.value}function w(d){if(!ke(n.sourceFiles)||p(d))return;const y=n.sourceFiles.children[d];ke(y)||o("select",[...n.path,d])}function f(d,y){d==="delete"&&o("delete",[...n.path,y])}return(d,y)=>(v(),b("div",null,[(v(!0),b(z,null,fe(u.value,([a,g])=>(v(),L(qo,{key:a,name:a,matched:"","has-children":_(ke)(g),selected:c(a),disabled:p(a),"right-click-options":xt,"dropdown-options":_(ke)(g)||_(Me)(g)?xt:void 0,onSelect:h=>w(a),onDropdownSelect:h=>f(h,a)},Jt({children:I(()=>[F(Ut,{"source-files":g,"path-active":e.pathActive,"paths-unsaved":e.pathsUnsaved,path:[...e.path,a],onSelect:y[0]||(y[0]=h=>d.$emit("select",h)),onDelete:y[1]||(y[1]=h=>d.$emit("delete",h))},null,8,["source-files","path-active","paths-unsaved","path"])]),_:2},[p(a)||m(a)?{name:"nameLeft",fn:I(()=>[p(a)?(v(),L(Qo,{key:0,"time-ms":2e3})):m(a)?(v(),L(Ko,{key:1,state:"newDraft"})):P("",!0)]),key:"0"}:void 0]),1032,["name","has-children","selected","disabled","dropdown-options","onSelect","onDropdownSelect"]))),128))]))}}),Ut=M(el,[["__scopeId","data-v-42a4456e"]]),Pe=st([]);function Nt(){function e(n){Pe.value=Pe.value.filter(o=>o.id!==n)}function t(n){const o=new Date().getTime();Pe.value=[...Pe.value,{...n,id:o}],n.closable||setTimeout(()=>e(o),n.delayMs??3e3)}return{pushToast:t,removeToast:e,toasts:Qt(Pe)}}const tl={class:"BuilderCodePanelFileUploadBtn"},nl=R({__name:"BuilderCodePanelFileUploadBtn",emits:{selected:e=>Array.isArray(e)&&e.length>0},setup(e,{emit:t}){const n=Se("input"),o=t;function l(){var i;(i=n.value.files)!=null&&i.length&&o("selected",n.value.files)}return(i,s)=>(v(),b("form",tl,[Ue(r("input",{ref_key:"input",ref:n,type:"file",multiple:"true",onChange:l},null,544),[[lt,!1]]),r("button",{class:"BuilderCodePanelFileUploadBtn__btn",type:"button",onClick:s[0]||(s[0]=u=>_(n).click())},s[1]||(s[1]=[r("i",{class:"material-symbols-outlined"},"upload",-1),A(" Upload ")]))]))}}),ol=M(nl,[["__scopeId","data-v-f452b9e2"]]),ll={class:"BuilderCodePanel__tree"},sl={class:"BuilderCodePanel__tree__actions"},il={key:1,class:"BuilderCodePanel__noPreview"},al={class:"BuilderCodePanel__actionsCompanion"},rl=R({__name:"BuilderCodePanel",props:{contentsTeleportEl:{}},setup(e){const t=ae({loader:()=>re(()=>import("./BuilderEmbeddedCodeEditor-BY_NqBZ-.js").then(B=>B.a),__vite__mapDeps([4,1,2,5]),import.meta.url),loadingComponent:me}),n=K(Z.core),o=[{label:"Rename file",value:"rename",icon:"edit"},{label:"Delete file",value:"delete",icon:"delete"}],{sourceFileDraft:l,openFile:i,upload:s,openNewFile:u,code:p,openedFileLanguage:m,filepathOpen:c,fileOpen:w,pathsUnsaved:f,save:d}=Nn(n);async function y(B){await Promise.all([...B].map(a))}async function a(B){try{await s(B),h({type:"success",message:`File ${B.name} uploaded`})}catch(U){h({type:"error",message:U.message})}}const g=k(()=>{var B;return(B=w.value)==null?void 0:B.type}),{pushToast:h}=Nt(),C=nn();function x(B){const U=new AbortController;Fe(()=>{document.addEventListener("keydown",async J=>{const Ze=J.metaKey||J.ctrlKey,Ge=J.key==="s"||J.key==="S";!Ze||!Ge||(J.preventDefault(),await B())},{signal:U.signal})}),ot(U.abort)}x(Te);const E=Se("filenameEl"),S=W(""),N=W(!1),T=k(()=>{var B;return((B=c.value)==null?void 0:B.join("/"))??""}),H=k(()=>T.value!=="main.py"),G=k(()=>T.value!==S.value),j=k(()=>N.value||T.value==="main.py"),ne=k(()=>G.value?!1:c.value===void 0?!0:!f.value.map(B=>B.join("/")).includes(T.value));ve(c,()=>{var B;S.value=((B=c.value)==null?void 0:B.join("/"))??""}),ve(n.sessionTimestamp,()=>{N.value=!1});function $e(B){B&&c.value===void 0&&i(["main.py"])}async function we(){var B;T.value!=="main.py"&&(await ye(),(B=E.value)==null||B.focus())}async function Ke(B){switch(B){case"rename":return we();case"delete":await Ie(c.value)}}async function ie(){await u(),we()}async function Ie(B){await n.sendDeleteSourceFileRequest(B),h({type:"success",message:"The file was deleted"}),c.value.join("/").startsWith(B.join("/"))&&i(["main.py"])}async function Te(){if(c.value===void 0)return h({type:"error",message:"There is no file open"});if(ne.value)return h({type:"info",message:"There are not file changes to save"});N.value=!0;try{await d(G.value?S.value.split("/"):void 0),h({type:"success",message:"The file was saved"})}catch(B){C.error("The file hasn't been saved.",B),h({type:"error",message:"The file hasn't been saved"});return}finally{N.value=!1}}return(B,U)=>(v(),L($t,{"panel-id":"code",name:"Code","contents-teleport-el":B.contentsTeleportEl,actions:[],scrollable:!1,"enable-left-panel":"","keyboard-shortcut-key":"J",class:"BuilderCodePanel","enable-drop-file":"",onFilesDrop:y,onOpenned:$e},{leftPanel:I(()=>[r("div",ll,[F(Ut,{"path-active":_(c),"paths-unsaved":_(f),"source-files":_(l),onAddFile:ie,onSelect:_(i),onDelete:Ie},null,8,["path-active","paths-unsaved","source-files","onSelect"]),r("div",sl,[r("button",{class:"BuilderCodePanel__tree__actions__addFile",onClick:ie},U[2]||(U[2]=[r("i",{class:"material-symbols-outlined"},"add",-1),A(" Add file ")])),F(ol,{onSelected:y})])])]),actionsCompanion:I(()=>[r("div",al,[F(en,{ref_key:"filenameEl",ref:E,modelValue:S.value,"onUpdate:modelValue":U[1]||(U[1]=J=>S.value=J),disabled:!H.value,class:"BuilderCodePanel__actionsCompanion__filename",autofocus:"",variant:"ghost",onKeydown:Bt(Te,["enter"])},null,8,["modelValue","disabled"]),F(Y,{variant:"primary",size:"small",disabled:N.value||ne.value,class:"BuilderCodePanel__actionsCompanion__saveBtn",onClick:Te},{default:I(()=>U[4]||(U[4]=[r("i",{class:"material-symbols-outlined"},"save",-1),A(" Save file ")])),_:1},8,["disabled"]),F(Vt,{disabled:j.value,options:o,onSelect:Ke},null,8,["disabled"])])]),default:I(()=>[g.value==="file"?(v(),L(_(t),{key:0,modelValue:_(p),"onUpdate:modelValue":U[0]||(U[0]=J=>tn(p)?p.value=J:null),variant:"full",language:_(m),disabled:N.value},null,8,["modelValue","language","disabled"])):P("",!0),g.value==="binary"?(v(),b("div",il,U[3]||(U[3]=[r("img",{class:"BuilderCodePanel__noPreview__img",src:Vn},null,-1),r("p",{class:"BuilderCodePanel__noPreview__title"},"Can’t Preview File",-1),r("p",{class:"BuilderCodePanel__noPreview__desc"}," Non-text files are not available to view here ",-1)]))):P("",!0)]),_:1},8,["contents-teleport-el"]))}}),ul=M(rl,[["__scopeId","data-v-5bff2a2b"]]),cl={class:"BuiderLogWorkflowExecutionTrace"},dl={class:"details"},fl={class:"data","data-automation-key":"result"},pl={key:1,class:"nothing"},ml={class:"data","data-automation-key":"return-value"},vl={class:"environment"},gl={class:"data"},yl={key:1,class:"nothing"},hl={class:"trace"},wl={class:"eyebrow"},_l=R({__name:"BuilderLogWorkflowExecutionTrace",props:{executionItem:{}},emits:["closeModal"],setup(e,{emit:t}){const n=K(Z.core),o=K(Z.builderManager),l=t,{goToComponentParentPage:i}=Ve(n,o),s=e,u=k(()=>{var w;const m=(w=s.executionItem.executionEnvironment)==null?void 0:w.trace;return Object.fromEntries(m.map(f=>[f,n.getComponentById(f)]))});async function p(m){l("closeModal"),o.setMode("workflows"),await ye(),i(m),await ye(),o.setSelection(m,void 0,"log")}return(m,c)=>{var w,f,d;return v(),b("div",cl,[r("div",dl,[r("div",null,[c[0]||(c[0]=r("h3",null,"Result",-1)),c[1]||(c[1]=r("p",null," The value resulting of the execution of this block. This value is added to the execution environment of the direct dependents of this block. There, it's accessible via @{result}. ",-1)),r("div",fl,[(w=m.executionItem)!=null&&w.result?(v(),L(Re,{key:0,data:m.executionItem.result,"initial-depth":1,class:"data"},null,8,["data"])):(v(),b("div",pl,"No result."))])]),r("div",null,[c[2]||(c[2]=r("h3",null,"Return value",-1)),c[3]||(c[3]=r("p",null," The value being returned, which is used to determine the result of 'Run workflow' blocks and 'Chat completion' tool calls. ",-1)),r("div",ml,[(f=m.executionItem)!=null&&f.returnValue?(v(),L(Re,{key:0,data:m.executionItem.returnValue,"initial-depth":1,class:"data"},null,8,["data"])):(v(),b(z,{key:1},[A(" No return value. ")],64))])])]),r("div",vl,[c[4]||(c[4]=r("h3",null,"Execution environment",-1)),c[5]||(c[5]=r("p",null," The following values were made available to this block during execution time. These values are accessible via the same template syntax i.e. @{my_var}, as state elements. ",-1)),r("div",gl,[(d=m.executionItem)!=null&&d.executionEnvironment?(v(),L(Re,{key:0,data:m.executionItem.executionEnvironment,"initial-depth":1,class:"data"},null,8,["data"])):(v(),b("div",yl,"Empty execution environment."))])]),r("div",hl,[c[7]||(c[7]=r("h3",null,"Call stack",-1)),(v(!0),b(z,null,fe(u.value,(y,a)=>{var g,h,C;return v(),b("div",{key:a,class:V(["component",{active:a==m.executionItem.componentId}])},[r("div",null,[r("div",wl,[a==m.executionItem.componentId?(v(),b(z,{key:0},[A(" This block · ")],64)):P("",!0),A(" "+D(((g=_(n).getComponentDefinition(y==null?void 0:y.type))==null?void 0:g.name)??"Unavailable component")+" · Id: "+D(a),1)]),A(" "+D(((h=y==null?void 0:y.content)==null?void 0:h.alias)??((C=_(n).getComponentDefinition(y==null?void 0:y.type))==null?void 0:C.name)??"Unavailable component"),1)]),y?(v(),L(Y,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:x=>p(a)},{default:I(()=>c[6]||(c[6]=[r("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:2},1032,["onClick"])):P("",!0)],2)}),128))])])}}}),bl=M(_l,[["__scopeId","data-v-4a5d244b"]]),Cl={class:"main"},kl={class:"titleContainer"},xl={key:0},Sl={class:"slotContainer"},Bl={key:0,class:"actionContainer"},$l=R({__name:"WdsModal",props:{title:{type:String,required:!0},size:{type:String,required:!1,default:"normal"},description:{type:String,required:!1,default:null},actions:{type:Array,required:!0,default:void 0},allowOverflow:{type:Boolean,required:!1}},setup(e){const t=e,{title:n,actions:o}=St(t);return(l,i)=>{var s;return v(),L(nt,{to:"#modal"},[r("div",{class:V(["WdsModal colorTransformer",{"WdsModal--overflow":e.allowOverflow,"WdsModal--wide":e.size=="wide"}]),tabindex:"-1"},[r("div",Cl,[r("div",kl,[r("h2",null,D(_(n)),1),e.description?(v(),b("summary",xl,D(e.description),1)):P("",!0)]),r("div",Sl,[ue(l.$slots,"default",{},void 0,!0)]),((s=_(o))==null?void 0:s.length)>0?(v(),b("div",Bl,[(v(!0),b(z,null,fe(_(o),(u,p)=>(v(),L(Y,{key:p,variant:p==_(o).length-1?"primary":"tertiary",onClick:u.fn},{default:I(()=>[A(D(u.desc),1)]),_:2},1032,["variant","onClick"]))),128))])):P("",!0)])],2)])}}}),Tl=M($l,[["__scopeId","data-v-d920d432"]]),Dl={class:"BuilderLogWorkflowExecution"},Pl={class:"name"},Ll={key:0},El={class:"eyebrow"},Fl={class:"outcome"},Al={class:"result"},Il={class:"time"},Rl={key:0,class:"message markdown"},Ml=R({__name:"BuilderLogWorkflowExecution",props:{executionLog:{}},setup(e){const t=K(Z.core),n=K(Z.builderManager),{goToComponentParentPage:o}=Ve(t,n),l=e,i=W(null),s=k(()=>({summary:[...l.executionLog.summary.filter(c=>!!c.outcome).map(c=>({...c,component:t.getComponentById(c.componentId),componentDef:t.getComponentById(c.componentId)?t.getComponentDefinition(t.getComponentById(c.componentId).type):void 0}))]}));async function u(m){n.setMode("workflows"),await ye(),o(m),await ye(),n.setSelection(m,void 0,"log")}function p(m){return m<0?"N/A":m<.1?"< 0.1s":`${m.toFixed(2)}s`}return(m,c)=>{const w=on("dompurify-html");return v(),b("div",Dl,[(v(!0),b(z,null,fe(s.value.summary,(f,d)=>{var y,a,g,h,C,x,E,S,N,T,H,G;return v(),b("div",{key:d,class:"row"},[c[5]||(c[5]=r("div",{class:"marker top"},null,-1)),c[6]||(c[6]=r("div",{class:"marker bottom"},null,-1)),r("div",{class:V(["item",{selected:_(n).firstSelectedId.value==f.componentId}])},[r("div",Pl,[(a=(y=f.component)==null?void 0:y.content)!=null&&a.alias?(v(),b("div",Ll,[r("div",El,D(((g=f.componentDef)==null?void 0:g.name)??"Unavailable component"),1),A(" "+D((C=(h=f.component)==null?void 0:h.content)==null?void 0:C.alias),1)])):(v(),b(z,{key:1},[A(D(((x=f.componentDef)==null?void 0:x.name)??"Unavailable component"),1)],64)),f.component?(v(),L(Y,{key:2,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:j=>u(f.componentId)},{default:I(()=>c[1]||(c[1]=[r("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:2},1032,["onClick"])):P("",!0)]),r("div",Fl,[f.outcome!=="in_progress"?(v(),b(z,{key:0},[r("div",{class:V(["ball",(N=(S=(E=f.componentDef)==null?void 0:E.outs)==null?void 0:S[f.outcome])==null?void 0:N.style])},null,2),A(" "+D(((G=(H=(T=f.componentDef)==null?void 0:T.outs)==null?void 0:H[f.outcome])==null?void 0:G.name)??f.outcome),1)],64)):(v(),b(z,{key:1},[c[2]||(c[2]=r("div",{class:"ballContainer"},[r("div",{class:"ball inProgress"})],-1)),c[3]||(c[3]=A(" In progress... "))],64))]),r("div",Al,[i.value==d?(v(),L(Tl,{key:0,title:"Trace",size:"wide",actions:[{desc:"Done",fn:()=>i.value=null}]},{default:I(()=>[F(bl,{"execution-item":f,onCloseModal:c[0]||(c[0]=()=>i.value=null)},null,8,["execution-item"])]),_:2},1032,["actions"])):P("",!0),f.result||f.returnValue||f.executionEnvironment?(v(),L(Y,{key:1,variant:"special",size:"small",onClick:()=>i.value=d},{default:I(()=>c[4]||(c[4]=[r("i",{class:"material-symbols-outlined"},"find_in_page",-1),A(" Trace ")])),_:2},1032,["onClick"])):P("",!0)]),r("div",Il,D(p(f.executionTimeInSeconds)),1),f.message?Ue((v(),b("div",Rl,null,512)),[[w,_(cn).parse(f.message)]]):P("",!0)],2)])}),128))])}}}),Ol=M(Ml,[["__scopeId","data-v-f9260bc7"]]),Wl={class:"BuilderLogIndicator"},Vl={key:0,class:"number error"},Ul={key:1,class:"number info"},Nl=R({__name:"BuilderLogIndicator",setup(e){const t=K(Z.builderManager),n=k(()=>t.getLogEntries().reduce((o,l)=>(l.type in o||(o[l.type]=0),o[l.type]++,o),{}));return(o,l)=>(v(),b("div",Wl,[n.value.error>0?(v(),b("div",Vl,[l[0]||(l[0]=r("div",{class:"icon"},[r("i",{class:"material-symbols-outlined"},"error")],-1)),A(" "+D(n.value.error??0),1)])):P("",!0),n.value.info>0?(v(),b("div",Ul,[l[1]||(l[1]=r("div",{class:"icon"},[r("i",{class:"material-symbols-outlined"},"info")],-1)),A(" "+D(n.value.info??0),1)])):P("",!0)]))}}),zl=M(Nl,[["__scopeId","data-v-34a7a9ff"]]),Hl={key:0,class:"entries"},ql={class:"icon"},jl={key:0,class:"material-symbols-outlined"},Kl={key:1,class:"material-symbols-outlined"},Zl={class:"title"},Gl={class:"time"},Xl={class:"content"},Yl={key:0,class:"codeContainer"},Jl={key:1,class:"emptyMessage"},Ql=R({__name:"BuilderLogPanel",props:{contentsTeleportEl:{}},setup(e){const t=K(Z.builderManager),n=[{icon:"delete",name:"Clear log",callback:()=>{t.clearLogEntries()},keyboardShortcut:{modifierKey:!0,key:"L"}}],o=k(()=>t.getLogEntries());return(l,i)=>(v(),L($t,{"panel-id":"log",name:"Log","contents-teleport-el":l.contentsTeleportEl,actions:n,scrollable:!0,"keyboard-shortcut-key":"K",class:"BuilderLogPanel"},{titleCompanion:I(()=>[F(zl)]),default:I(()=>[o.value.length>0?(v(),b("div",Hl,[(v(!0),b(z,null,fe(o.value,(s,u)=>(v(),b(z,{key:u},[r("div",{class:V(["entry",s.type])},[r("div",ql,[s.type=="error"?(v(),b("i",jl,"error")):(v(),b("i",Kl,"info"))]),r("div",Zl,D(s.title)+D(s.repeated>0?` · Repeated ${s.repeated} times`:""),1),r("div",Gl,D(s.timestampReceived.toLocaleTimeString()),1),r("div",Xl,[A(D(s.message)+" ",1),s.code?(v(),b("div",Yl,[r("code",null,D(s.code),1)])):P("",!0)])],2),s.workflowExecution?(v(),L(Ol,{key:0,"execution-log":s.workflowExecution},null,8,["execution-log"])):P("",!0)],64))),128))])):P("",!0),o.value.length==0?(v(),b("div",Jl,i[0]||(i[0]=[r("div",null,[A(" Exceptions and other relevant messages will be shown here."),r("br"),A("Also, you can include print statements in event handlers to create log entries. ")],-1)]))):P("",!0)]),_:1},8,["contents-teleport-el"]))}}),es=M(Ql,[["__scopeId","data-v-f784bc20"]]),ts={class:"switches"},ns=R({__name:"BuilderPanelSwitcher",setup(e){const t=K(Z.builderManager),n=Se("screenEl");return(o,l)=>(v(),b("div",{class:V(["BuilderPanelSwitcher",{openPanels:_(t).openPanels.value.size>0}])},[r("div",{ref_key:"screenEl",ref:n,class:"screen"},null,512),r("div",ts,[F(ul,{"contents-teleport-el":_(n)},null,8,["contents-teleport-el"]),F(es,{"contents-teleport-el":_(n)},null,8,["contents-teleport-el"])])],2))}}),os=M(ns,[["__scopeId","data-v-75a489c0"]]),ls={class:"WdsToast__icon"},ss={class:"material-symbols-outlined"},is=R({__name:"WdsToast",props:{type:{type:String,required:!0},message:{type:String,required:!0},closable:{type:Boolean}},emits:{close:()=>!0},setup(e){const t=e,n=k(()=>{switch(t.type){case"info":return"info";case"success":return"check";case"error":return"close";default:return"question_mark"}});return(o,l)=>(v(),b("div",{class:V(["WdsToast",`WdsToast--${e.type}`])},[r("div",ls,[r("span",ss,D(n.value),1)]),r("p",null,D(e.message),1),e.closable?(v(),L(Y,{key:0,class:"WdsToast__close",variant:"neutral",size:"smallIcon",onClick:l[0]||(l[0]=i=>o.$emit("close"))},{default:I(()=>l[1]||(l[1]=[r("span",{class:"material-symbols-outlined"},"close",-1)])),_:1})):P("",!0)],2))}}),as=M(is,[["__scopeId","data-v-9bb8d639"]]),rs={class:"BuilderToasts"},us=R({__name:"BuilderToasts",setup(e){const{toasts:t,removeToast:n}=Nt();return(o,l)=>(v(),b("div",rs,[F(ln,{name:"list",tag:"div"},{default:I(()=>[(v(!0),b(z,null,fe(_(t),i=>(v(),L(as,{key:i.id,class:"BuilderToasts__toast",closable:i.closable,message:i.message,type:i.type,onClick:s=>_(n)(i.id)},null,8,["closable","message","type","onClick"]))),128))]),_:1})]))}}),cs=M(us,[["__scopeId","data-v-d7aa9182"]]),ds={key:0,class:"sidebar"},fs={class:"builderMain"},ps={class:"rendererWrapper"},ms=R({__name:"BuilderApp",setup(e){sn($=>({bfcacb52:_(p).getMode()!=="preview"?"var(--builderSidebarWidth)":"0px"}));const t=ae({loader:()=>re(()=>import("./BuilderSettings-oWe5fV87.js").then($=>$.b),__vite__mapDeps([6,1,2,7,4,5,8,9]),import.meta.url),loadingComponent:me}),n=ae({loader:()=>re(()=>import("./BuilderSidebar-Cu6BAjKV.js"),__vite__mapDeps([10,1,2,8,11]),import.meta.url),loadingComponent:me}),o=ae({loader:()=>re(()=>import("./ComponentRenderer-BRt_Me-n.js"),__vite__mapDeps([12,1,2,7,13]),import.meta.url),loadingComponent:me}),l=ae({loader:()=>re(()=>import("./BuilderInstanceTracker-CRARK37a.js"),__vite__mapDeps([14,1,2,15]),import.meta.url),loadingComponent:me}),i=ae({loader:()=>re(()=>import("./BuilderInsertionOverlay-2iKOQQYg.js"),__vite__mapDeps([16,1,2,17]),import.meta.url),loadingComponent:me}),s=ae({loader:()=>re(()=>import("./BuilderInsertionLabel-B-JQXmdI.js"),__vite__mapDeps([18,1,2,19]),import.meta.url),loadingComponent:me}),u=K(Z.core),p=K(Z.builderManager),{candidateId:m,candidateInstancePath:c,isCandidacyConfirmed:w,dropComponent:f,assignInsertionCandidacy:d,removeInsertionCandidacy:y}=rn(u),{createAndInsertComponent:a,undo:g,redo:h,moveComponent:C,moveComponentUp:x,moveComponentDown:E,cutComponent:S,isPasteAllowed:N,isCopyAllowed:T,isCutAllowed:H,isDeleteAllowed:G,isGoToParentAllowed:j,pasteComponent:ne,copyComponent:$e,removeComponentSubtree:we,goToParent:Ke}=Ve(u,p),ie=k(()=>p.getMode()),Ie=k(()=>p.firstSelectedId.value);function Te($){if($.key=="Escape"){p.setSelection(null);return}const q=un()?$.metaKey:$.ctrlKey;if($.target.closest("textarea, input, select"))return;if($.key=="z"&&q){$.preventDefault(),g();return}if($.key=="y"&&q){$.preventDefault(),h();return}if(!p.isSingleSelectionActive.value||!p.firstSelectedItem.value)return;const{componentId:O,instancePath:_e}=p.firstSelectedItem.value;if($.key=="Delete"){if(!G(O))return;we(O);return}if($.key=="ArrowUp"&&q&&$.shiftKey){if(!j(O))return;Ke(O,_e);return}if($.key=="ArrowUp"&&q){x(O);return}if($.key=="ArrowDown"&&q){E(O);return}if($.key=="v"&&q){if(!N(O))return;ne(O);return}if($.key=="c"&&q){if(!T(O))return;$e(O);return}if($.key=="x"&&q){if(!H(O))return;S(O);return}}function B($){ie.value!=="preview"&&d($)}function U($){if(ie.value==="preview")return;p.setSelection(null);const q=f($);if(!q)return;const{draggedType:oe,draggedId:O,parentId:_e,position:Xe}=q;O?C(O,_e,Xe):a(oe,_e,Xe)}function J($){if(ie.value==="preview"||$.target.closest("[data-writer-unselectable]"))return;const oe=$.target.closest("[data-writer-id]");if(!oe)return;const O=oe.dataset.writerId,_e=oe.dataset.writerInstancePath;p.isComponentIdSelected(O)&&p.selectionStatus.value!==pt.Multiple||($.preventDefault(),$.stopPropagation(),p.handleSelectionFromEvent($,O,_e,"click"))}const Ze=$=>{if(ie.value==="preview")return;const oe=$.target.closest("[data-writer-id]").dataset.writerId,{type:O}=u.getComponentById(oe);p.selectionStatus.value===pt.Multiple&&(p.setSelection(oe,void 0,"click"),p.isSettingsBarCollapsed.value=!0),$.dataTransfer.setData(`application/json;writer=${O},${oe}`,"{}")};function Ge($){p.setSelection(null),y($)}return Fe(()=>{document.addEventListener("keydown",Te)}),($,q)=>(v(),b("div",{class:"BuilderApp",tabindex:"-1",style:Ne(_(an))},[r("div",{class:V(["mainGrid",{openPanels:_(p).openPanels.value.size>0}])},[F(En,{class:"builderHeader"}),ie.value!=="preview"?(v(),b("div",ds,[F(_(n))])):P("",!0),r("div",fs,[r("div",ps,[F(_(o),{class:V(["componentRenderer",{settingsOpen:_(p).isSingleSelectionActive}]),onDragover:B,onDragstart:Ze,onDragend:Ge,onDrop:U,onClickCapture:J},null,8,["class"])]),_(p).isSingleSelectionActive?(v(),L(_(t),{key:Ie.value??"noneSelected"})):P("",!0)]),F(os,{class:"panelSwitcher"})],2),ie.value!=="preview"?(v(),b(z,{key:0},[_(m)&&!_(w)?(v(),b(z,{key:0},[(v(),L(_(l),{key:_(c),class:"insertionOverlayTracker","is-off-bounds-allowed":!0,"instance-path":_(c),"match-size":!0},{default:I(()=>[F(_(i))]),_:1},8,["instance-path"])),(v(),L(_(l),{key:_(c),class:"insertionLabelTracker","instance-path":_(c),"vertical-offset-pixels":-48},{default:I(()=>[F(_(s),null,{default:I(()=>[A(D(_(u).getComponentDefinition(_(u).getComponentById(_(m)).type).name),1)]),_:1})]),_:1},8,["instance-path"]))],64)):P("",!0)],64)):P("",!0),q[0]||(q[0]=r("div",{id:"modal"},null,-1)),F(Mn,{id:"tooltip"}),F(cs)],4))}}),vs=M(ms,[["__scopeId","data-v-3f1c20fd"]]),hs=Object.freeze(Object.defineProperty({__proto__:null,default:vs},Symbol.toStringTag,{value:"Module"}));export{bn as B,qo as T,Tl as W,Eo as a,me as b,hs as c,Io as u};
