{"version":3,"file":"mod-helpers-dev.js","names":["$","MyAMS","helpers","_exports","clearValue","evt","target","currentTarget","data","val","clearDatetimeValue","picker","date","scrollTo","parent","arguments","length","undefined","anchor","props","exists","require","then","ajax","check","fn","env","baseURL","extext","setLoginHash","form","hash","window","location","setSEOStatus","input","progress","siblings","children","Math","min","status","removeClassPrefix","addClass","css","select2ChangeHelper","Promise","resolve","reject","source","amsSelect2HelperTarget","params","callback","amsSelect2HelperType","html","amsSelect2HelperArgument","get","amsSelect2HelperUrl","result","core","getFunctionByName","amsSelect2HelperCallback","initContent","empty","catch","executeFunctionByName","refreshElement","options","element","object_id","config","clearContent","document","replaceWith","content","parents","first","refreshWidget","widget","widget_id","group","refreshTable","selector","table_id","table","hasClass","dtTable","DataTable","destroy","addTableRow","newRow","rows","add","draw","row_id","refreshTableRow","row","remove","deleteTableRow","refreshImage","image","image_id","attr","src","moveElementToParentEnd","detach","appendTo","addElementToParent","_ref","scrollParent","hideDropdown","closest","dropdown","bundle","modules","push","console","debug"],"sources":["mod-helpers.js"],"sourcesContent":["/* global MyAMS */\n/**\n * MyAMS generic helpers\n */\n\nconst $ = MyAMS.$;\n\n\nexport const helpers = {\n\n\t/**\n\t * Click handler used to clear input\n\t */\n\tclearValue: (evt) => {\n\t\tconst target = $(evt.currentTarget).data('target');\n\t\tif (target) {\n\t\t\t$(target).val(null);\n\t\t}\n\t},\n\n\t/**\n\t * Click handler used to clear datetime input\n\t */\n\tclearDatetimeValue: (evt) => {\n\t\tconst\n\t\t\ttarget = $(evt.currentTarget).data('target'),\n\t\t\tpicker = $(target).data('datetimepicker');\n\t\tif (picker) {\n\t\t\tpicker.date(null);\n\t\t}\n\t},\n\n\t/**\n\t * Scroll anchor parent element to given anchor\n\t *\n\t * @param anchor: scroll target\n\t * @param parent: scroll parent\n\t * @param props: scroll properties\n\t */\n\tscrollTo: (parent='#content', anchor, {...props}) => {\n\t\tif (typeof anchor === 'string') {\n\t\t\tanchor = $(anchor);\n\t\t}\n\t\tif (anchor.exists()) {\n\t\t\tMyAMS.require('ajax').then(() => {\n\t\t\t\tMyAMS.ajax.check($.fn.scrollTo,\n\t\t\t\t\t`${MyAMS.env.baseURL}../ext/jquery-scrollto${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t$(parent).scrollTo(anchor, props);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Store location hash when redirecting to log in form\n\t *\n\t * This helper is used to store window location hash into form input, to redirect\n\t * user correctly after login.\n\t */\n\tsetLoginHash: () => {\n\t\tconst\n\t\t\tform = $('#login_form'),\n\t\t\thash = $(`input[name=\"login_form.widgets.hash\"]`, form);\n\t\thash.val(window.location.hash);\n\t},\n\n\t/**\n\t * SEO input helper\n\t *\n\t * This helper is used to display a small coloured progress bar below a text input\n\t * to display its SEO quality based on text length.\n\t */\n\tsetSEOStatus: (evt) => {\n\t\tconst\n\t\t\tinput = $(evt.target),\n\t\t\tprogress = input.siblings('.progress').children('.progress-bar'),\n\t\t\tlength = Math.min(input.val().length, 100);\n\t\tlet status = 'success';\n\t\tif (length < 20 || length > 80) {\n\t\t\tstatus = 'danger';\n\t\t} else if (length < 40 || length > 66) {\n\t\t\tstatus = 'warning';\n\t\t}\n\t\tprogress.removeClassPrefix('bg-')\n\t\t\t\t.addClass('bg-' + status)\n\t\t\t\t.css('width', length + '%');\n\t},\n\n\t/**\n\t * Select2 change helper\n\t *\n\t * This helper is used to handle a change event on a Select2 input. Data attributes\n\t * defined on Select2 input can be used to define behaviour of this helper:\n\t *  - data-ams-select2-helper-type: can be set to \"html\" when HTML code is loaded via a\n\t *    webservice call, and included into a *target* element\n\t *  - data-ams-select2-helper-url: remote webservice URL\n\t *  - data-ams-select2-helper-target: CSS selector of a DOM element which will receive\n\t *    result of a webservice call\n\t *  - data-ams-select2-helper-argument: name of the argument used to call webservice; if\n\t *    not defined, the used name is 'value'; this argument is filled with the selected value\n\t *    of the Select2 input\n\t *  - data-ams-select2-helper-callback: name of a callback function which can be used to\n\t *    handle webservice result; if no callback is defined, the webservice result will be\n\t *    inserted directly into defined target\n\t */\n\tselect2ChangeHelper: (evt) => {\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tconst\n\t\t\t\tsource = $(evt.currentTarget),\n\t\t\t\tdata = source.data(),\n\t\t\t\ttarget = $(data.amsSelect2HelperTarget),\n\t\t\t\tparams = {};\n\t\t\tlet callback;\n\t\t\tswitch (data.amsSelect2HelperType) {\n\n\t\t\t\tcase 'html':\n\t\t\t\t\ttarget.html('<div class=\"text-center\"><i class=\"fas fa-2x fa-spinner fa-spin\"></i></div>');\n\t\t\t\t\tparams[data.amsSelect2HelperArgument || 'value'] = source.val();\n\t\t\t\t\t$.get(data.amsSelect2HelperUrl, params).then((result) => {\n\t\t\t\t\t\tcallback = MyAMS.core.getFunctionByName(data.amsSelect2HelperCallback) || ((result) => {\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\ttarget.html(result);\n\t\t\t\t\t\t\t\tMyAMS.core.initContent(target).then(() => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget.empty();\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(result);\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\ttarget.empty();\n\t\t\t\t\t\treject();\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tcallback = data.amsSelect2HelperCallback;\n\t\t\t\t\tif (callback) {\n\t\t\t\t\t\tMyAMS.core.executeFunctionByName(callback, source, data);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a DOM element with content provided in\n\t * the <code>options</code> object.\n\t *\n\t * @param form: optional parent element\n\t * @param options: element properties:\n\t *   - object_id: ID of the refreshed element\n\t *   - content: new element content\n\t */\n\trefreshElement: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet element = $(`[id=\"${options.object_id}\"]`);\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, element).then(() => {\n\t\t\t\telement.replaceWith($(options.content));\n\t\t\t\telement = $(`[id=\"${options.object_id}\"]`);\n\t\t\t\tconst parent = element.parents().first();\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent, document, parent).then(() => {\n\t\t\t\t\tresolve(element);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a form widget with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated widget properties:\n\t *   - widget_id: ID of the refreshed widget\n\t *   - content: new element content\n\t */\n\trefreshWidget: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet widget = $(`[id=\"${options.widget_id}\"]`),\n\t\t\t\tgroup = widget.parents('.widget-group');\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, group).then(() => {\n\t\t\t\tgroup.replaceWith($(options.content));\n\t\t\t\twidget = $(`[id=\"${options.widget_id}\"]`);\n\t\t\t\tgroup = widget.parents('.widget-group');\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent, document, group).then(() => {\n\t\t\t\t\tresolve(widget);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a whole table with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated table properties:\n\t *    - table_id: ID of the refreshed table\n\t *    - content: new table HTML content\n\t */\n\trefreshTable: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst selector = `table[id=\"${options.table_id}\"]`;\n\t\t\tlet table = $(selector);\n\t\t\tif (!table.exists()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (table.hasClass('datatable')) {\n\t\t\t\tconst dtTable = table.DataTable();\n\t\t\t\tif (dtTable) {\n\t\t\t\t\tdtTable.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t\ttable.replaceWith($(options.content));\n\t\t\ttable = $(selector);\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\tdocument, table.parent()).then(() => {\n\t\t\t\tresolve(table);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Add new row to table\n\t *\n\t * @param form: optional parent form\n\t * @param options: added row properties:\n\t *    - table_id: updated table ID\n\t *    - row_id: updated row ID\n\t *    - data: updated row data\n\t *    - content: updated row HTML content\n\t */\n\taddTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `table[id=\"${options.table_id}\"]`,\n\t\t\t\ttable = $(selector),\n\t\t\t\tdtTable = table.DataTable();\n\t\t\tlet newRow;\n\t\t\tif (options.data) {\n\t\t\t\tdtTable.rows.add(options.data).draw();\n\t\t\t\tnewRow = $(`tr[id=\"${options.row_id}\"]`, table);\n\t\t\t\tresolve(newRow);\n\t\t\t} else {\n\t\t\t\tnewRow = $(options.content);\n\t\t\t\tdtTable.rows.add(newRow).draw();\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\t\tdocument, newRow).then(() => {\n\t\t\t\t\tresolve(newRow);\n\t\t\t\t}, reject);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a table row with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated row properties:\n\t *   - row_id: ID of the refreshed row\n\t *   - content: new row content\n\t */\n\trefreshTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `tr[id=\"${options.row_id}\"]`,\n\t\t\t\trow = $(selector),\n\t\t\t\ttable = row.parents('table').first();\n\t\t\tif (options.data) {\n\t\t\t\tif ($.fn.DataTable) {\n\t\t\t\t\tconst dtTable = table.DataTable();\n\t\t\t\t\tif (typeof options.data === 'string') {\n\t\t\t\t\t\tdtTable.row(selector).remove();\n\t\t\t\t\t\tdtTable.row.add($(options.data)).draw();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdtTable.row(selector).data(options.data).draw();\n\t\t\t\t\t}\n\t\t\t\t\tresolve(row);\n\t\t\t\t} else {\n\t\t\t\t\treject('No DataTable plug-in available!');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst newRow = $(options.content);\n\t\t\t\trow.replaceWith(newRow);\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\t\tdocument, newRow).then(() => {\n\t\t\t\t\tresolve(newRow);\n\t\t\t\t}, reject);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Delete a table row with given ID\n\t *\n\t * @param form: optional parent form\n\t * @param options: removed row properties:\n\t *   - row_id: ID of the deleted row\n\t */\n\tdeleteTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `tr[id=\"${options.row_id}\"]`,\n\t\t\t\trow = $(selector),\n\t\t\t\ttable = row.parents('table').first();\n\t\t\tif ($.fn.DataTable) {\n\t\t\t\tconst dtTable = table.DataTable();\n\t\t\t\tdtTable.row(selector).remove();\n\t\t\t\tdtTable.draw();\n\t\t\t} else {\n\t\t\t\trow.remove();\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a single image with content provided in\n\t * the <code>options</code> object.\n\t *\n\t * @param form: optional parent element\n\t * @param options: image properties:\n\t *   - image_id: ID of the refreshed image\n\t *   - src: new image source URL\n\t */\n\trefreshImage: (form, options) => {\n\t\tconst image = $(`[id=\"${options.image_id}\"]`);\n\t\timage.attr('src', options.src);\n\t},\n\n\t/**\n\t * Move given element to the end of it's parent\n\t *\n\t * @param element: the element to be moved\n\t * @returns {*}\n\t */\n\tmoveElementToParentEnd: (element) => {\n\t\tconst parent = element.parent();\n\t\treturn element.detach()\n\t\t\t.appendTo(parent);\n\t},\n\n\t/**\n\t * Add given element to the end of specified parent\n\t *\n\t * @param source: event source\n\t * @param element: the provided element\n\t * @param parent: the parent to which element should be added\n\t * @param props: additional props\n\t * @returns {*}\n\t */\n\taddElementToParent: (source, {element, parent, ...props}) => {\n\t\telement = $(element);\n\t\tparent = $(parent);\n\t\tconst result = element.appendTo(parent);\n\t\tif (props.scrollTo) {\n\t\t\tMyAMS.helpers.scrollTo(props.scrollParent, element);\n\t\t}\n\t\treturn result;\n\t},\n\n\t/**\n\t * Toggle dropdown associated with given event target\n\t *\n\t * @param evt: source event\n\t */\n\thideDropdown: (evt) => {\n\t\t$(evt.target).closest('.dropdown-menu').dropdown('hide');\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (window.MyAMS) {\n\tif (MyAMS.env.bundle) {\n\t\tMyAMS.config.modules.push('helpers');\n\t} else {\n\t\tMyAMS.helpers = helpers;\n\t\tconsole.debug(\"MyAMS: helpers module loaded...\");\n\t}\n}\n"],"mappings":"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","ignoreList":[]}