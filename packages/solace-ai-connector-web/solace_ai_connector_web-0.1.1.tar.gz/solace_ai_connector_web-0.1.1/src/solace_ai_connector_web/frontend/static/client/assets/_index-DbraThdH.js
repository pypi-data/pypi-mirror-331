var Yn=Object.defineProperty;var Qn=(t,e,n)=>e in t?Yn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var C=(t,e,n)=>Qn(t,typeof e!="symbol"?e+"":e,n);import{r as v,c as N,d as R,g as Jn,j as h,e as we}from"./index-DOqvKUId.js";import{u as De,a as lt,g as ct}from"./ConfigProvider-BKYrVbJF.js";function Kn({serverUrl:t,useAuthorization:e,defaultIsAuthenticated:n}){const[r,i]=v.useState(n),[s,o]=v.useState(!0),{configAuthLoginUrl:a,configRedirectUrl:l}=De(),c=d=>d.status===401||d.status===403?(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),i(!1),!0):!1;return v.useEffect(()=>{e?(async()=>{try{const f=localStorage.getItem("access_token"),m=localStorage.getItem("refresh_token");let g=lt("csrf_token");if(g||(g=await ct()),f){const p=await fetch(`${t}/validate_token`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Refresh-Token":m??"","X-CSRF-TOKEN":g??""},body:JSON.stringify({token:f})});if(c(p))return;const x=await p.json();x.valid?(x.new_access_token&&localStorage.setItem("access_token",x.new_access_token),i(!0)):(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),i(!1))}else i(!1)}catch(f){console.error("Token validation error:",f),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),i(!1)}finally{o(!1)}})():o(!1)},[t,e]),{isValidatingToken:s,isAuthenticated:r,handleLogin:()=>{const d=a,f=l;window.location.href=`${d}?redirect_uri=${encodeURIComponent(f)}`}}}function er({serverUrl:t,welcomeMessage:e}){const[n,r]=v.useState(""),[i,s]=v.useState([e]),[o,a]=v.useState(""),[l,c]=v.useState(!1),[u,d]=v.useState([]),[f,m]=v.useState(()=>{if(typeof window<"u"){const b=localStorage.getItem("darkMode");return b!==null?JSON.parse(b):window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[g,p]=v.useState(null),{configBotName:x}=De();v.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(f)),f?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[f]);const T=v.useCallback(b=>{const k=Date.now().toString();d(y=>[...y,{id:k,message:b}]),setTimeout(()=>{d(y=>y.filter(_=>_.id!==k))},5e3)},[]),I=()=>{g&&(g.abort(),p(null)),r(""),s([e]),c(!1)},P=async(b,k)=>{var oe;if(b.preventDefault(),!o.trim()&&(!k||k.length===0)||l)return;U(g);const y=new AbortController;p(y),c(!0);const{accessToken:_,refreshToken:A}=j(),V=Vn(o,n,k);qn(o,k),Wn();const Dt={botMessageBuffer:"",partialLineBuffer:"",hasShownFirstStatus:!1};a("");try{const ve=await ke()??"",le=await Qe(V,y,_,A,ve);if(!le.ok){if(Un(le))return;throw new Error("Network response was not ok")}const ye=(oe=le.body)==null?void 0:oe.getReader();if(!ye)return;const Zn=new TextDecoder;if(await ne(ye,Zn,Dt))return}catch(ve){if(ve instanceof Error&&ve.name==="AbortError")return;s(le=>[...le.filter(ye=>!ye.isStatusMessage),{text:"There was an error processing your request. Please try again.",isUser:!1}])}finally{Gn()}};function U(b){b&&b.abort()}async function ne(b,k,y){for(;;){const{done:_,value:A}=await b.read();if(_)break;const V=k.decode(A,{stream:!0}),oe=(y.partialLineBuffer+V).split(`
`);if(y.partialLineBuffer=oe.pop()||"",await ae(oe,y))return!0}return!1}async function ae(b,k){for(const y of b)if(y.trim()){if(y==="data: [DONE]")return F(k.partialLineBuffer),!0;if(y.startsWith("data: ")){const _=y.slice(6);try{const A=JSON.parse(_),V=G(A,k.botMessageBuffer,k.hasShownFirstStatus);k.botMessageBuffer=V.botMessageBuffer,k.hasShownFirstStatus=V.hasShownFirstStatus}catch{k.partialLineBuffer=y}}}return!1}function F(b){if(b)try{const k=b.replace(/^data:\s*/,""),y=JSON.parse(k);y.files&&Mt(y.files)}catch(k){console.error("Error parsing final partial data:",k)}c(!1)}function G(b,k,y){return k=We(b,k),y=Xe(b,k,y),k=Ze(b,k),Ye(b),{botMessageBuffer:k,hasShownFirstStatus:y}}function We(b,k){return b.new_access_token&&localStorage.setItem("access_token",b.new_access_token),b.session_id&&!n&&r(b.session_id),k}function Xe(b,k,y){if(b.status_message)if(k!=="")T(b.status_message);else if(y)T(b.status_message);else return s(_=>[..._.filter(A=>!A.isThinkingMessage),{text:b.status_message,isUser:!1,isStatusMessage:!0}]),!0;return y}function Ze(b,k){return b.content&&(k+=b.content,Xn(k,b.id,b)),k}function Ye(b){b.files&&Mt(b.files)}function j(){return{accessToken:localStorage.getItem("access_token"),refreshToken:localStorage.getItem("refresh_token")}}async function ke(){let b=lt("csrf_token");return b||(b=await ct()),b}async function Qe(b,k,y,_,A){return await fetch(`${t}/api/v1/chat`,{method:"POST",headers:{Authorization:`Bearer ${y}`,"X-Refresh-Token":_??"","X-CSRF-TOKEN":A??""},signal:k.signal,body:b})}function Un(b){return b.status===401||b.status===403?(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/",!0):!1}function Gn(){p(null),c(!1)}function Vn(b,k,y){const _=new FormData;return _.append("prompt",b),k&&_.append("session_id",k),y&&y.forEach(A=>_.append("files",A)),_}function qn(b,k){s(y=>[...y,{text:b,isUser:!0,uploadedFiles:k&&k.length>0?Array.from(k):void 0}])}function Wn(){s(b=>[...b,{text:`${x} is thinking`,isUser:!1,isStatusMessage:!0,isThinkingMessage:!0}])}function Mt(b){s(k=>{const y=k[k.length-1];if(y&&!y.isUser){const _=y.files||[],A=Array.isArray(b)?b:[b];return[...k.slice(0,-1),{...y,files:[..._,...A]}]}return k})}function Xn(b,k,y){s(_=>{const A=_[_.length-1],V={text:b,isUser:!1,metadata:{sessionId:y.session_id||n,messageId:k}};return A&&!A.isUser?[..._.slice(0,-1),{...A,...V,isStatusMessage:!1,isThinkingMessage:!1}]:[..._,V]})}return{sessionId:n,messages:i,setMessages:s,userInput:o,setUserInput:a,isResponding:l,handleNewSession:I,handleSubmit:P,notifications:u,darkMode:f,setDarkMode:m}}var ln={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$t=N.createContext&&N.createContext(ln),tr=["attr","size","title"];function nr(t,e){if(t==null)return{};var n=rr(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rr(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ne(){return Ne=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ne.apply(this,arguments)}function zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function je(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zt(Object(n),!0).forEach(function(r){ir(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ir(t,e,n){return e=sr(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sr(t){var e=ar(t,"string");return typeof e=="symbol"?e:e+""}function ar(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cn(t){return t&&t.map((e,n)=>N.createElement(e.tag,je({key:n},e.attr),cn(e.child)))}function se(t){return e=>N.createElement(or,Ne({attr:je({},t.attr)},e),cn(t.child))}function or(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=nr(t,tr),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),N.createElement("svg",Ne({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:je(je({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&N.createElement("title",null,s),t.children)};return $t!==void 0?N.createElement($t.Consumer,null,n=>e(n)):e(ln)}function lr(t){return se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"polyline",attr:{points:"19 12 12 19 5 12"},child:[]}]})(t)}function cr(t){return se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"},child:[]}]})(t)}function ur(t){return se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function ut(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let ee=ut();function un(t){ee=t}const pe={exec:()=>null};function E(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(L.caret,"$1"),n=n.replace(i,o),r},getRegex:()=>new RegExp(n,e)};return r}const L={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},hr=/^(?:[ \t]*(?:\n|$))+/,dr=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,pr=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,be=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,fr=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ht=/(?:[*+-]|\d{1,9}[.)])/,hn=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,dn=E(hn).replace(/bull/g,ht).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),gr=E(hn).replace(/bull/g,ht).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),dt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,mr=/^[^\n]+/,pt=/(?!\s*\])(?:\\.|[^\[\]\\])+/,xr=E(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",pt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),br=E(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ht).getRegex(),$e="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ft=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,kr=E("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ft).replace("tag",$e).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),pn=E(dt).replace("hr",be).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$e).getRegex(),vr=E(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",pn).getRegex(),gt={blockquote:vr,code:dr,def:xr,fences:pr,heading:fr,hr:be,html:kr,lheading:dn,list:br,newline:hr,paragraph:pn,table:pe,text:mr},Bt=E("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",be).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$e).getRegex(),yr={...gt,lheading:gr,table:Bt,paragraph:E(dt).replace("hr",be).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Bt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$e).getRegex()},wr={...gt,html:E(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ft).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:pe,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:E(dt).replace("hr",be).replace("heading",` *#{1,6} *[^
]`).replace("lheading",dn).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Er=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Sr=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,fn=/^( {2,}|\\)\n(?!\s*$)/,Cr=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ze=/[\p{P}\p{S}]/u,mt=/[\s\p{P}\p{S}]/u,gn=/[^\s\p{P}\p{S}]/u,Tr=E(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,mt).getRegex(),mn=/(?!~)[\p{P}\p{S}]/u,_r=/(?!~)[\s\p{P}\p{S}]/u,Rr=/(?:[^\s\p{P}\p{S}]|~)/u,Nr=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,xn=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,jr=E(xn,"u").replace(/punct/g,ze).getRegex(),Ar=E(xn,"u").replace(/punct/g,mn).getRegex(),bn="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Or=E(bn,"gu").replace(/notPunctSpace/g,gn).replace(/punctSpace/g,mt).replace(/punct/g,ze).getRegex(),Ir=E(bn,"gu").replace(/notPunctSpace/g,Rr).replace(/punctSpace/g,_r).replace(/punct/g,mn).getRegex(),Pr=E("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,gn).replace(/punctSpace/g,mt).replace(/punct/g,ze).getRegex(),Lr=E(/\\(punct)/,"gu").replace(/punct/g,ze).getRegex(),Mr=E(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Dr=E(ft).replace("(?:-->|$)","-->").getRegex(),$r=E("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Dr).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ae=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,zr=E(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ae).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),kn=E(/^!?\[(label)\]\[(ref)\]/).replace("label",Ae).replace("ref",pt).getRegex(),vn=E(/^!?\[(ref)\](?:\[\])?/).replace("ref",pt).getRegex(),Br=E("reflink|nolink(?!\\()","g").replace("reflink",kn).replace("nolink",vn).getRegex(),xt={_backpedal:pe,anyPunctuation:Lr,autolink:Mr,blockSkip:Nr,br:fn,code:Sr,del:pe,emStrongLDelim:jr,emStrongRDelimAst:Or,emStrongRDelimUnd:Pr,escape:Er,link:zr,nolink:vn,punctuation:Tr,reflink:kn,reflinkSearch:Br,tag:$r,text:Cr,url:pe},Fr={...xt,link:E(/^!?\[(label)\]\((.*?)\)/).replace("label",Ae).getRegex(),reflink:E(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ae).getRegex()},tt={...xt,emStrongRDelimAst:Ir,emStrongLDelim:Ar,url:E(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Hr={...tt,br:E(fn).replace("{2,}","*").getRegex(),text:E(tt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ee={normal:gt,gfm:yr,pedantic:wr},ce={normal:xt,gfm:tt,breaks:Hr,pedantic:Fr},Ur={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ft=t=>Ur[t];function H(t,e){if(e){if(L.escapeTest.test(t))return t.replace(L.escapeReplace,Ft)}else if(L.escapeTestNoEncode.test(t))return t.replace(L.escapeReplaceNoEncode,Ft);return t}function Ht(t){try{t=encodeURI(t).replace(L.percentDecode,"%")}catch{return null}return t}function Ut(t,e){var s;const n=t.replace(L.findPipe,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(L.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(L.slashPipe,"|");return r}function ue(t,e,n){const r=t.length;if(r===0)return"";let i=0;for(;i<r&&t.charAt(r-i-1)===e;)i++;return t.slice(0,r-i)}function Gr(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}function Gt(t,e,n,r,i){const s=e.href,o=e.title||null,a=t[1].replace(i.other.outputLinkReplace,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:n,href:s,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:n,href:s,title:o,text:a}}function Vr(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const i=r[1];return e.split(`
`).map(s=>{const o=s.match(n.other.beginningSpace);if(o===null)return s;const[a]=o;return a.length>=i.length?s.slice(i.length):s}).join(`
`)}class Oe{constructor(e){C(this,"options");C(this,"rules");C(this,"lexer");this.options=e||ee}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ue(r,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const r=n[0],i=Vr(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){const i=ue(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:ue(n[0],`
`)}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let r=ue(n[0],`
`).split(`
`),i="",s="";const o=[];for(;r.length>0;){let a=!1;const l=[];let c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))l.push(r[c]),a=!0;else if(!a)l.push(r[c]);else break;r=r.slice(c);const u=l.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${u}`:u,s=s?`${s}
${d}`:d;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,o,!0),this.lexer.state.top=f,r.length===0)break;const m=o.at(-1);if((m==null?void 0:m.type)==="code")break;if((m==null?void 0:m.type)==="blockquote"){const g=m,p=g.raw+`
`+r.join(`
`),x=this.blockquote(p);o[o.length-1]=x,i=i.substring(0,i.length-g.raw.length)+x.raw,s=s.substring(0,s.length-g.text.length)+x.text;break}else if((m==null?void 0:m.type)==="list"){const g=m,p=g.raw+`
`+r.join(`
`),x=this.list(p);o[o.length-1]=x,i=i.substring(0,i.length-m.raw.length)+x.raw,s=s.substring(0,s.length-g.raw.length)+x.raw,r=p.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:s}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const o=this.rules.other.listItemRegex(r);let a=!1;for(;e;){let c=!1,u="",d="";if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;u=n[0],e=e.substring(u.length);let f=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,I=>" ".repeat(3*I.length)),m=e.split(`
`,1)[0],g=!f.trim(),p=0;if(this.options.pedantic?(p=2,d=f.trimStart()):g?p=n[1].length+1:(p=n[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,d=f.slice(p),p+=n[1].length),g&&this.rules.other.blankLine.test(m)&&(u+=m+`
`,e=e.substring(m.length+1),c=!0),!c){const I=this.rules.other.nextBulletRegex(p),P=this.rules.other.hrRegex(p),U=this.rules.other.fencesBeginRegex(p),ne=this.rules.other.headingBeginRegex(p),ae=this.rules.other.htmlBeginRegex(p);for(;e;){const F=e.split(`
`,1)[0];let G;if(m=F,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),G=m):G=m.replace(this.rules.other.tabCharGlobal,"    "),U.test(m)||ne.test(m)||ae.test(m)||I.test(m)||P.test(m))break;if(G.search(this.rules.other.nonSpaceChar)>=p||!m.trim())d+=`
`+G.slice(p);else{if(g||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||U.test(f)||ne.test(f)||P.test(f))break;d+=`
`+m}!g&&!m.trim()&&(g=!0),u+=F+`
`,e=e.substring(F.length+1),f=G.slice(p)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(a=!0));let x=null,T;this.options.gfm&&(x=this.rules.other.listIsTask.exec(d),x&&(T=x[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:u,task:!!x,checked:T,loose:!1,text:d,tokens:[]}),s.raw+=u}const l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){const u=s.items[c].tokens.filter(f=>f.type==="space"),d=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));s.loose=d}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:s}}}table(e){var a;const n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;const r=Ut(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(a=n[3])!=null&&a.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const l of i)this.rules.other.tableAlignRight.test(l)?o.align.push("right"):this.rules.other.tableAlignCenter.test(l)?o.align.push("center"):this.rules.other.tableAlignLeft.test(l)?o.align.push("left"):o.align.push(null);for(let l=0;l<r.length;l++)o.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:o.align[l]});for(const l of s)o.rows.push(Ut(l,o.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:o.align[u]})));return o}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const o=ue(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=Gr(n[2],"()");if(o>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let i=n[2],s="";if(this.options.pedantic){const o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),Gt(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=n[i.toLowerCase()];if(!s){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return Gt(r,s,r[0],this.lexer,this.rules)}}emStrong(e,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const o=[...i[0]].length-1;let a,l,c=o,u=0;const d=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,n=n.slice(-1*e.length+o);(i=d.exec(n))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const f=[...i[0]][0].length,m=e.slice(0,o+i.index+f+l);if(Math.min(o,l)%2){const p=m.slice(1,-1);return{type:"em",raw:m,text:p,tokens:this.lexer.inlineTokens(p)}}const g=m.slice(2,-2);return{type:"strong",raw:m,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let r,i;return n[2]==="@"?(r=n[1],i="mailto:"+r):(r=n[1],i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let n;if(n=this.rules.inline.url.exec(e)){let i,s;if(n[2]==="@")i=n[0],s="mailto:"+i;else{let o;do o=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(o!==n[0]);i=n[0],n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){const r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}}class ${constructor(e){C(this,"tokens");C(this,"options");C(this,"state");C(this,"tokenizer");C(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ee,this.options.tokenizer=this.options.tokenizer||new Oe,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:L,block:Ee.normal,inline:ce.normal};this.options.pedantic?(n.block=Ee.pedantic,n.inline=ce.pedantic):this.options.gfm&&(n.block=Ee.gfm,this.options.breaks?n.inline=ce.breaks:n.inline=ce.gfm),this.tokenizer.rules=n}static get rules(){return{block:Ee,inline:ce}}static lex(e,n){return new $(n).lex(e)}static lexInline(e,n){return new $(n).inlineTokens(e)}lex(e){e=e.replace(L.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var i,s,o;for(this.options.pedantic&&(e=e.replace(L.tabCharGlobal,"    ").replace(L.spaceLine,""));e;){let a;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(c=>(a=c.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let l=e;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0;const u=e.slice(1);let d;this.options.extensions.startBlock.forEach(f=>{d=f.call({lexer:this},u),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var a,l,c;let r=e,i=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s=!1,o="";for(;e;){s||(o=""),s=!1;let u;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(f=>(u=f.call({lexer:this},e,n))?(e=e.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);const f=n.at(-1);u.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(e,r,o)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),n.push(u);continue}let d=e;if((c=this.options.extensions)!=null&&c.startInline){let f=1/0;const m=e.slice(1);let g;this.options.extensions.startInline.forEach(p=>{g=p.call({lexer:this},m),typeof g=="number"&&g>=0&&(f=Math.min(f,g))}),f<1/0&&f>=0&&(d=e.substring(0,f+1))}if(u=this.tokenizer.inlineText(d)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),s=!0;const f=n.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):n.push(u);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return n}}class Ie{constructor(e){C(this,"options");C(this,"parser");this.options=e||ee}space(e){return""}code({text:e,lang:n,escaped:r}){var o;const i=(o=(n||"").match(L.notSpaceStart))==null?void 0:o[0],s=e.replace(L.endingNewline,"")+`
`;return i?'<pre><code class="language-'+H(i)+'">'+(r?s:H(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:H(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){const n=e.ordered,r=e.start;let i="";for(let a=0;a<e.items.length;a++){const l=e.items[a];i+=this.listitem(l)}const s=n?"ol":"ul",o=n&&r!==1?' start="'+r+'"':"";return"<"+s+o+`>
`+i+"</"+s+`>
`}listitem(e){var r;let n="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+H(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):n+=i+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);n+=this.tablerow({text:r});let i="";for(let s=0;s<e.rows.length;s++){const o=e.rows[s];r="";for(let a=0;a<o.length;a++)r+=this.tablecell(o[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${H(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){const i=this.parser.parseInline(r),s=Ht(e);if(s===null)return i;e=s;let o='<a href="'+e+'"';return n&&(o+=' title="'+H(n)+'"'),o+=">"+i+"</a>",o}image({href:e,title:n,text:r}){const i=Ht(e);if(i===null)return H(r);e=i;let s=`<img src="${e}" alt="${r}"`;return n&&(s+=` title="${H(n)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:H(e.text)}}class bt{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class z{constructor(e){C(this,"options");C(this,"renderer");C(this,"textRenderer");this.options=e||ee,this.options.renderer=this.options.renderer||new Ie,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new bt}static parse(e,n){return new z(n).parse(e)}static parseInline(e,n){return new z(n).parseInline(e)}parse(e,n=!0){var i,s;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){const c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){r+=u||"";continue}}const l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<e.length&&e[o+1].type==="text";)c=e[++o],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,n=this.renderer){var i,s;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){const c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}const l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}}class fe{constructor(e){C(this,"options");C(this,"block");this.options=e||ee}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?$.lex:$.lexInline}provideParser(){return this.block?z.parse:z.parseInline}}C(fe,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class qr{constructor(...e){C(this,"defaults",ut());C(this,"options",this.setOptions);C(this,"parse",this.parseMarkdown(!0));C(this,"parseInline",this.parseMarkdown(!1));C(this,"Parser",z);C(this,"Renderer",Ie);C(this,"TextRenderer",bt);C(this,"Lexer",$);C(this,"Tokenizer",Oe);C(this,"Hooks",fe);this.use(...e)}walkTokens(e,n){var i,s;let r=[];for(const o of e)switch(r=r.concat(n.call(this,o)),o.type){case"table":{const a=o;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,n));for(const l of a.rows)for(const c of l)r=r.concat(this.walkTokens(c.tokens,n));break}case"list":{const a=o;r=r.concat(this.walkTokens(a.items,n));break}default:{const a=o;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const c=a[l].flat(1/0);r=r.concat(this.walkTokens(c,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=n.renderers[s.name];o?n.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=n[s.level];o?o.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),i.extensions=n),r.renderer){const s=this.defaults.renderer||new Ie(this.defaults);for(const o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o,l=r.renderer[a],c=s[a];s[a]=(...u)=>{let d=l.apply(s,u);return d===!1&&(d=c.apply(s,u)),d||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new Oe(this.defaults);for(const o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,l=r.tokenizer[a],c=s[a];s[a]=(...u)=>{let d=l.apply(s,u);return d===!1&&(d=c.apply(s,u)),d}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new fe;for(const o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;const a=o,l=r.hooks[a],c=s[a];fe.passThroughHooks.has(o)?s[a]=u=>{if(this.defaults.async)return Promise.resolve(l.call(s,u)).then(f=>c.call(s,f));const d=l.call(s,u);return c.call(s,d)}:s[a]=(...u)=>{let d=l.apply(s,u);return d===!1&&(d=c.apply(s,u)),d}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return $.lex(e,n??this.defaults)}parser(e,n){return z.parse(e,n??this.defaults)}parseMarkdown(e){return(r,i)=>{const s={...i},o={...this.defaults,...s},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&s.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);const l=o.hooks?o.hooks.provideLexer():e?$.lex:$.lexInline,c=o.hooks?o.hooks.provideParser():e?z.parse:z.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(u=>l(u,o)).then(u=>o.hooks?o.hooks.processAllTokens(u):u).then(u=>o.walkTokens?Promise.all(this.walkTokens(u,o.walkTokens)).then(()=>u):u).then(u=>c(u,o)).then(u=>o.hooks?o.hooks.postprocess(u):u).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let u=l(r,o);o.hooks&&(u=o.hooks.processAllTokens(u)),o.walkTokens&&this.walkTokens(u,o.walkTokens);let d=c(u,o);return o.hooks&&(d=o.hooks.postprocess(d)),d}catch(u){return a(u)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+H(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}}}const K=new qr;function S(t,e){return K.parse(t,e)}S.options=S.setOptions=function(t){return K.setOptions(t),S.defaults=K.defaults,un(S.defaults),S};S.getDefaults=ut;S.defaults=ee;S.use=function(...t){return K.use(...t),S.defaults=K.defaults,un(S.defaults),S};S.walkTokens=function(t,e){return K.walkTokens(t,e)};S.parseInline=K.parseInline;S.Parser=z;S.parser=z.parse;S.Renderer=Ie;S.TextRenderer=bt;S.Lexer=$;S.lexer=$.lex;S.Tokenizer=Oe;S.Hooks=fe;S.parse=S;S.options;S.setOptions;S.use;S.walkTokens;S.parseInline;z.parse;$.lex;var yn={},kt={},vt={},te={},yt={},wt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0;var e;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(e=t.ElementType||(t.ElementType={}));function n(r){return r.type===e.Tag||r.type===e.Script||r.type===e.Style}t.isTag=n,t.Root=e.Root,t.Text=e.Text,t.Directive=e.Directive,t.Comment=e.Comment,t.Script=e.Script,t.Style=e.Style,t.Tag=e.Tag,t.CDATA=e.CDATA,t.Doctype=e.Doctype})(wt);var w={},W=R&&R.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ge=R&&R.__assign||function(){return ge=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ge.apply(this,arguments)};Object.defineProperty(w,"__esModule",{value:!0});w.cloneNode=w.hasChildren=w.isDocument=w.isDirective=w.isComment=w.isText=w.isCDATA=w.isTag=w.Element=w.Document=w.CDATA=w.NodeWithChildren=w.ProcessingInstruction=w.Comment=w.Text=w.DataNode=w.Node=void 0;var D=wt,Et=function(){function t(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(e){return e===void 0&&(e=!1),St(this,e)},t}();w.Node=Et;var Be=function(t){W(e,t);function e(n){var r=t.call(this)||this;return r.data=n,r}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),e}(Et);w.DataNode=Be;var wn=function(t){W(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=D.ElementType.Text,n}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),e}(Be);w.Text=wn;var En=function(t){W(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=D.ElementType.Comment,n}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),e}(Be);w.Comment=En;var Sn=function(t){W(e,t);function e(n,r){var i=t.call(this,r)||this;return i.name=n,i.type=D.ElementType.Directive,i}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(Be);w.ProcessingInstruction=Sn;var Fe=function(t){W(e,t);function e(n){var r=t.call(this)||this;return r.children=n,r}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),e}(Et);w.NodeWithChildren=Fe;var Cn=function(t){W(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=D.ElementType.CDATA,n}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),e}(Fe);w.CDATA=Cn;var Tn=function(t){W(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=D.ElementType.Root,n}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),e}(Fe);w.Document=Tn;var _n=function(t){W(e,t);function e(n,r,i,s){i===void 0&&(i=[]),s===void 0&&(s=n==="script"?D.ElementType.Script:n==="style"?D.ElementType.Style:D.ElementType.Tag);var o=t.call(this,i)||this;return o.name=n,o.attribs=r,o.type=s,o}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var i,s;return{name:r,value:n.attribs[r],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[r],prefix:(s=n["x-attribsPrefix"])===null||s===void 0?void 0:s[r]}})},enumerable:!1,configurable:!0}),e}(Fe);w.Element=_n;function Rn(t){return(0,D.isTag)(t)}w.isTag=Rn;function Nn(t){return t.type===D.ElementType.CDATA}w.isCDATA=Nn;function jn(t){return t.type===D.ElementType.Text}w.isText=jn;function An(t){return t.type===D.ElementType.Comment}w.isComment=An;function On(t){return t.type===D.ElementType.Directive}w.isDirective=On;function In(t){return t.type===D.ElementType.Root}w.isDocument=In;function Wr(t){return Object.prototype.hasOwnProperty.call(t,"children")}w.hasChildren=Wr;function St(t,e){e===void 0&&(e=!1);var n;if(jn(t))n=new wn(t.data);else if(An(t))n=new En(t.data);else if(Rn(t)){var r=e?Je(t.children):[],i=new _n(t.name,ge({},t.attribs),r);r.forEach(function(l){return l.parent=i}),t.namespace!=null&&(i.namespace=t.namespace),t["x-attribsNamespace"]&&(i["x-attribsNamespace"]=ge({},t["x-attribsNamespace"])),t["x-attribsPrefix"]&&(i["x-attribsPrefix"]=ge({},t["x-attribsPrefix"])),n=i}else if(Nn(t)){var r=e?Je(t.children):[],s=new Cn(r);r.forEach(function(c){return c.parent=s}),n=s}else if(In(t)){var r=e?Je(t.children):[],o=new Tn(r);r.forEach(function(c){return c.parent=o}),t["x-mode"]&&(o["x-mode"]=t["x-mode"]),n=o}else if(On(t)){var a=new Sn(t.name,t.data);t["x-name"]!=null&&(a["x-name"]=t["x-name"],a["x-publicId"]=t["x-publicId"],a["x-systemId"]=t["x-systemId"]),n=a}else throw new Error("Not implemented yet: ".concat(t.type));return n.startIndex=t.startIndex,n.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(n.sourceCodeLocation=t.sourceCodeLocation),n}w.cloneNode=St;function Je(t){for(var e=t.map(function(r){return St(r,!0)}),n=1;n<e.length;n++)e[n].prev=e[n-1],e[n-1].next=e[n];return e}(function(t){var e=R&&R.__createBinding||(Object.create?function(a,l,c,u){u===void 0&&(u=c);var d=Object.getOwnPropertyDescriptor(l,c);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(a,u,d)}:function(a,l,c,u){u===void 0&&(u=c),a[u]=l[c]}),n=R&&R.__exportStar||function(a,l){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&e(l,a,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var r=wt,i=w;n(w,t);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=function(){function a(l,c,u){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof c=="function"&&(u=c,c=s),typeof l=="object"&&(c=l,l=void 0),this.callback=l??null,this.options=c??s,this.elementCB=u??null}return a.prototype.onparserinit=function(l){this.parser=l},a.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},a.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},a.prototype.onerror=function(l){this.handleCallback(l)},a.prototype.onclosetag=function(){this.lastNode=null;var l=this.tagStack.pop();this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(l)},a.prototype.onopentag=function(l,c){var u=this.options.xmlMode?r.ElementType.Tag:void 0,d=new i.Element(l,c,void 0,u);this.addNode(d),this.tagStack.push(d)},a.prototype.ontext=function(l){var c=this.lastNode;if(c&&c.type===r.ElementType.Text)c.data+=l,this.options.withEndIndices&&(c.endIndex=this.parser.endIndex);else{var u=new i.Text(l);this.addNode(u),this.lastNode=u}},a.prototype.oncomment=function(l){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=l;return}var c=new i.Comment(l);this.addNode(c),this.lastNode=c},a.prototype.oncommentend=function(){this.lastNode=null},a.prototype.oncdatastart=function(){var l=new i.Text(""),c=new i.CDATA([l]);this.addNode(c),l.parent=c,this.lastNode=l},a.prototype.oncdataend=function(){this.lastNode=null},a.prototype.onprocessinginstruction=function(l,c){var u=new i.ProcessingInstruction(l,c);this.addNode(u)},a.prototype.handleCallback=function(l){if(typeof this.callback=="function")this.callback(l,this.dom);else if(l)throw l},a.prototype.addNode=function(l){var c=this.tagStack[this.tagStack.length-1],u=c.children[c.children.length-1];this.options.withStartIndices&&(l.startIndex=this.parser.startIndex),this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),c.children.push(l),u&&(l.prev=u,u.next=l),l.parent=c,this.lastNode=null},a}();t.DomHandler=o,t.default=o})(yt);var Pn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CARRIAGE_RETURN_PLACEHOLDER_REGEX=t.CARRIAGE_RETURN_PLACEHOLDER=t.CARRIAGE_RETURN_REGEX=t.CARRIAGE_RETURN=t.CASE_SENSITIVE_TAG_NAMES_MAP=t.CASE_SENSITIVE_TAG_NAMES=void 0,t.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],t.CASE_SENSITIVE_TAG_NAMES_MAP=t.CASE_SENSITIVE_TAG_NAMES.reduce(function(e,n){return e[n.toLowerCase()]=n,e},{}),t.CARRIAGE_RETURN="\r",t.CARRIAGE_RETURN_REGEX=new RegExp(t.CARRIAGE_RETURN,"g"),t.CARRIAGE_RETURN_PLACEHOLDER="__HTML_DOM_PARSER_CARRIAGE_RETURN_PLACEHOLDER_".concat(Date.now(),"__"),t.CARRIAGE_RETURN_PLACEHOLDER_REGEX=new RegExp(t.CARRIAGE_RETURN_PLACEHOLDER,"g")})(Pn);Object.defineProperty(te,"__esModule",{value:!0});te.formatAttributes=Ln;te.escapeSpecialCharacters=Yr;te.revertEscapedCharacters=Mn;te.formatDOM=Dn;var Se=yt,xe=Pn;function Xr(t){return xe.CASE_SENSITIVE_TAG_NAMES_MAP[t]}function Ln(t){for(var e={},n=0,r=t.length;n<r;n++){var i=t[n];e[i.name]=i.value}return e}function Zr(t){t=t.toLowerCase();var e=Xr(t);return e||t}function Yr(t){return t.replace(xe.CARRIAGE_RETURN_REGEX,xe.CARRIAGE_RETURN_PLACEHOLDER)}function Mn(t){return t.replace(xe.CARRIAGE_RETURN_PLACEHOLDER_REGEX,xe.CARRIAGE_RETURN)}function Dn(t,e,n){e===void 0&&(e=null);for(var r=[],i,s=0,o=t.length;s<o;s++){var a=t[s];switch(a.nodeType){case 1:{var l=Zr(a.nodeName);i=new Se.Element(l,Ln(a.attributes)),i.children=Dn(l==="template"?a.content.childNodes:a.childNodes,i);break}case 3:i=new Se.Text(Mn(a.nodeValue));break;case 8:i=new Se.Comment(a.nodeValue);break;default:continue}var c=r[s-1]||null;c&&(c.next=i),i.parent=e,i.prev=c,i.next=null,r.push(i)}return n&&(i=new Se.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),i.next=r[0]||null,i.parent=e,r.unshift(i),r[1]&&(r[1].prev=r[0])),r}Object.defineProperty(vt,"__esModule",{value:!0});vt.default=ti;var Qr=te,Vt="html",qt="head",Ce="body",Jr=/<([a-zA-Z]+[0-9]?)/,Wt=/<head[^]*>/i,Xt=/<body[^]*>/i,Pe=function(t,e){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},nt=function(t,e){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},Zt=typeof window=="object"&&window.DOMParser;if(typeof Zt=="function"){var Kr=new Zt,ei="text/html";nt=function(t,e){return e&&(t="<".concat(e,">").concat(t,"</").concat(e,">")),Kr.parseFromString(t,ei)},Pe=nt}if(typeof document=="object"&&document.implementation){var Te=document.implementation.createHTMLDocument();Pe=function(t,e){if(e){var n=Te.documentElement.querySelector(e);return n&&(n.innerHTML=t),Te}return Te.documentElement.innerHTML=t,Te}}var _e=typeof document=="object"&&document.createElement("template"),rt;_e&&_e.content&&(rt=function(t){return _e.innerHTML=t,_e.content.childNodes});function ti(t){var e,n;t=(0,Qr.escapeSpecialCharacters)(t);var r=t.match(Jr),i=r&&r[1]?r[1].toLowerCase():"";switch(i){case Vt:{var s=nt(t);if(!Wt.test(t)){var o=s.querySelector(qt);(e=o==null?void 0:o.parentNode)===null||e===void 0||e.removeChild(o)}if(!Xt.test(t)){var o=s.querySelector(Ce);(n=o==null?void 0:o.parentNode)===null||n===void 0||n.removeChild(o)}return s.querySelectorAll(Vt)}case qt:case Ce:{var a=Pe(t).querySelectorAll(i);return Xt.test(t)&&Wt.test(t)?a[0].parentNode.childNodes:a}default:{if(rt)return rt(t);var o=Pe(t,Ce).querySelector(Ce);return o.childNodes}}}var ni=R&&R.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kt,"__esModule",{value:!0});kt.default=ai;var ri=ni(vt),ii=te,si=/<(![a-zA-Z\s]+)>/;function ai(t){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];var e=t.match(si),n=e?e[1]:void 0;return(0,ii.formatDOM)((0,ri.default)(t),null,n)}var He={},B={},Ue={},oi=0;Ue.SAME=oi;var li=1;Ue.CAMELCASE=li;Ue.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const $n=0,X=1,Ge=2,Ve=3,Ct=4,zn=5,Bn=6;function ci(t){return O.hasOwnProperty(t)?O[t]:null}function M(t,e,n,r,i,s,o){this.acceptsBooleans=e===Ge||e===Ve||e===Ct,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}const O={},ui=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];ui.forEach(t=>{O[t]=new M(t,$n,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([t,e])=>{O[t]=new M(t,X,!1,e,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(t=>{O[t]=new M(t,Ge,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(t=>{O[t]=new M(t,Ge,!1,t,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(t=>{O[t]=new M(t,Ve,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(t=>{O[t]=new M(t,Ve,!0,t,null,!1,!1)});["capture","download"].forEach(t=>{O[t]=new M(t,Ct,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(t=>{O[t]=new M(t,Bn,!1,t,null,!1,!1)});["rowSpan","start"].forEach(t=>{O[t]=new M(t,zn,!1,t.toLowerCase(),null,!1,!1)});const Tt=/[\-\:]([a-z])/g,_t=t=>t[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(t=>{const e=t.replace(Tt,_t);O[e]=new M(e,X,!1,t,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(t=>{const e=t.replace(Tt,_t);O[e]=new M(e,X,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(t=>{const e=t.replace(Tt,_t);O[e]=new M(e,X,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(t=>{O[t]=new M(t,X,!1,t.toLowerCase(),null,!1,!1)});const hi="xlinkHref";O[hi]=new M("xlinkHref",X,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(t=>{O[t]=new M(t,X,!1,t.toLowerCase(),null,!0,!0)});const{CAMELCASE:di,SAME:pi,possibleStandardNames:Yt}=Ue,fi=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",gi=fi+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",mi=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+gi+"]*$")),xi=Object.keys(Yt).reduce((t,e)=>{const n=Yt[e];return n===pi?t[e]=e:n===di?t[e.toLowerCase()]=e:t[e]=n,t},{});B.BOOLEAN=Ve;B.BOOLEANISH_STRING=Ge;B.NUMERIC=zn;B.OVERLOADED_BOOLEAN=Ct;B.POSITIVE_NUMERIC=Bn;B.RESERVED=$n;B.STRING=X;B.getPropertyInfo=ci;B.isCustomAttribute=mi;B.possibleStandardNames=xi;var Rt={},Nt={},Qt=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,bi=/\n/g,ki=/^\s*/,vi=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,yi=/^:\s*/,wi=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Ei=/^[;\s]*/,Si=/^\s+|\s+$/g,Ci=`
`,Jt="/",Kt="*",Q="",Ti="comment",_i="declaration",Ri=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(g){var p=g.match(bi);p&&(n+=p.length);var x=g.lastIndexOf(Ci);r=~x?g.length-x:r+g.length}function s(){var g={line:n,column:r};return function(p){return p.position=new o(g),c(),p}}function o(g){this.start=g,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(g){var p=new Error(e.source+":"+n+":"+r+": "+g);if(p.reason=g,p.filename=e.source,p.line=n,p.column=r,p.source=t,!e.silent)throw p}function l(g){var p=g.exec(t);if(p){var x=p[0];return i(x),t=t.slice(x.length),p}}function c(){l(ki)}function u(g){var p;for(g=g||[];p=d();)p!==!1&&g.push(p);return g}function d(){var g=s();if(!(Jt!=t.charAt(0)||Kt!=t.charAt(1))){for(var p=2;Q!=t.charAt(p)&&(Kt!=t.charAt(p)||Jt!=t.charAt(p+1));)++p;if(p+=2,Q===t.charAt(p-1))return a("End of comment missing");var x=t.slice(2,p-2);return r+=2,i(x),t=t.slice(p),r+=2,g({type:Ti,comment:x})}}function f(){var g=s(),p=l(vi);if(p){if(d(),!l(yi))return a("property missing ':'");var x=l(wi),T=g({type:_i,property:en(p[0].replace(Qt,Q)),value:x?en(x[0].replace(Qt,Q)):Q});return l(Ei),T}}function m(){var g=[];u(g);for(var p;p=f();)p!==!1&&(g.push(p),u(g));return g}return c(),m()};function en(t){return t?t.replace(Si,Q):Q}var Ni=R&&R.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.default=Ai;var ji=Ni(Ri);function Ai(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,ji.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.camelCase=void 0;var Oi=/^--[a-zA-Z0-9_-]+$/,Ii=/-([a-z])/g,Pi=/^[^-]+$/,Li=/^-(webkit|moz|ms|o|khtml)-/,Mi=/^-(ms)-/,Di=function(t){return!t||Pi.test(t)||Oi.test(t)},$i=function(t,e){return e.toUpperCase()},tn=function(t,e){return"".concat(e,"-")},zi=function(t,e){return e===void 0&&(e={}),Di(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(Mi,tn):t=t.replace(Li,tn),t.replace(Ii,$i))};qe.camelCase=zi;var Bi=R&&R.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Fi=Bi(Nt),Hi=qe;function it(t,e){var n={};return!t||typeof t!="string"||(0,Fi.default)(t,function(r,i){r&&i&&(n[(0,Hi.camelCase)(r,e)]=i)}),n}it.default=it;var Ui=it;(function(t){var e=R&&R.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.returnFirstArg=t.canTextBeChildOfNode=t.ELEMENTS_WITH_NO_TEXT_CHILDREN=t.PRESERVE_CUSTOM_ATTRIBUTES=void 0,t.isCustomComponent=s,t.setStyleProp=a;var n=v,r=e(Ui),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function s(u,d){return u.includes("-")?!i.has(u):!!(d&&typeof d.is=="string")}var o={reactCompat:!0};function a(u,d){if(typeof u=="string"){if(!u.trim()){d.style={};return}try{d.style=(0,r.default)(u,o)}catch{d.style={}}}}t.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,t.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var l=function(u){return!t.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(u.name)};t.canTextBeChildOfNode=l;var c=function(u){return u};t.returnFirstArg=c})(Rt);Object.defineProperty(He,"__esModule",{value:!0});He.default=Wi;var he=B,nn=Rt,Gi=["checked","value"],Vi=["input","select","textarea"],qi={reset:!0,submit:!0};function Wi(t,e){t===void 0&&(t={});var n={},r=!!(t.type&&qi[t.type]);for(var i in t){var s=t[i];if((0,he.isCustomAttribute)(i)){n[i]=s;continue}var o=i.toLowerCase(),a=rn(o);if(a){var l=(0,he.getPropertyInfo)(a);switch(Gi.includes(a)&&Vi.includes(e)&&!r&&(a=rn("default"+o)),n[a]=s,l&&l.type){case he.BOOLEAN:n[a]=!0;break;case he.OVERLOADED_BOOLEAN:s===""&&(n[a]=!0);break}continue}nn.PRESERVE_CUSTOM_ATTRIBUTES&&(n[i]=s)}return(0,nn.setStyleProp)(t.style,n),n}function rn(t){return he.possibleStandardNames[t]}var jt={},Xi=R&&R.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jt,"__esModule",{value:!0});jt.default=Fn;var Ke=v,Zi=Xi(He),me=Rt,Yi={cloneElement:Ke.cloneElement,createElement:Ke.createElement,isValidElement:Ke.isValidElement};function Fn(t,e){e===void 0&&(e={});for(var n=[],r=typeof e.replace=="function",i=e.transform||me.returnFirstArg,s=e.library||Yi,o=s.cloneElement,a=s.createElement,l=s.isValidElement,c=t.length,u=0;u<c;u++){var d=t[u];if(r){var f=e.replace(d,u);if(l(f)){c>1&&(f=o(f,{key:f.key||u})),n.push(i(f,d,u));continue}}if(d.type==="text"){var m=!d.data.trim().length;if(m&&d.parent&&!(0,me.canTextBeChildOfNode)(d.parent)||e.trim&&m)continue;n.push(i(d.data,d,u));continue}var g=d,p={};Qi(g)?((0,me.setStyleProp)(g.attribs.style,g.attribs),p=g.attribs):g.attribs&&(p=(0,Zi.default)(g.attribs,g.name));var x=void 0;switch(d.type){case"script":case"style":d.children[0]&&(p.dangerouslySetInnerHTML={__html:d.children[0].data});break;case"tag":d.name==="textarea"&&d.children[0]?p.defaultValue=d.children[0].data:d.children&&d.children.length&&(x=Fn(d.children,e));break;default:continue}c>1&&(p.key=u),n.push(i(a(d.name,p,x),d,u))}return n.length===1?n[0]:n}function Qi(t){return me.PRESERVE_CUSTOM_ATTRIBUTES&&t.type==="tag"&&(0,me.isCustomComponent)(t.name,t.attribs)}(function(t){var e=R&&R.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.htmlToDOM=t.domToReact=t.attributesToProps=t.Text=t.ProcessingInstruction=t.Element=t.Comment=void 0,t.default=a;var n=e(kt);t.htmlToDOM=n.default;var r=e(He);t.attributesToProps=r.default;var i=e(jt);t.domToReact=i.default;var s=yt;Object.defineProperty(t,"Comment",{enumerable:!0,get:function(){return s.Comment}}),Object.defineProperty(t,"Element",{enumerable:!0,get:function(){return s.Element}}),Object.defineProperty(t,"ProcessingInstruction",{enumerable:!0,get:function(){return s.ProcessingInstruction}}),Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return s.Text}});var o={lowerCaseAttributeNames:!1};function a(l,c){if(typeof l!="string")throw new TypeError("First argument must be a string");return l?(0,i.default)((0,n.default)(l,(c==null?void 0:c.htmlparser2)||o),c):[]}})(yn);const sn=Jn(yn),Ji=sn.default||sn,Ki=({children:t,className:e=""})=>{const n=s=>[/<!DOCTYPE\s+html>/i,/<html[\s>]/i,/<head[\s>]/i,/<body[\s>]/i,/<\/[a-z]+>/i].some(a=>a.test(s));let r=t.replace(/\n\s*\n/g,`
`);n(r)&&!r.includes("```")&&(r=r.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const i=S(r);return h.jsx("div",{className:`
        prose prose-slate dark:prose-invert
        dark:prose-p:text-gray-300
        dark:prose-strong:text-gray-100
        dark:prose-headings:text-gray-100
        prose-a:text-blue-600 dark:prose-a:text-blue-400 hover:prose-a:text-blue-500 dark:hover:prose-a:text-blue-300
        [&_ul>li]:marker:text-black dark:[&_ul>li]:marker:text-gray-400
        prose-p:my-0.5
        [&_ul]:mt-[-1.875rem] [&_ul]:mb-[-2.75rem]
        [&_li>ul]:mt-[0.125rem]
        [&_ol]:mt-[-1.875rem] [&_ol]:mb-[-1.875rem]
        [&_ul+ol]:mt-[1.125rem]
        [&_ul_li+ol]:mt-[1.125rem]
        [&_li]:mt-[-28px]
        [&_ul_li_ol]:mt-[1rem] 
        [&_ul>li>ol]:mt-[0.5rem]
        prose-headings:my-1
        prose-pre:my-1
        prose-blockquote:my-1 dark:prose-blockquote:text-gray-300 dark:prose-blockquote:border-gray-700
        prose-hr:my-1
        [&>*:first-child]:!mt-0 
        [&>*:last-child]:!mb-[-30px]
        ${e}
      `,children:Ji(i)})},es=({content:t,isExpanded:e})=>{const n=v.useMemo(()=>{try{const i=t.trim().split(`
`).filter(s=>s.trim()).map(s=>s.split(",").map(o=>o.trim()));return e?i:i.slice(0,4)}catch{return[]}},[t,e]);return n.length?h.jsx("div",{className:"overflow-x-auto scrollbar-themed",children:h.jsx("table",{className:"min-w-full text-xs md:text-sm dark:text-gray-200",children:h.jsx("tbody",{children:n.map((r,i)=>h.jsx("tr",{className:`
                                ${i===0?"bg-gray-100 dark:bg-gray-700 font-medium":""}
                                ${i%2===1?"bg-gray-50 dark:bg-gray-800":""}
                            `,children:r.map((s,o)=>h.jsx("td",{className:"border border-gray-200 dark:border-gray-600 p-2 truncate max-w-[200px] dark:text-white",title:s,children:s},o))},i))})})}):h.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"No valid CSV content found"})},ts=({file:t,className:e,onDownload:n})=>{const[r,i]=v.useState(!1),[s,o]=v.useState(!1),a=v.useMemo(()=>{try{return atob(t.content)}catch{return"Unable to decode file content"}},[t.content]),l=t.name.toLowerCase().endsWith(".csv"),c=()=>{navigator.clipboard.writeText(a),o(!0),setTimeout(()=>o(!1),1e3)},u=()=>{n()};return h.jsx("div",{className:`mt-2 w-full max-w-sm md:max-w-md ${e}`,children:h.jsxs("div",{className:"relative",children:[h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg",children:[h.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("svg",{className:"w-4 h-4 mr-2 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),h.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 max-w-[250px] truncate",children:t.name})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:u,className:"p-1.5 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",title:"Download file",children:h.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),h.jsx("button",{onClick:c,className:`p-1.5 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-300 ${s?"scale-110":"scale-100"}`,title:s?"Copied!":"Copy content",children:s?h.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400 transition-all duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):h.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-300 transition-all duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),h.jsx("div",{className:`p-3 scrollbar-themed ${r?"overflow-auto max-h-[500px]":"overflow-hidden"}`,children:l?h.jsx(es,{content:a,isExpanded:r}):h.jsx("pre",{className:"font-mono text-xs md:text-sm text-gray-800 dark:text-gray-200",children:h.jsx("code",{children:r?a:a.split(`
`).slice(0,5).join(`
`)})})})]}),(!l&&a.split(`
`).length>5||l&&a.split(`
`).length>4)&&h.jsx("button",{onClick:()=>i(!r),className:"mt-2 text-xs md:text-sm text-solace-blue dark:text-solace-green hover:opacity-80 transition-opacity",children:r?"Show less":"Show more"})]})})},ns=({file:t})=>{var i,s;const e=(i=t.mime_type)==null?void 0:i.startsWith("image/"),n=((s=t.mime_type)==null?void 0:s.startsWith("text/"))||t.name.match(/\.(txt|json|csv|md|log)$/i),r=()=>{const o=new Blob([Uint8Array.from(atob(t.content),c=>c.charCodeAt(0))],{type:t.mime_type??"application/octet-stream"}),a=URL.createObjectURL(o),l=document.createElement("a");l.href=a,l.download=t.name,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)};return e?h.jsxs("div",{className:"w-full max-w-[85vw] md:max-w-md",children:[h.jsx("img",{src:`data:${t.mime_type};base64,${t.content}`,alt:t.name,className:"w-full h-auto object-contain rounded-lg shadow-md"}),h.jsx("div",{className:"mt-2",children:h.jsx(st,{filename:t.name,onDownload:r})})]}):n?h.jsx("div",{className:"w-full max-w-[80vw] md:max-w-md ",children:h.jsx(ts,{file:t,onDownload:r})}):h.jsx("div",{className:"w-full max-w-[80vw] md:max-w-md",children:h.jsx(st,{filename:t.name,onDownload:r})})},st=({filename:t,onDownload:e})=>h.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1.5 md:p-2 w-full max-w-[85vw] md:max-w-md",children:[h.jsxs("div",{className:"flex items-center gap-1 md:gap-2 flex-1 min-w-0",children:[h.jsx("div",{className:"bg-gray-200 dark:bg-gray-600 p-1.5 md:p-2 rounded flex-shrink-0",children:h.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),h.jsx("span",{className:"text-xs md:text-sm text-gray-700 dark:text-gray-300 truncate",children:t})]}),e&&h.jsx("button",{onClick:e,className:"flex-shrink-0 bg-solace-blue dark:bg-solace-green text-white px-2 md:px-3 py-1 rounded text-xs md:text-sm hover:opacity-80 transition-opacity",children:"Download"})]}),rs=v.memo(()=>h.jsxs("span",{className:"inline-flex items-center ml-2",children:[h.jsx("style",{children:`
        .loading-dot {
          opacity: 0.3;
          animation: loadingFade 1.2s ease-in-out infinite;
        }
        .loading-dot:nth-child(1) {
          animation-delay: 0s;
        }
        .loading-dot:nth-child(2) {
          animation-delay: 0.4s;
        }
        .loading-dot:nth-child(3) {
          animation-delay: 0.8s;
        }
        @keyframes loadingFade {
          0% {
            opacity: 0.3;
            transform: scale(0.8);
          }
          50% {
            opacity: 1;
            transform: scale(1);
          }
          100% {
            opacity: 0.3;
            transform: scale(0.8);
          }
        }
      `}),[...Array(3)].map((t,e)=>h.jsx("span",{className:"loading-dot w-1.5 h-1.5 mx-0.5 rounded-full bg-current inline-block"},e))]}));function is(t){return se({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(t)}function ss(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 56v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H24C10.745 32 0 42.745 0 56zm40 200c0-13.255 10.745-24 24-24s24 10.745 24 24-10.745 24-24 24-24-10.745-24-24zm272 256c-20.183 0-29.485-39.293-33.931-57.795-5.206-21.666-10.589-44.07-25.393-58.902-32.469-32.524-49.503-73.967-89.117-113.111a11.98 11.98 0 0 1-3.558-8.521V59.901c0-6.541 5.243-11.878 11.783-11.998 15.831-.29 36.694-9.079 52.651-16.178C256.189 17.598 295.709.017 343.995 0h2.844c42.777 0 93.363.413 113.774 29.737 8.392 12.057 10.446 27.034 6.148 44.632 16.312 17.053 25.063 48.863 16.382 74.757 17.544 23.432 19.143 56.132 9.308 79.469l.11.11c11.893 11.949 19.523 31.259 19.439 49.197-.156 30.352-26.157 58.098-59.553 58.098H350.723C358.03 364.34 384 388.132 384 430.548 384 504 336 512 312 512z"},child:[]}]})(t)}function as(t){return se({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"},child:[]}]})(t)}const Re=({messageId:t,messageText:e,metadata:n})=>{const[r,i]=v.useState(!1),[s,o]=v.useState(""),[a,l]=v.useState(!1),c=async(m,g)=>{try{let p=lt("csrf_token");if(p||(p=await ct()),!(await fetch("/api/v1/feedback",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p??""},body:JSON.stringify({messageId:n==null?void 0:n.messageId,sessionId:n==null?void 0:n.sessionId,isPositive:m,comment:g})})).ok)throw new Error("Failed to submit feedback")}catch(p){console.error("Error submitting feedback:",p)}},u=async m=>{m?(await c(!0),l(!0)):i(!0)},d=async()=>{s.trim()&&(await c(!1,s),i(!1),l(!0))},f=async()=>{await navigator.clipboard.writeText(e)};return a?h.jsx("div",{className:"text-sm text-gray-500 mt-1 italic",children:"Thanks for your feedback"}):h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[h.jsx("button",{onClick:()=>u(!0),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors duration-200",disabled:a,title:"Helpful",children:h.jsx(as,{className:"text-gray-400 hover:text-green-500 w-3.5 h-3.5"})}),h.jsx("button",{onClick:()=>u(!1),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors duration-200",disabled:a,title:"Not helpful",children:h.jsx(ss,{className:"text-gray-400 hover:text-red-500 w-3.5 h-3.5"})}),h.jsx("button",{onClick:f,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors duration-200",title:"Copy message",children:h.jsx(is,{className:"text-gray-400 hover:text-blue-500 w-3.5 h-3.5"})})]}),r&&h.jsx("div",{className:"flex flex-col gap-2 mt-1 animate-slideDown",children:h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:s,onChange:m=>o(m.target.value),className:`flex-1 px-3 py-1.5 text-sm border rounded-md min-w-[230px]
                dark:bg-gray-700 dark:border-gray-600 
                focus:outline-none focus:ring-1 focus:ring-solace-blue 
                dark:focus:ring-solace-green dark:text-white
                transition-all duration-200`,placeholder:"What went wrong? (optional)",onKeyDown:m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),d()),m.key==="Escape"&&i(!1)},autoFocus:!0}),h.jsx("button",{onClick:d,className:`px-3 py-1.5 bg-solace-blue text-white text-sm font-medium rounded-md 
                hover:bg-blue-600 transition-colors duration-200 dark:bg-solace-green`,children:"Send"}),h.jsx("button",{onClick:()=>i(!1),className:`px-3 py-1.5 bg-gray-200 text-gray-700 text-sm font-medium rounded-md 
                hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 
                transition-colors duration-200`,children:"Cancel"})]})})]})};function os({msg:t,idx:e,alreadyRendered:n}){var s,o;const{configCollectFeedback:r}=De(),i=a=>a.isUser?h.jsx("span",{children:a.text}):a.isStatusMessage?h.jsx("span",{children:a.text.split(" ").map((l,c,u)=>h.jsxs("span",{children:[l,c===u.length-1?h.jsx(rs,{}):" "]},`${l}-${c}`))}):h.jsx(Ki,{children:a.text});return h.jsx("div",{className:`my-4 flex ${t.isUser?"justify-end":"justify-start"}`,children:h.jsxs("div",{className:"relative",children:[h.jsxs("div",{className:`${t.isUser?"mr-3 flex flex-col items-end pb-4":"ml-3 flex flex-col items-start pb-4"}`,children:[((s=t.text)==null?void 0:s.trim())&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`p-3 rounded-lg whitespace-pre-wrap max-w-[85vw] sm:max-w-[70vw] ${t.isUser?"bg-solace-blue text-white dark:bg-solace-green ml-4 ":"bg-gray-200 dark:bg-gray-600 text-black dark:text-white"}`,children:i(t)}),r&&!t.isUser&&!t.isStatusMessage&&(t.metadata?h.jsx(Re,{messageId:e,messageText:t.text,metadata:t.metadata}):h.jsx(Re,{messageId:e,messageText:t.text}))]}),t.files&&t.files.length>0&&h.jsxs("div",{className:"mt-2 space-y-2 self-stretch",children:[t.files.map((a,l)=>h.jsx(ns,{file:a},`bot-file-${e}-${l}`)),!((o=t.text)!=null&&o.trim())&&r&&!t.isUser&&!t.isStatusMessage&&(t.metadata?h.jsx(Re,{messageId:e,messageText:t.text,metadata:t.metadata}):h.jsx(Re,{messageId:e,messageText:t.text}))]}),t.uploadedFiles&&t.uploadedFiles.length>0&&h.jsx("div",{className:"mt-2 space-y-2 self-stretch ml-4",children:t.uploadedFiles.map((a,l)=>h.jsx(st,{filename:a.name},`uploaded-file-${e}-${l}`))})]}),h.jsx("span",{className:`absolute -top-6 ${t.isUser?"right-[-20px]":"left-[-20px]"} w-8 h-8 flex items-center justify-center rounded-full ${t.isUser?"bg-gray-200 text-white dark:bg-gray-600":"bg-transparent dark:bg-transparent text-black dark:text-white"}`,children:t.isUser?"👤":h.jsx("img",{src:"solace_chat_icon.png",alt:"Bot Icon",style:{width:24,height:24}})})]})})}const ls=v.memo(os);function cs({messages:t,scrollToBottom:e,messagesEndRef:n}){const r=v.useRef(new Set),i=v.useMemo(()=>t.map((s,o)=>{var c;if(!s)return null;const a=!s.isUser&&!s.isStatusMessage,l=r.current.has(o);return a&&!l&&r.current.add(o),h.jsx(ls,{msg:s,idx:o,alreadyRendered:l},`${(c=s.metadata)==null?void 0:c.sessionId}-${o}-${s.isUser?"user":"bot"}`)}),[t,e]);return t.length===0&&r.current.clear(),h.jsxs("div",{className:"space-y-4 py-4",children:[i,h.jsx("div",{ref:n,className:"h-0"})]})}const us=({file:t,onRemove:e})=>h.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-2 max-w-fit",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"bg-gray-200 dark:bg-gray-600 p-2 rounded",children:h.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),h.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:t.name})]}),h.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",type:"button",children:h.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]});function hs({userInput:t,setUserInput:e,handleSubmit:n,isResponding:r,selectedFiles:i,setSelectedFiles:s}){const o=v.useRef(null),[a,l]=v.useState(!1),c=v.useRef(null),u=()=>{var x;(x=o.current)==null||x.click()},d=x=>{const T=x.target.files;if(T){const I=Array.from(T).filter(P=>!i.some(U=>U.name===P.name&&U.size===P.size));s(P=>[...P,...I])}},f=x=>{s(T=>T.filter((I,P)=>P!==x))},m=x=>{n(x,i),s([]),o.current&&(o.current.value=""),c.current&&(c.current.style.height="24px"),l(!1)},g=x=>{const T=x.target;T.style.height="auto";let I;window.innerWidth<640?I=80:window.innerWidth<768?I=150:I=200;const P=Math.min(T.scrollHeight,I);T.style.height=`${P}px`,l(T.scrollHeight>30),e(x.target.value)},p=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),m(x))};return h.jsxs("div",{className:"bg-white dark:bg-gray-900",children:[h.jsx("div",{className:"px-4 sm:px-6 flex flex-wrap gap-2",children:i.map((x,T)=>h.jsx(us,{file:x,onRemove:()=>f(T)},x.name))}),h.jsxs("form",{onSubmit:m,className:"flex items-end px-4 sm:px-6 py-2 sm:rounded-lg",children:[h.jsx("input",{type:"file",ref:o,className:"hidden",multiple:!0,onChange:d}),h.jsxs("div",{className:`flex-1 flex items-end gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 ${a?"rounded-lg":"rounded-full"} bg-white dark:bg-gray-700`,children:[h.jsx("button",{type:"button",onClick:u,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 flex-shrink-0",children:h.jsx(cr,{className:"w-5 h-5"})}),h.jsx("textarea",{ref:c,value:t,onChange:g,onKeyDown:p,placeholder:"Write your question...",rows:1,className:"flex-1 bg-transparent dark:text-white focus:outline-none resize-none overflow-y-auto scrollbar-hide min-h-[24px]",style:{lineHeight:"24px"}})]}),h.jsx("button",{type:"submit",disabled:r,className:`ml-2 w-10 h-10 flex items-center justify-center text-white rounded-full transform transition-all duration-200 ease-in-out ${r?"bg-gray-400 cursor-not-allowed opacity-50":"bg-solace-blue dark:bg-solace-green hover:bg-blue-700 dark:hover:bg-green-600 hover:scale-105"}`,children:h.jsx(ur,{className:"w-5 h-5"})})]})]})}function ds({messages:t,userInput:e,setUserInput:n,handleSubmit:r,isResponding:i,selectedFiles:s,setSelectedFiles:o}){const[a,l]=v.useState(!1),c=v.useRef(!1),u=v.useRef(0),d=v.useRef(null),f=100,m=v.useCallback(()=>{const x=window.scrollY,T=window.innerHeight;return document.body.offsetHeight-(x+T)<f},[]),g=v.useCallback(()=>{if(c.current)return;const x=window.scrollY,T=x<u.current;T&&!m()?l(!0):!T&&m()&&l(!1),u.current=x},[m]);v.useEffect(()=>(u.current=window.scrollY,window.addEventListener("scroll",g),()=>{window.removeEventListener("scroll",g)}),[g]),v.useEffect(()=>{t.length===1&&l(!1)},[t]);const p=v.useCallback(()=>{var x;c.current=!0,(x=d.current)==null||x.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{c.current=!1,m()&&l(!1)},300)},[m]);return v.useEffect(()=>{a||p()},[t,a,p]),h.jsxs("div",{className:"flex flex-col h-full relative",children:[h.jsx("div",{className:"flex-1",children:h.jsx(cs,{messages:t,scrollToBottom:p,messagesEndRef:d})}),a&&h.jsx("button",{type:"button",onClick:p,className:`
            fixed z-50 bottom-20 left-1/2 -translate-x-1/2 
            p-2 rounded-full bg-slate-300 dark:bg-gray-700
            text-black dark:text-gray-200
            shadow hover:bg-gray-300 dark:hover:bg-gray-600
            transition-colors
          `,children:h.jsx(lr,{className:"w-4 h-4",strokeWidth:3})}),h.jsx("div",{className:`
          fixed bottom-0 left-0 right-0 z-10 
          bg-white/95 dark:bg-gray-900/95 
          backdrop-blur-sm
        `,children:h.jsx("div",{className:"md:w-2/4 w-11/12 mx-auto py-2",children:h.jsx(hs,{userInput:e,setUserInput:n,handleSubmit:r,isResponding:i,selectedFiles:s,setSelectedFiles:o})})})]})}function ps({darkMode:t,setDarkMode:e,className:n=""}){const r=()=>{const i=!t;e(i),localStorage.setItem("darkMode",JSON.stringify(i))};return h.jsx("button",{onClick:r,className:`
        p-2 rounded-full transition-all duration-200
        hover:bg-white/15 active:scale-95
        flex items-center justify-center
        ${n}
      `,title:t?"Switch to Light Mode":"Switch to Dark Mode",children:t?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}):h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})})})}function Le(){return Le=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Le.apply(null,arguments)}function At(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function at(t,e){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},at(t,e)}function Ot(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,at(t,e)}function fs(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function gs(t,e){t.classList?t.classList.add(e):fs(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function an(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ms(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=an(t.className,e):t.setAttribute("class",an(t.className&&t.className.baseVal||"",e))}const on={disabled:!1},Me=N.createContext(null);var Hn=function(e){return e.scrollTop},de="unmounted",Z="exited",Y="entering",ie="entered",ot="exiting",q=function(t){Ot(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Z,s.appearStatus=Y):l=ie:r.unmountOnExit||r.mountOnEnter?l=de:l=Z,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===de?{status:Z}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Y&&o!==ie&&(s=Y):(o===Y||o===ie)&&(s=ot)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Y){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:we.findDOMNode(this);o&&Hn(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Z&&this.setState({status:de})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[we.findDOMNode(this),a],c=l[0],u=l[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!i&&!o||on.disabled){this.safeSetState({status:ie},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Y},function(){s.props.onEntering(c,u),s.onTransitionEnd(f,function(){s.safeSetState({status:ie},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:we.findDOMNode(this);if(!s||on.disabled){this.safeSetState({status:Z},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:ot},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Z},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:we.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===de)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=At(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return N.createElement(Me.Provider,{value:null},typeof o=="function"?o(i,a):N.cloneElement(N.Children.only(o),a))},e}(N.Component);q.contextType=Me;q.propTypes={};function re(){}q.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:re,onEntering:re,onEntered:re,onExit:re,onExiting:re,onExited:re};q.UNMOUNTED=de;q.EXITED=Z;q.ENTERING=Y;q.ENTERED=ie;q.EXITING=ot;var xs=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return gs(e,r)})},et=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return ms(e,r)})},It=function(t){Ot(e,t);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(a,l){var c=r.resolveArguments(a,l),u=c[0],d=c[1];r.removeClasses(u,"exit"),r.addClass(u,d?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(a,l)},r.onEntering=function(a,l){var c=r.resolveArguments(a,l),u=c[0],d=c[1],f=d?"appear":"enter";r.addClass(u,f,"active"),r.props.onEntering&&r.props.onEntering(a,l)},r.onEntered=function(a,l){var c=r.resolveArguments(a,l),u=c[0],d=c[1],f=d?"appear":"enter";r.removeClasses(u,f),r.addClass(u,f,"done"),r.props.onEntered&&r.props.onEntered(a,l)},r.onExit=function(a){var l=r.resolveArguments(a),c=l[0];r.removeClasses(c,"appear"),r.removeClasses(c,"enter"),r.addClass(c,"exit","base"),r.props.onExit&&r.props.onExit(a)},r.onExiting=function(a){var l=r.resolveArguments(a),c=l[0];r.addClass(c,"exit","active"),r.props.onExiting&&r.props.onExiting(a)},r.onExited=function(a){var l=r.resolveArguments(a),c=l[0];r.removeClasses(c,"exit"),r.addClass(c,"exit","done"),r.props.onExited&&r.props.onExited(a)},r.resolveArguments=function(a,l){return r.props.nodeRef?[r.props.nodeRef.current,a]:[a,l]},r.getClassNames=function(a){var l=r.props.classNames,c=typeof l=="string",u=c&&l?l+"-":"",d=c?""+u+a:l[a],f=c?d+"-active":l[a+"Active"],m=c?d+"-done":l[a+"Done"];return{baseClassName:d,activeClassName:f,doneClassName:m}},r}var n=e.prototype;return n.addClass=function(i,s,o){var a=this.getClassNames(s)[o+"ClassName"],l=this.getClassNames("enter"),c=l.doneClassName;s==="appear"&&o==="done"&&c&&(a+=" "+c),o==="active"&&i&&Hn(i),a&&(this.appliedClasses[s][o]=a,xs(i,a))},n.removeClasses=function(i,s){var o=this.appliedClasses[s],a=o.base,l=o.active,c=o.done;this.appliedClasses[s]={},a&&et(i,a),l&&et(i,l),c&&et(i,c)},n.render=function(){var i=this.props;i.classNames;var s=At(i,["classNames"]);return N.createElement(q,Le({},s,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(N.Component);It.defaultProps={classNames:""};It.propTypes={};function bs(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pt(t,e){var n=function(s){return e&&v.isValidElement(s)?e(s):s},r=Object.create(null);return t&&v.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function ks(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function J(t,e,n){return n[e]!=null?n[e]:t.props[e]}function vs(t,e){return Pt(t.children,function(n){return v.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:J(n,"appear",t),enter:J(n,"enter",t),exit:J(n,"exit",t)})})}function ys(t,e,n){var r=Pt(t.children),i=ks(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(v.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=v.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=v.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:J(o,"exit",t),enter:J(o,"enter",t)}):!l&&a&&!u?i[s]=v.cloneElement(o,{in:!1}):l&&a&&v.isValidElement(c)&&(i[s]=v.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:J(o,"exit",t),enter:J(o,"enter",t)}))}}),i}var ws=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},Es={component:"div",childFactory:function(e){return e}},Lt=function(t){Ot(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(bs(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?vs(i,a):ys(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=Pt(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=Le({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=At(i,["component","childFactory"]),l=this.state.contextValue,c=ws(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?N.createElement(Me.Provider,{value:l},c):N.createElement(Me.Provider,{value:l},N.createElement(s,a,c))},e}(N.Component);Lt.propTypes={};Lt.defaultProps=Es;function Ss({notifications:t,darkMode:e}){const n=v.useRef({}),r=i=>(n.current[i]||(n.current[i]=N.createRef()),n.current[i]);return h.jsx("div",{className:`
        fixed w-full 
        top-[100px] sm:top-[80px]  
        px-4 md:px-0
        md:right-4 z-40 
        flex flex-col items-center md:items-end`,children:h.jsx(Lt,{className:"w-full md:w-auto",children:t.map(i=>{const s=r(i.id);return h.jsx(It,{nodeRef:s,timeout:300,classNames:"notification",children:h.jsx("div",{ref:s,className:`
                  px-4 py-2 rounded-md shadow-lg mb-2 w-full md:w-auto
                  ${e?"bg-solace-green text-white":"bg-solace-blue text-white"}
                  backdrop-blur-sm bg-opacity-90 md:max-w-md
                `,children:i.message})},i.id)})})})}function Cs(){const{configUseAuthorization:t,configWelcomeMessage:e,configServerUrl:n,configBotName:r}=De(),[i,s]=v.useState(!1),[o,a]=v.useState([]),l=v.useRef(0),c={serverUrl:n},u={text:e||"👋 Hi! I'm Agent Mesh. How can I help you today?",isUser:!1},d=t,f=t,{isValidatingToken:m,isAuthenticated:g,handleLogin:p}=Kn({serverUrl:c.serverUrl,useAuthorization:d,defaultIsAuthenticated:f}),{messages:x,userInput:T,setUserInput:I,isResponding:P,handleNewSession:U,handleSubmit:ne,notifications:ae,darkMode:F,setDarkMode:G}=er({serverUrl:c.serverUrl,welcomeMessage:u}),We=j=>{j.preventDefault(),j.stopPropagation(),l.current++,j.dataTransfer.items&&j.dataTransfer.items.length>0&&s(!0)},Xe=j=>{j.preventDefault(),j.stopPropagation(),l.current--,l.current===0&&s(!1)},Ze=j=>{j.preventDefault(),j.stopPropagation()},Ye=j=>{j.preventDefault(),j.stopPropagation(),s(!1),l.current=0;const ke=Array.from(j.dataTransfer.files);ke.length>0&&a(Qe=>[...Qe,...ke])};if(d){if(m)return h.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solace-green mx-auto mb-4"}),h.jsx("h1",{className:"text-2xl mb-4 text-black dark:text-white",children:"Validating your session..."})]})});if(!g)return h.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsxs("h1",{className:"text-2xl mb-4 text-black dark:text-white",children:["Welcome to ",r]}),h.jsx("p",{className:"mb-4 text-black dark:text-white",children:"Please log in to continue"}),h.jsx("button",{onClick:p,className:"bg-solace-green text-white px-6 py-2 rounded shadow hover:bg-solace-dark-green",children:"Login"})]})})}return h.jsxs("div",{className:`${F?"dark":""} min-h-screen relative`,onDragEnter:We,onDragOver:Ze,onDragLeave:Xe,onDrop:Ye,children:[i&&h.jsx("div",{className:"fixed inset-0 w-full h-full bg-gray-900/50 flex items-center justify-center z-[9999]",children:h.jsx("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("div",{className:"text-solace-blue dark:text-solace-green text-4xl mb-4",children:"📂"}),h.jsx("p",{className:"text-lg font-medium text-solace-blue dark:text-solace-green",children:"Add Anything"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Drop any file here to add it to the conversation"})]})})}),h.jsxs("header",{className:"fixed top-0 left-0 right-0 bg-solace-light-blue text-white p-4 flex justify-between items-center shadow-lg backdrop-blur-sm z-50 transition-all duration-300",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:`h-10 w-10 rounded-full overflow-hidden border-2 border-white/20 shadow-md
                    ${F?"bg-gray-800":"bg-white"}`,children:h.jsx("img",{src:"/solace_chat_header_icon.png",alt:"Agent Mesh Logo",className:"h-full w-full object-cover"})}),h.jsx("h1",{className:"text-xl font-semibold tracking-tight",children:r})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:U,className:`bg-white/15 hover:bg-white/25 text-white px-5 py-2 rounded-full 
                    transition-all duration-200 text-sm font-medium flex items-center space-x-2
                    border border-white/20 hover:border-white/30 shadow-sm`,children:[h.jsx("span",{children:"New Session"}),h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]}),h.jsx(ps,{darkMode:F,setDarkMode:G,className:"p-2 hover:bg-white/15 rounded-full transition-all duration-200"})]})]}),h.jsx(Ss,{notifications:ae,darkMode:F}),h.jsx("main",{className:"flex-1 pt-20 bg-white dark:bg-gray-900 min-h-screen",children:h.jsx("div",{className:"md:w-2/4 mx-auto w-11/12 pb-16",children:h.jsx(ds,{messages:x,userInput:T,setUserInput:I,handleSubmit:j=>{ne(j,o),a([])},isResponding:P,selectedFiles:o,setSelectedFiles:a})})})]})}function js(){return h.jsx(Cs,{})}export{js as default};
