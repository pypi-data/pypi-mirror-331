import{B as ne,L as xa}from"./ListItem-7Usxgk-m.js";import{_ as Fa,s as Pe,c as V,a as We,o as Oe,w as oe,b as Je,C as Ya,u as xe,d as _t,e as Xa,g as ge,p as be,f as gt,h as ot,i as bt,j as Ye,t as ie,k as wt,l as kt,m as Pt,n as Ga,q as st,r as nt,v as ma,x as A,y as ja,z as Ct,A as we,B as c,D as te,E as Ka,V as Xe,F as Za,T as Ja,G as j,H as et,I as Ne,J as It,K as Vt,L as el,M as tl,N as Ae,O as St,P as va,Q as Y,R as C,S as d,U as y,W as Q,X as he,Y as Ge,Z as g,$ as re,a0 as e,a1 as Ee,a2 as a,a3 as Be,a4 as w,a5 as H,a6 as Zt,a7 as je,a8 as se,a9 as P,aa as ut,ab as I,ac as al,ad as ll,ae as il,af as ol,ag as sl,ah as pa,ai as ya,aj as fa,ak as nl,al as ha,am as J,an as F,ao as x,ap as $t,aq as Fe,ar as ee,as as at,at as mt,au as vt,av as Re,aw as le,ax as Se,ay as $e,az as ue,aA as me,aB as Qe,aC as lt,aD as rl,aE as ul,aF as _a,aG as dl,aH as cl,aI as ga,aJ as ml,aK as ba,aL as vl,aM as pl,aN as wa,aO as yl,aP as fl,aQ as hl,aR as _l,aS as gl,aT as bl,aU as Jt,aV as wl,aW as kl,aX as Pl,aY as it,aZ as Cl,a_ as tt,a$ as Ke,b0 as pt,b1 as Ue,b2 as Me,b3 as Qt,b4 as ka,b5 as rt,b6 as ea,b7 as Il,b8 as Pa,b9 as Ca,ba as Vl,bb as Sl,bc as ta,bd as aa,be as $l,bf as dt,bg as Ia,bh as Ql,bi as Tl,bj as Ml}from"./index-CW9q7Ug9.js";import{D as Bl}from"./constants-BXWEQHoz.js";import{u as Tt,m as Mt,a as El,c as Al,b as Ll}from"./layout-BUE-Vdg2.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as De}from"./MediaItemThumb-CL9fz0xp.js";import{T as ql,V as yt}from"./Toolbar-C4zmMwWE.js";import{V as Va}from"./VDialog-hpeVNzwd.js";import{V as zl,a as Rl}from"./VInfiniteScroll-rtn8HdwT.js";import{V as Dl,a as Te,m as Wl,b as Ol}from"./VBtn-BG_l-jMN.js";import{V as Sa}from"./VSlider-CDrQMla_.js";import{M as fe,a as ft}from"./marquee_text_sync-B5G6DNi6.js";import{V as Nl}from"./VToolbar-C3R4TUTJ.js";import{V as Hl}from"./VVirtualScroll-BDWbQaCz.js";import{V as Ul}from"./VCheckbox-iOyX9dtq.js";import{V as xl,a as la,b as ia,c as oa}from"./VExpansionPanels-DnlKKw85.js";import"./VCheckboxBtn-VcTG8xE4.js";const Fl=de(Fa,[["__scopeId","data-v-db81c031"]]),Yl=""+new URL("icon-iUF3LVzp.png",import.meta.url).href;function Xl(t){let{rootEl:i,isSticky:s,layoutItemStyles:o}=t;const n=Pe(!1),l=Pe(0),u=V(()=>{const v=typeof n.value=="boolean"?"top":n.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,n.value?{[v]:We(l.value)}:{top:o.value.top}]});Oe(()=>{oe(s,v=>{v?window.addEventListener("scroll",r,{passive:!0}):window.removeEventListener("scroll",r)},{immediate:!0})}),Je(()=>{window.removeEventListener("scroll",r)});let m=0;function r(){const v=m>window.scrollY?"up":"down",f=i.value.getBoundingClientRect(),h=parseFloat(o.value.top??0),p=window.scrollY-Math.max(0,l.value-h),_=f.height+Math.max(l.value,h)-window.scrollY-window.innerHeight,b=parseFloat(getComputedStyle(i.value).getPropertyValue("--v-body-scroll-y"))||0;f.height<window.innerHeight-h?(n.value="top",l.value=h):v==="up"&&n.value==="bottom"||v==="down"&&n.value==="top"?(l.value=window.scrollY+f.top-b,n.value=!0):v==="down"&&_<=0?(l.value=0,n.value="bottom"):v==="up"&&p<=0&&(b?n.value!=="top"&&(l.value=-p+b+h,n.value="top"):(l.value=f.top+p,n.value="top")),m=window.scrollY}return{isStuck:n,stickyStyles:u}}const Gl=100,jl=20;function sa(t){return(t<0?-1:1)*Math.sqrt(Math.abs(t))*1.41421356237}function na(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let i=0;for(let s=t.length-1;s>0;s--){if(t[s].t===t[s-1].t)continue;const o=sa(i),n=(t[s].d-t[s-1].d)/(t[s].t-t[s-1].t);i+=(n-o)*Math.abs(n),s===t.length-1&&(i*=.5)}return sa(i)*1e3}function Kl(){const t={};function i(n){Array.from(n.changedTouches).forEach(l=>{(t[l.identifier]??(t[l.identifier]=new Ya(jl))).push([n.timeStamp,l])})}function s(n){Array.from(n.changedTouches).forEach(l=>{delete t[l.identifier]})}function o(n){var v;const l=(v=t[n])==null?void 0:v.values().reverse();if(!l)throw new Error(`No samples for touch id ${n}`);const u=l[0],m=[],r=[];for(const f of l){if(u[0]-f[0]>Gl)break;m.push({t:f[0],d:f[1].clientX}),r.push({t:f[0],d:f[1].clientY})}return{x:na(m),y:na(r),get direction(){const{x:f,y:h}=this,[p,_]=[Math.abs(f),Math.abs(h)];return p>_&&f>=0?"right":p>_&&f<=0?"left":_>p&&h>=0?"down":_>p&&h<=0?"up":Zl()}}}return{addMovement:i,endTouch:s,getVelocity:o}}function Zl(){throw new Error}function Jl(t){let{el:i,isActive:s,isTemporary:o,width:n,touchless:l,position:u}=t;Oe(()=>{window.addEventListener("touchstart",O,{passive:!0}),window.addEventListener("touchmove",N,{passive:!1}),window.addEventListener("touchend",L,{passive:!0})}),Je(()=>{window.removeEventListener("touchstart",O),window.removeEventListener("touchmove",N),window.removeEventListener("touchend",L)});const m=V(()=>["left","right"].includes(u.value)),{addMovement:r,endTouch:v,getVelocity:f}=Kl();let h=!1;const p=Pe(!1),_=Pe(0),b=Pe(0);let $;function q(M,B){return(u.value==="left"?M:u.value==="right"?document.documentElement.clientWidth-M:u.value==="top"?M:u.value==="bottom"?document.documentElement.clientHeight-M:ze())-(B?n.value:0)}function E(M){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const W=u.value==="left"?(M-b.value)/n.value:u.value==="right"?(document.documentElement.clientWidth-M-b.value)/n.value:u.value==="top"?(M-b.value)/n.value:u.value==="bottom"?(document.documentElement.clientHeight-M-b.value)/n.value:ze();return B?Math.max(0,Math.min(1,W)):W}function O(M){if(l.value)return;const B=M.changedTouches[0].clientX,W=M.changedTouches[0].clientY,z=25,U=u.value==="left"?B<z:u.value==="right"?B>document.documentElement.clientWidth-z:u.value==="top"?W<z:u.value==="bottom"?W>document.documentElement.clientHeight-z:ze(),S=s.value&&(u.value==="left"?B<n.value:u.value==="right"?B>document.documentElement.clientWidth-n.value:u.value==="top"?W<n.value:u.value==="bottom"?W>document.documentElement.clientHeight-n.value:ze());(U||S||s.value&&o.value)&&($=[B,W],b.value=q(m.value?B:W,s.value),_.value=E(m.value?B:W),h=b.value>-20&&b.value<80,v(M),r(M))}function N(M){const B=M.changedTouches[0].clientX,W=M.changedTouches[0].clientY;if(h){if(!M.cancelable){h=!1;return}const U=Math.abs(B-$[0]),S=Math.abs(W-$[1]);(m.value?U>S&&U>3:S>U&&S>3)?(p.value=!0,h=!1):(m.value?S:U)>3&&(h=!1)}if(!p.value)return;M.preventDefault(),r(M);const z=E(m.value?B:W,!1);_.value=Math.max(0,Math.min(1,z)),z>1?b.value=q(m.value?B:W,!0):z<0&&(b.value=q(m.value?B:W,!1))}function L(M){if(h=!1,!p.value)return;r(M),p.value=!1;const B=f(M.changedTouches[0].identifier),W=Math.abs(B.x),z=Math.abs(B.y);(m.value?W>z&&W>400:z>W&&z>3)?s.value=B.direction===({left:"right",right:"left",top:"down",bottom:"up"}[u.value]||ze()):s.value=_.value>.5}const D=V(()=>p.value?{transform:u.value==="left"?`translateX(calc(-100% + ${_.value*n.value}px))`:u.value==="right"?`translateX(calc(100% - ${_.value*n.value}px))`:u.value==="top"?`translateY(calc(-100% + ${_.value*n.value}px))`:u.value==="bottom"?`translateY(calc(100% - ${_.value*n.value}px))`:ze(),transition:"none"}:void 0);return xe(p,()=>{var W,z;const M=((W=i.value)==null?void 0:W.style.transform)??null,B=((z=i.value)==null?void 0:z.style.transition)??null;_t(()=>{var U,S,k,R;(S=i.value)==null||S.style.setProperty("transform",((U=D.value)==null?void 0:U.transform)||"none"),(R=i.value)==null||R.style.setProperty("transition",((k=D.value)==null?void 0:k.transition)||null)}),Xa(()=>{var U,S;(U=i.value)==null||U.style.setProperty("transform",M),(S=i.value)==null||S.style.setProperty("transition",B)})}),{isDragging:p,dragProgress:_,dragStyles:D}}function ze(){throw new Error}const ei=["start","end","left","right","top","bottom"],ti=be({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>ei.includes(t)},sticky:Boolean,...St(),...Ae(),...tl(),...el({mobile:null}),...Vt(),...Mt(),...It(),...Ne({tag:"nav"}),...et()},"VNavigationDrawer"),$a=ge()({name:"VNavigationDrawer",props:ti(),emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,i){let{attrs:s,emit:o,slots:n}=i;const{isRtl:l}=gt(),{themeClasses:u}=ot(t),{borderClasses:m}=bt(t),{backgroundColorClasses:r,backgroundColorStyles:v}=Ye(ie(t,"color")),{elevationClasses:f}=wt(t),{displayClasses:h,mobile:p}=kt(t),{roundedClasses:_}=Pt(t),b=Ga(),$=st(t,"modelValue",null,G=>!!G),{ssrBootStyles:q}=nt(),{scopeId:E}=ma(),O=A(),N=Pe(!1),{runOpenDelay:L,runCloseDelay:D}=Ka(t,G=>{N.value=G}),M=V(()=>t.rail&&t.expandOnHover&&N.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),B=V(()=>ja(t.location,l.value)),W=V(()=>t.persistent),z=V(()=>!t.permanent&&(p.value||t.temporary)),U=V(()=>t.sticky&&!z.value&&B.value!=="bottom");xe(()=>t.expandOnHover&&t.rail!=null,()=>{oe(N,G=>o("update:rail",!G))}),xe(()=>!t.disableResizeWatcher,()=>{oe(z,G=>!t.permanent&&va(()=>$.value=!G))}),xe(()=>!t.disableRouteWatcher&&!!b,()=>{oe(b.currentRoute,()=>z.value&&($.value=!1))}),oe(()=>t.permanent,G=>{G&&($.value=!0)}),t.modelValue==null&&!z.value&&($.value=t.permanent||!p.value);const{isDragging:S,dragProgress:k}=Jl({el:O,isActive:$,isTemporary:z,width:M,touchless:ie(t,"touchless"),position:B}),R=V(()=>{const G=z.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):M.value;return S.value?G*k.value:G}),{layoutItemStyles:X,layoutItemScrimStyles:ae}=Tt({id:t.name,order:V(()=>parseInt(t.order,10)),position:B,layoutSize:R,elementSize:M,active:V(()=>$.value||S.value),disableTransitions:V(()=>S.value),absolute:V(()=>t.absolute||U.value&&typeof Z.value!="string")}),{isStuck:Z,stickyStyles:ce}=Xl({rootEl:O,isSticky:U,layoutItemStyles:X}),_e=Ye(V(()=>typeof t.scrim=="string"?t.scrim:null)),ke=V(()=>({...S.value?{opacity:k.value*.2,transition:"none"}:void 0,...ae.value}));return Ct({VList:{bgColor:"transparent"}}),we(()=>{const G=n.image||t.image;return c(j,null,[c(t.tag,te({ref:O,onMouseenter:L,onMouseleave:D,class:["v-navigation-drawer",`v-navigation-drawer--${B.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":N.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":z.value,"v-navigation-drawer--persistent":W.value,"v-navigation-drawer--active":$.value,"v-navigation-drawer--sticky":U.value},u.value,r.value,m.value,h.value,f.value,_.value,t.class],style:[v.value,X.value,q.value,ce.value,t.style]},E,s),{default:()=>{var ve,Ce,He;return[G&&c("div",{key:"image",class:"v-navigation-drawer__img"},[n.image?c(Za,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:t.image}}},n.image):c(Xe,{key:"image-img",alt:"",cover:!0,height:"inherit",src:t.image},null)]),n.prepend&&c("div",{class:"v-navigation-drawer__prepend"},[(ve=n.prepend)==null?void 0:ve.call(n)]),c("div",{class:"v-navigation-drawer__content"},[(Ce=n.default)==null?void 0:Ce.call(n)]),n.append&&c("div",{class:"v-navigation-drawer__append"},[(He=n.append)==null?void 0:He.call(n)])]}}),c(Ja,{name:"fade-transition"},{default:()=>[z.value&&(S.value||$.value)&&!!t.scrim&&c("div",te({class:["v-navigation-drawer__scrim",_e.backgroundColorClasses.value],style:[ke.value,_e.backgroundColorStyles.value],onClick:()=>{W.value||($.value=!1)}},E),null)]})])}),{isStuck:Z}}}),Qa=function(){const t=localStorage.getItem("frontend.settings.menu_items"),i=t?t.split(","):Bl,s=[];for(const o of i)o==="home"&&s.push({label:"home",icon:"mdi-home-outline",path:"/home",isLibraryNode:!1}),o==="search"&&s.push({label:"search",icon:"mdi-magnify",path:"/search",isLibraryNode:!1}),o==="artists"&&s.push({label:"artists",icon:"mdi-account-outline",path:"/artists",isLibraryNode:!0,hidden:a.libraryArtistsCount===0}),o==="albums"&&s.push({label:"albums",icon:"mdi-album",path:"/albums",isLibraryNode:!0,hidden:a.libraryAlbumsCount===0}),o==="tracks"&&s.push({label:"tracks",icon:"mdi-music-note",path:"/tracks",isLibraryNode:!0,hidden:a.libraryTracksCount===0}),o==="playlists"&&s.push({label:"playlists",icon:"mdi-playlist-play",path:"/playlists",isLibraryNode:!0,hidden:a.libraryPlaylistsCount===0}),o==="podcasts"&&s.push({label:"podcasts",icon:"mdi-podcast",path:"/podcasts",isLibraryNode:!0,hidden:a.libraryPodcastsCount===0}),o==="audiobooks"&&s.push({label:"audiobooks",icon:"mdi-book-play-outline",path:"/audiobooks",isLibraryNode:!0,hidden:a.libraryAudiobooksCount===0}),o==="radios"&&s.push({label:"radios",icon:"mdi-access-point",path:"/radios",isLibraryNode:!0,hidden:a.libraryRadiosCount===0}),o==="browse"&&s.push({label:"browse",icon:"mdi-folder-outline",path:"/browse",isLibraryNode:!0}),o==="settings"&&s.push({label:"settings.settings",icon:"mdi-cog-outline",path:"/settings",isLibraryNode:!0});return s},ai=Y({__name:"DrawerNavigation",setup(t){const i=A(localStorage.getItem("show_navigation_menu")==="true"),s=Qa();return oe(()=>i.value,o=>{localStorage.setItem("show_navigation_menu",o.toString())}),(o,n)=>(d(),C($a,{app:"",rail:!i.value,width:280,permanent:""},{default:y(()=>[c(he,{style:{height:"55px"},active:!1},{prepend:y(()=>n[1]||(n[1]=[Q("img",{class:"logo_icon",size:"40",src:Yl},null,-1)])),title:y(()=>n[2]||(n[2]=[Q("div",{class:"logo_text"},"Music Assistant",-1)])),_:1}),c(Ge),c(Ee,{lines:"one",density:"compact",nav:""},{default:y(()=>[(d(!0),g(j,null,re(e(s).filter(l=>!l.hidden),l=>(d(),C(he,{key:l.path,nav:"",density:"compact",height:15,title:o.$t(l.label),"prepend-icon":l.icon,to:l.path},null,8,["title","prepend-icon","to"]))),128))]),_:1}),c(ne,{nav:"",height:15,width:40,style:{position:"relative",float:"right",right:"10px",top:"20px"},ripple:!1,icon:i.value?"mdi-chevron-left":"mdi-chevron-right",title:o.$t("tooltip.show_menu"),onClick:n[0]||(n[0]=l=>i.value=!i.value)},null,8,["icon","title"])]),_:1},8,["rail"]))}}),li=de(ai,[["__scopeId","data-v-3b429b32"]]),ii={class:"media-thumb"},oi={style:{"margin-left":"-10px","padding-right":"5px"}},si=Y({__name:"AddToPlaylistDialog",setup(t){const i=A(!1),s=A([]),o=A([]),n=A(),l=A([]);Oe(()=>{Be.on("playlistdialog",async f=>{i.value=!0,l.value=f.items,n.value=f.parentItem,await u()}),Je(()=>{Be.off("playlistdialog")})});const u=async function(){s.value=[],o.value=[];const f=await w.getLibraryPlaylists();let h=l.value.length?l.value[0]:void 0;if(h){"provider_mappings"in h||(h=await w.getItem(h.media_type,h.item_id,h.provider));for(const p of f){if(!p.provider_mappings.filter(b=>b.available).length||!p.is_editable||n.value&&n.value.media_type===H.PLAYLIST&&p.item_id===n.value.item_id)continue;const _=w.providers[p.provider_mappings[0].provider_instance];_&&(_.domain=="builtin"||_.is_streaming_provider||h!=null&&h.provider_mappings.filter(b=>b.provider_instance==_.instance_id).length)&&s.value.push(p)}for(const p of Object.values(w.providers))p.supported_features.includes(Zt.PLAYLIST_CREATE)&&p.supported_features.includes(Zt.PLAYLIST_TRACKS_EDIT)&&(p.domain=="builtin"||p.is_streaming_provider||h!=null&&h.provider_mappings.filter(_=>_.provider_instance==p.instance_id).length)&&o.value.push(p.instance_id)}},m=async function(f){w.addPlaylistTracks(f.item_id,l.value.map(h=>h.uri)),v(),a.activeAlert={type:al.INFO,message:se("background_task_added"),persistent:!1}},r=async function(f){const h=prompt(se("new_playlist_name"));if(!h)return;const p=await w.createPlaylist(h,f);m(p)},v=function(){i.value=!1};return(f,h)=>(d(),C(Va,{modelValue:i.value,"onUpdate:modelValue":[h[0]||(h[0]=p=>i.value=p),h[1]||(h[1]=p=>{e(a).dialogActive=p})],fullscreen:"",transition:"dialog-bottom-transition"},{default:y(()=>[c(je,null,{default:y(()=>[c(ql,{icon:"mdi-playlist-plus",title:e(se)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:v}]},null,8,["title","menu-items"]),c(Ge),h[4]||(h[4]=Q("br",null,null,-1)),c(Ee,null,{default:y(()=>[(d(!0),g(j,null,re(s.value,p=>(d(),g("div",{key:p.item_id},[c(he,{onClick:_=>m(p)},{prepend:y(()=>[Q("div",ii,[c(De,{item:p,size:50},null,8,["item"])])]),title:y(()=>[Q("div",null,I(p.name),1)]),subtitle:y(()=>[Q("div",null,I(p.owner),1)]),append:y(()=>[p.provider_mappings?(d(),C(ut,{key:0,domain:p.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):P("",!0)]),_:2},1032,["onClick"])]))),128)),h[2]||(h[2]=Q("div",{style:{height:"30px"}},null,-1)),c(Ge),h[3]||(h[3]=Q("div",{style:{height:"30px"}},null,-1)),(d(!0),g(j,null,re(o.value,p=>(d(),g("div",{key:p},[c(he,{onClick:_=>r(p)},{prepend:y(()=>[Q("div",oi,[c(ut,{domain:e(w).providers[p].domain,size:50},null,8,["domain"])])]),title:y(()=>[Q("div",null,I(e(se)("new_playlist")),1)]),subtitle:y(()=>[Q("div",null,I(e(se)("create_playlist_on",[e(w).providers[p].name])),1)]),append:y(()=>[c(ut,{domain:e(w).providers[p].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ni=de(si,[["__scopeId","data-v-bd014719"]]),ri=be({scrollable:Boolean,...Ae(),...il(),...Ne({tag:"main"})},"VMain"),ui=ge()({name:"VMain",props:ri(),setup(t,i){let{slots:s}=i;const{dimensionStyles:o}=ll(t),{mainStyles:n}=El(),{ssrBootStyles:l}=nt();return we(()=>c(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable},t.class],style:[n.value,l.value,o.value,t.style]},{default:()=>{var u,m;return[t.scrollable?c("div",{class:"v-main__scroller"},[(u=s.default)==null?void 0:u.call(s)]):(m=s.default)==null?void 0:m.call(s)]}})),{}}}),ra=Y({__name:"View",setup(t){return(i,s)=>{const o=sl("router-view");return d(),C(ui,{id:"cont",class:"overflow-y-auto",style:{height:"0px"}},{default:y(()=>{var n,l,u;return[e(a).navigationMenuStyle=="vertical"&&!e(a).frameless?(d(),C(li,{key:0})):P("",!0),c(o,null,{default:y(({Component:m})=>[(d(),C(ol(m)))]),_:1}),c(ni),c(Fl),c(zl,{"model-value":e(a).activeAlert!==void 0,color:((n=e(a).activeAlert)==null?void 0:n.type)||"grey",text:(l=e(a).activeAlert)==null?void 0:l.message,"close-on-content-click":"",position:"sticky",timeout:(u=e(a).activeAlert)!=null&&u.persistent?-1:5e3,"z-index":"999999",style:{"z-index":"999999"},"onUpdate:modelValue":s[0]||(s[0]=()=>e(a).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])]}),_:1})}}}),di=be({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...St(),...Ae(),...ha(),...Vt(),...It(),...Mt({name:"bottom-navigation"}),...Ne({tag:"header"}),...nl({selectedClass:"v-btn--selected"}),...et()},"VBottomNavigation"),ci=ge()({name:"VBottomNavigation",props:di(),emits:{"update:active":t=>!0,"update:modelValue":t=>!0},setup(t,i){let{slots:s}=i;const{themeClasses:o}=pa(),{borderClasses:n}=bt(t),{backgroundColorClasses:l,backgroundColorStyles:u}=Ye(ie(t,"bgColor")),{densityClasses:m}=ya(t),{elevationClasses:r}=wt(t),{roundedClasses:v}=Pt(t),{ssrBootStyles:f}=nt(),h=V(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),p=st(t,"active",t.active),{layoutItemStyles:_}=Tt({id:t.name,order:V(()=>parseInt(t.order,10)),position:V(()=>"bottom"),layoutSize:V(()=>p.value?h.value:0),elementSize:h,active:p,absolute:ie(t,"absolute")});return fa(t,Dl),Ct({VBtn:{baseColor:ie(t,"baseColor"),color:ie(t,"color"),density:ie(t,"density"),stacked:V(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),we(()=>c(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":p.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},o.value,l.value,n.value,m.value,r.value,v.value,t.class],style:[u.value,_.value,{height:We(h.value)},f.value,t.style]},{default:()=>[s.default&&c("div",{class:"v-bottom-navigation__content"},[s.default()])]})),{}}}),mi={class:"menuButton"},vi={class:"menuButton"},pi={class:"menuButton"},yi=Y({__name:"BottomNavigation",props:{height:{}},setup(t){const i=Qa(),s=A(!1);return(o,n)=>(d(),C(ci,{height:o.height,grow:"",elevation:"15",style:{"border-top":"1px solid #20202035"},role:"navigation"},{default:y(()=>[e(J)("tablet")?(d(!0),g(j,{key:0},re(e(i),l=>(d(),C(Te,{key:l.label,to:l.path,"aria-label":o.$t(l.label),tabindex:"0"},{default:y(()=>[c(F,{size:"xx-large"},{default:y(()=>[x(I(l.icon),1)]),_:2},1024),Q("span",mi,I(o.$t(l.label)),1)]),_:2},1032,["to","aria-label"]))),128)):(d(),g(j,{key:1},[(d(!0),g(j,null,re(e(i).filter(l=>!l.isLibraryNode),l=>(d(),C(Te,{key:l.label,to:l.path,"aria-label":o.$t(l.label),tabindex:"0"},{default:y(()=>[c(F,{size:"xx-large"},{default:y(()=>[x(I(l.icon),1)]),_:2},1024),Q("span",vi,I(o.$t(l.label)),1)]),_:2},1032,["to","aria-label"]))),128)),c($t,null,{activator:y(({props:l})=>[c(Te,te(l,{"aria-haspopup":"true","aria-expanded":s.value.toString(),"aria-label":"Open library menu"}),{default:y(()=>[c(F,{size:"xx-large"},{default:y(()=>n[0]||(n[0]=[x("mdi-bookshelf")])),_:1}),Q("span",pi,I(o.$t("library")),1)]),_:2},1040,["aria-expanded"])]),default:y(()=>[c(Ee,null,{default:y(()=>[(d(!0),g(j,null,re(e(i).filter(l=>l.isLibraryNode),l=>(d(),C(he,{key:l.label,title:o.$t(l.label),"prepend-icon":l.icon,to:l.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})],64))]),_:1},8,["height"]))}}),fi=de(yi,[["__scopeId","data-v-5c8e33d1"]]),hi={style:{width:"auto"}},_i={key:0,style:{width:"100%"}},gi=["onClick"],bi={key:0,class:"time-text-row"},wi={class:"text-caption time-text-right"},ki=Y({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1},color:{default:void 0}},setup(t){const i=A(!1),s=A(!0),o=A(!1),n=A(0),l=A(0),u=V(()=>a.curQueueItem?i.value?`-${Fe(a.curQueueItem.duration-r.value)}`:`${Fe(r.value)}`:"0:00"),m=V(()=>{var b;if(!a.curQueueItem||!a.curQueueItem.duration||((b=a.curQueueItem.media_item)==null?void 0:b.media_type)==H.RADIO)return"";const _=a.curQueueItem.duration;return Fe(_)}),r=V(()=>o.value?(l.value=n.value,n.value):a.activePlayerQueue?a.activePlayerQueue.elapsed_time:0),v=V(()=>{var b,$,q;const _={};return(q=($=(b=a.curQueueItem)==null?void 0:b.media_item)==null?void 0:$.metadata)!=null&&q.chapters&&a.curQueueItem.media_item.metadata.chapters.forEach(E=>{_[E.start]=E.name}),_});oe(r,_=>{o.value||(n.value=_)});const f=function(){o.value=!0},h=()=>{o.value=!1,!o.value&&a.activePlayer&&w.playerCommandSeek(a.activePlayer.player_id,Math.round(l.value))},p=function(_){var b,$,q;if((q=($=(b=a.curQueueItem)==null?void 0:b.media_item)==null?void 0:$.metadata)!=null&&q.chapters){for(const E of a.curQueueItem.media_item.metadata.chapters)if(E.start==_){w.playMedia(a.curQueueItem.media_item.uri,void 0,void 0,E.position.toString());return}}};return(_,b)=>{var $,q;return d(),g("div",hi,[e(a).activePlayerQueue?(d(),g("div",_i,[c(Sa,{modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=E=>n.value=E),disabled:!e(a).curQueueItem||!e(a).curQueueItem.media_item||!e(a).curQueueItem.duration||e(a).curQueueItem.media_item.media_type==e(H).RADIO||(($=e(a).activePlayer)==null?void 0:$.powered)==!1,style:{width:"100%"},min:0,max:(q=e(a).curQueueItem)==null?void 0:q.duration,"hide-details":"","track-size":2,"thumb-size":s.value?0:10,"show-ticks":v.value?"always":!1,ticks:v.value,"tick-size":"4",color:_.color,onTouchstart:b[1]||(b[1]=E=>s.value=!1),onTouchend:b[2]||(b[2]=E=>s.value=!0),onMouseenter:b[3]||(b[3]=E=>s.value=!1),onMouseleave:b[4]||(b[4]=E=>s.value=!0),onStart:f,onEnd:h},{"tick-label":y(({tick:E})=>[_.showLabels&&!s.value&&Object.values(v.value).length<6?(d(),g("a",{key:0,class:"text-caption",onClick:O=>p(E.value)},I(E.label),9,gi)):P("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks","color"]),_.showLabels?(d(),g("div",bi,[Q("div",{class:"text-caption time-text-left",onClick:b[5]||(b[5]=E=>i.value?i.value=!1:i.value=!0)},I(u.value),1),Q("div",wi,I(m.value),1)])):P("",!0)])):P("",!0)])}}}),Ta=de(ki,[["__scopeId","data-v-5386447e"]]),Pi=Y({__name:"ResponsiveIcon",props:{width:{default:void 0},height:{default:void 0},staticWidth:{default:void 0},staticHeight:{default:void 0},maxWidth:{default:void 0},maxHeight:{default:void 0},minWidth:{default:"24px"},minHeight:{default:"24px"},icon:{default:void 0},type:{default:"icon"},color:{default:void 0},disabled:{type:Boolean},badge:{type:Boolean,default:void 0}},emits:["click"],setup(t,{emit:i}){const s=()=>{if(o.value){const l=o.value.offsetWidth,u=o.value.offsetHeight,m=Math.min(l,u);n.value.$el.style.fontSize=`${m}px`}},o=A(),n=A();return Oe(()=>{s(),window.addEventListener("resize",s)}),Je(()=>{window.removeEventListener("resize",s)}),(l,u)=>(d(),g("div",{ref_key:"responsiveIconHolder",ref:o,class:at([l.type=="btn"&&!l.disabled?"responsive-icon-holder-btn":"responsive-icon-holder"]),style:ee({width:l.staticWidth?l.staticWidth:l.width,height:l.staticWidth?l.staticWidth:l.height,maxHeight:l.staticHeight?l.staticHeight:l.maxHeight,maxWidth:l.staticWidth?l.staticWidth:l.maxWidth,minHeight:l.staticHeight?l.staticHeight:l.minHeight,minWidth:l.staticWidth?l.staticWidth:l.minWidth}),onClick:u[0]||(u[0]=m=>l.disabled?m.preventDefault():l.$emit("click",m))},[c(yt,{"model-value":l.badge==!0,color:"error",dot:""},{default:y(()=>[l.type==="icon"?(d(),C(F,{key:0,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",color:l.color?l.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null,disabled:l.disabled},mt({_:2},[re(l.$slots,(m,r)=>({name:r,fn:y(()=>[vt(l.$slots,r,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):l.type==="btn"?(d(),C(F,{key:1,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",style:{cursor:"pointer"},color:l.color?l.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null,disabled:l.disabled},mt({_:2},[re(l.$slots,(m,r)=>({name:r,fn:y(()=>[vt(l.$slots,r,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):P("",!0)]),_:3},8,["model-value"])],6))}}),Le=de(Pi,[["__scopeId","data-v-2c9253ab"]]),Ma=Y({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){return(i,s)=>{var o,n;return i.isVisible&&i.playerQueue?(d(),C(Le,te({key:0},i.icon,{disabled:!i.playerQueue.active||i.playerQueue.items==0,color:e(Re)((o=i.icon)==null?void 0:o.color,[[i.playerQueue.repeat_mode==e(le).OFF,null],[i.playerQueue.repeat_mode==e(le).ALL,"primary"],[i.playerQueue.repeat_mode==e(le).ONE,"primary"]]),icon:e(Re)((n=i.icon)==null?void 0:n.icon,[[i.playerQueue.repeat_mode==e(le).OFF,"mdi-repeat-off"],[i.playerQueue.repeat_mode==e(le).ALL,"mdi-repeat"],[i.playerQueue.repeat_mode==e(le).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),type:"btn",onClick:s[0]||(s[0]=l=>e(w).queueCommandRepeat(i.playerQueue.queue_id||"",e(Re)(null,[[i.playerQueue.repeat_mode==e(le).OFF,e(le).ONE],[i.playerQueue.repeat_mode==e(le).ALL,e(le).OFF],[i.playerQueue.repeat_mode==e(le).ONE,e(le).ALL]])))}),null,16,["disabled","color","icon"])):P("",!0)}}}),Ba=Y({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){return(i,s)=>{var o,n;return i.isVisible&&i.playerQueue?(d(),C(Le,te({key:0},i.icon,{disabled:!i.playerQueue.active||i.playerQueue.items==0,color:e(Re)((o=i.icon)==null?void 0:o.color,[[i.playerQueue.shuffle_enabled,"primary",""]]),icon:e(Re)((n=i.icon)==null?void 0:n.icon,[[i.playerQueue.shuffle_enabled,"mdi-shuffle"],[i.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),type:"btn",onClick:s[0]||(s[0]=l=>e(w).queueCommandShuffle(i.playerQueue.queue_id,!i.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):P("",!0)}}}),Ea=Y({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(t){const i=t,s=V(()=>i.playerQueue?i.playerQueue.items>0:!1),o=V(()=>{var l;return!(!i.player||(l=i.playerQueue)!=null&&l.active||!i.player.current_media)}),n=V(()=>{var l;return((l=i.player)==null?void 0:l.state)==Se.PLAYING?"mdi-pause":"mdi-play"});return(l,u)=>l.isVisible&&l.player?(d(),C(Le,te({key:0},l.icon,{disabled:!s.value&&!o.value,icon:l.iconStyle?`${n.value}-${l.iconStyle}`:n.value,type:"btn",onClick:u[0]||(u[0]=m=>e(w).playerCommandPlayPause(l.player.player_id))}),null,16,["disabled","icon"])):P("",!0)}}),Aa=Y({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const i=t,s=V(()=>{var n,l;return!((n=i.playerQueue)!=null&&n.active)||!((l=i.playerQueue)!=null&&l.items)||!i.playerQueue.current_index?!1:i.playerQueue.current_index>0}),o=V(()=>{var n;return!i.player||(n=i.playerQueue)!=null&&n.active||!i.player.current_media?!1:i.player.supported_features.includes($e.NEXT_PREVIOUS)});return(n,l)=>n.isVisible&&n.player?(d(),C(Le,te({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-previous-outline",type:"btn",onClick:l[0]||(l[0]=u=>e(w).playerCommandPrevious(n.player.player_id))}),null,16,["disabled"])):P("",!0)}}),La=Y({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const i=t,s=V(()=>{var n;return(n=i.playerQueue)!=null&&n.active?(i.playerQueue.current_index||0)<i.playerQueue.items-1:!1}),o=V(()=>{var n;return!i.player||(n=i.playerQueue)!=null&&n.active||!i.player.current_media?!1:i.player.supported_features.includes($e.NEXT_PREVIOUS)});return(n,l)=>n.isVisible&&n.player?(d(),C(Le,te({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-next-outline",type:"btn",onClick:l[0]||(l[0]=u=>e(w).playerCommandNext(n.player.player_id))}),null,16,["disabled"])):P("",!0)}}),Ci={key:0,class:"player-controls"},Ii={key:0,class:"player-controls-elements"},Vi={key:1,class:"player-controls-elements"},Si={key:2},$i={key:3,class:"player-controls-elements"},Qi={key:4,class:"player-controls-elements"},ua=Y({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(t){return(i,s)=>{var o,n,l,u,m;return i.visibleComponents?(d(),g("div",Ci,[i.visibleComponents&&((o=i.visibleComponents.shuffle)!=null&&o.isVisible)?(d(),g("div",Ii,[c(Ba,{"player-queue":e(a).activePlayerQueue,class:"media-controls-item",icon:i.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):P("",!0),i.visibleComponents&&((n=i.visibleComponents.previous)!=null&&n.isVisible)?(d(),g("div",Vi,[c(Aa,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item",icon:i.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):P("",!0),i.visibleComponents&&((l=i.visibleComponents.play)!=null&&l.isVisible)?(d(),g("div",Si,[c(Ea,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","icon-style":i.visibleComponents.play.withCircle?"circle":"",icon:i.visibleComponents.play.icon},null,8,["player","player-queue","icon-style","icon"])])):P("",!0),i.visibleComponents&&((u=i.visibleComponents.next)!=null&&u.isVisible)?(d(),g("div",$i,[c(La,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,icon:i.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):P("",!0),i.visibleComponents&&((m=i.visibleComponents.repeat)!=null&&m.isVisible)?(d(),g("div",Qi,[c(Ma,{"player-queue":e(a).activePlayerQueue,icon:i.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):P("",!0)])):P("",!0)}}}),Ti={props:{width:String,height:String,style:String,allowWheel:Boolean},emits:["update:model-value"],setup(t,i){const s=A(!0),o=V(()=>({class:"player-volume",hideDetails:!0,trackSize:2,thumbSize:s.value?0:10,step:2,elevation:0,style:`width: ${t.width}; height:${t.height}; display: inline-grid; ${t.style}`})),n=V(()=>({...o.value,...i}));return{isThumbHidden:s,playerVolumeProps:n,onWheel:({deltaY:u})=>{if(!t.allowWheel)return;const m=n.value.step,r=i.attrs["model-value"],v=u<0?m:-m;i.emit("update:model-value",r+v)}}}};function Mi(t,i,s,o,n,l){return d(),C(Sa,te(o.playerVolumeProps,{onTouchstart:i[0]||(i[0]=u=>o.isThumbHidden=!1),onTouchend:i[1]||(i[1]=u=>o.isThumbHidden=!0),onMouseenter:i[2]||(i[2]=u=>o.isThumbHidden=!1),onMouseleave:i[3]||(i[3]=u=>o.isThumbHidden=!0),onWheel:ue(o.onWheel,["prevent"]),onEnd:i[4]||(i[4]=u=>t.$emit("update:model-value",u))}),mt({_:2},[re(t.$slots,(u,m)=>({name:m,fn:y(()=>[vt(t.$slots,m,{},void 0,!0)])}))]),1040,["onWheel"])}const Ze=de(Ti,[["render",Mi],["__scopeId","data-v-af51e13c"]]),qa=Y({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const i=function(){a.showFullscreenPlayer&&a.showQueueItems?a.showQueueItems=!1:a.showFullscreenPlayer&&!a.showQueueItems?a.showQueueItems=!0:(a.showQueueItems=!0,a.showFullscreenPlayer=!0)};return(s,o)=>{var n;return s.isVisible?(d(),C(Le,te({key:0},s.icon,{disabled:!e(a).activePlayerId||e(a).showFullscreenPlayer&&!e(a).curQueueItem&&!e(a).showQueueItems,icon:"mdi-playlist-play",color:e(Re)((n=s.icon)==null?void 0:n.color,[[e(a).showFullscreenPlayer&&e(a).showQueueItems,"primary",""]]),type:"btn",onClick:i}),null,16,["disabled","color"])):P("",!0)}}}),za=Y({__name:"SpeakerBtn",props:{color:{}},setup(t){return(i,s)=>(d(),C(ne,{variant:"icon",ripple:!1,icon:"",onClick:s[0]||(s[0]=o=>e(a).showPlayersMenu=!0)},{default:y(()=>{var o;return[c(F,{color:i.color?i.color:"",size:24,icon:(o=e(a).activePlayer)!=null&&o.group_childs.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]}),_:1}))}}),Ra=(t,i)=>{const s=[];(t==null?void 0:t.power_control)!=me&&s.push({label:t.powered?"power_off_player":"power_on_player",labelArgs:[],action:()=>{w.playerCommandPowerToggle(t.player_id)},icon:"mdi-power"}),((t==null?void 0:t.state)=="playing"||(t==null?void 0:t.state)=="paused")&&s.push({label:"stop_playback",labelArgs:[],action:()=>{w.playerCommandStop(t.player_id)},icon:"mdi-stop"});const o=Object.values(w.players).filter(l=>l.player_id!=t.player_id&&l.available&&l.enabled&&(l.can_group_with.includes(t.provider)||l.can_group_with.includes(t.player_id))&&l.supported_features.includes($e.SET_MEMBERS)&&!l.synced_to);t.supported_features.includes($e.SET_MEMBERS)&&!t.synced_to&&t.type==Qe.PLAYER&&t.group_childs.length==0&&o.length>0&&s.push({label:"sync_player_with",labelArgs:[],icon:"mdi-link-variant",subItems:o.map(l=>({label:l.display_name,labelArgs:[],action:()=>{w.playerCommandGroup(t.player_id,l.player_id)}})).sort((l,u)=>{var m;return l.label.toUpperCase()>((m=u.label)==null?void 0:m.toUpperCase())?1:-1})}),i&&s.push({label:i.shuffle_enabled?"shuffle_disable":"shuffle_enable",labelArgs:[],action:()=>{w.queueCommandShuffleToggle(i.queue_id)},icon:i.shuffle_enabled?"mdi-shuffle-disabled":"mdi-shuffle"}),i&&s.push({label:"select_repeat_mode",labelArgs:[],subItems:[{label:"repeat_mode.off",labelArgs:[],action:()=>{w.queueCommandRepeat(i.queue_id,le.OFF)},selected:i.repeat_mode==le.OFF},{label:"repeat_mode.all",labelArgs:[],action:()=>{w.queueCommandRepeat(i.queue_id,le.ALL)},selected:i.repeat_mode==le.ALL},{label:"repeat_mode.one",labelArgs:[],action:()=>{w.queueCommandRepeat(i.queue_id,le.ONE)},selected:i.repeat_mode==le.ONE}],icon:"mdi-repeat"}),i!=null&&i.items&&s.push({label:"transfer_queue",icon:"mdi-swap-horizontal",subItems:Object.values(w.players).filter(l=>l.player_id!=i.queue_id&&l.player_id!=t.player_id&&l.available&&l.enabled&&!l.synced_to).map(l=>({label:l.display_name,labelArgs:[],action:()=>{w.queueCommandTransfer(i.queue_id,l.player_id),a.activePlayerId=l.player_id}})).sort((l,u)=>{var m;return l.label.toUpperCase()>((m=u.label)==null?void 0:m.toUpperCase())?1:-1})}),i!=null&&i.items&&s.push({label:"queue_clear",labelArgs:[],action:()=>{w.queueCommandClear(i.queue_id)},icon:"mdi-cancel"});const n=t.source_list.filter(l=>!l.passive||l.id==t.active_source);return t.active_source!=t.player_id&&n.push({id:t.player_id,name:se("music_assistant_source"),passive:!1,can_play_pause:!0,can_seek:!0,can_next_previous:!0}),!t.synced_to&&n.length>0&&s.push({label:"select_source",labelArgs:[],icon:"mdi-import",subItems:n.map(l=>({label:l.name,labelArgs:[],disabled:l.id==t.active_source,selected:l.id==t.active_source,action:()=>{w.playerCommandGroupSelectSource(t.player_id,l.id)}})).sort((l,u)=>{var m;return l.label.toUpperCase()>((m=u.label)==null?void 0:m.toUpperCase())?1:-1})}),i&&"dont_stop_the_music_enabled"in i&&s.push({label:i.dont_stop_the_music_enabled?"dont_stop_the_music_disable":"dont_stop_the_music_enable",labelArgs:[],action:()=>{w.queueCommandDontStopTheMusicToggle(i.queue_id)},icon:"mdi-all-inclusive"}),s.push({label:"open_player_settings",labelArgs:[],action:()=>{a.showFullscreenPlayer=!1,a.showPlayersMenu=!1,lt.push(`/settings/editplayer/${t.player_id}`)},icon:"mdi-cog-outline"}),t.type!==Qe.GROUP&&s.push({label:"open_dsp_settings",labelArgs:[],action:()=>{a.showFullscreenPlayer=!1,a.showPlayersMenu=!1,lt.push(`/settings/editplayer/${t.player_id}/dsp`)},icon:"mdi-equalizer"}),s},Bt=Symbol.for("vuetify:v-tabs"),Bi=be({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},..._a(Wl({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),ht=ge()({name:"VTab",props:Bi(),setup(t,i){let{slots:s,attrs:o}=i;const{textColorClasses:n,textColorStyles:l}=rl(t,"sliderColor"),u=A(),m=A(),r=V(()=>t.direction==="horizontal"),v=V(()=>{var h,p;return((p=(h=u.value)==null?void 0:h.group)==null?void 0:p.isSelected.value)??!1});function f(h){var _,b;let{value:p}=h;if(p){const $=(b=(_=u.value)==null?void 0:_.$el.parentElement)==null?void 0:b.querySelector(".v-tab--selected .v-tab__slider"),q=m.value;if(!$||!q)return;const E=getComputedStyle($).color,O=$.getBoundingClientRect(),N=q.getBoundingClientRect(),L=r.value?"x":"y",D=r.value?"X":"Y",M=r.value?"right":"bottom",B=r.value?"width":"height",W=O[L],z=N[L],U=W>z?O[M]-N[M]:O[L]-N[L],S=Math.sign(U)>0?r.value?"right":"bottom":Math.sign(U)<0?r.value?"left":"top":"center",R=(Math.abs(U)+(Math.sign(U)<0?O[B]:N[B]))/Math.max(O[B],N[B])||0,X=O[B]/N[B]||0,ae=1.5;dl(q,{backgroundColor:[E,"currentcolor"],transform:[`translate${D}(${U}px) scale${D}(${X})`,`translate${D}(${U/ae}px) scale${D}(${(R-1)/ae+1})`,"none"],transformOrigin:Array(3).fill(S)},{duration:225,easing:cl})}}return we(()=>{const h=Te.filterProps(t);return c(Te,te({symbol:Bt,ref:u,class:["v-tab",t.class],style:t.style,tabindex:v.value?0:-1,role:"tab","aria-selected":String(v.value),active:!1},h,o,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":f}),{...s,default:()=>{var p;return c(j,null,[((p=s.default)==null?void 0:p.call(s))??t.text,!t.hideSlider&&c("div",{ref:m,class:["v-tab__slider",n.value],style:l.value},null)])}})}),ul({},u)}}),Ei=t=>{const{touchstartX:i,touchendX:s,touchstartY:o,touchendY:n}=t,l=.5,u=16;t.offsetX=s-i,t.offsetY=n-o,Math.abs(t.offsetY)<l*Math.abs(t.offsetX)&&(t.left&&s<i-u&&t.left(t),t.right&&s>i+u&&t.right(t)),Math.abs(t.offsetX)<l*Math.abs(t.offsetY)&&(t.up&&n<o-u&&t.up(t),t.down&&n>o+u&&t.down(t))};function Ai(t,i){var o;const s=t.changedTouches[0];i.touchstartX=s.clientX,i.touchstartY=s.clientY,(o=i.start)==null||o.call(i,{originalEvent:t,...i})}function Li(t,i){var o;const s=t.changedTouches[0];i.touchendX=s.clientX,i.touchendY=s.clientY,(o=i.end)==null||o.call(i,{originalEvent:t,...i}),Ei(i)}function qi(t,i){var o;const s=t.changedTouches[0];i.touchmoveX=s.clientX,i.touchmoveY=s.clientY,(o=i.move)==null||o.call(i,{originalEvent:t,...i})}function zi(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:s=>Ai(s,i),touchend:s=>Li(s,i),touchmove:s=>qi(s,i)}}function Ri(t,i){var m;const s=i.value,o=s!=null&&s.parent?t.parentElement:t,n=(s==null?void 0:s.options)??{passive:!0},l=(m=i.instance)==null?void 0:m.$.uid;if(!o||!l)return;const u=zi(i.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[l]=u,ga(u).forEach(r=>{o.addEventListener(r,u[r],n)})}function Di(t,i){var l,u;const s=(l=i.value)!=null&&l.parent?t.parentElement:t,o=(u=i.instance)==null?void 0:u.$.uid;if(!(s!=null&&s._touchHandlers)||!o)return;const n=s._touchHandlers[o];ga(n).forEach(m=>{s.removeEventListener(m,n[m])}),delete s._touchHandlers[o]}const Da={mounted:Ri,unmounted:Di},Wa=Symbol.for("vuetify:v-window"),Oa=Symbol.for("vuetify:v-window-group"),Na=be({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Ae(),...Ne(),...et()},"VWindow"),da=ge()({name:"VWindow",directives:{Touch:Da},props:Na(),emits:{"update:modelValue":t=>!0},setup(t,i){let{slots:s}=i;const{themeClasses:o}=ot(t),{isRtl:n}=gt(),{t:l}=ml(),u=fa(t,Oa),m=A(),r=V(()=>n.value?!t.reverse:t.reverse),v=Pe(!1),f=V(()=>{const L=t.direction==="vertical"?"y":"x",M=(r.value?!v.value:v.value)?"-reverse":"";return`v-window-${L}${M}-transition`}),h=Pe(0),p=A(void 0),_=V(()=>u.items.value.findIndex(L=>u.selected.value.includes(L.id)));oe(_,(L,D)=>{const M=u.items.value.length,B=M-1;M<=2?v.value=L<D:L===B&&D===0?v.value=!0:L===0&&D===B?v.value=!1:v.value=L<D}),pl(Wa,{transition:f,isReversed:v,transitionCount:h,transitionHeight:p,rootRef:m});const b=V(()=>t.continuous||_.value!==0),$=V(()=>t.continuous||_.value!==u.items.value.length-1);function q(){b.value&&u.prev()}function E(){$.value&&u.next()}const O=V(()=>{const L=[],D={icon:n.value?t.nextIcon:t.prevIcon,class:`v-window__${r.value?"right":"left"}`,onClick:u.prev,"aria-label":l("$vuetify.carousel.prev")};L.push(b.value?s.prev?s.prev({props:D}):c(Te,D,null):c("div",null,null));const M={icon:n.value?t.prevIcon:t.nextIcon,class:`v-window__${r.value?"left":"right"}`,onClick:u.next,"aria-label":l("$vuetify.carousel.next")};return L.push($.value?s.next?s.next({props:M}):c(Te,M,null):c("div",null,null)),L}),N=V(()=>t.touch===!1?t.touch:{...{left:()=>{r.value?q():E()},right:()=>{r.value?E():q()},start:D=>{let{originalEvent:M}=D;M.stopPropagation()}},...t.touch===!0?{}:t.touch});return we(()=>ba(c(t.tag,{ref:m,class:["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover"},o.value,t.class],style:t.style},{default:()=>{var L,D;return[c("div",{class:"v-window__container",style:{height:p.value}},[(L=s.default)==null?void 0:L.call(s,{group:u}),t.showArrows!==!1&&c("div",{class:"v-window__controls"},[O.value])]),(D=s.additional)==null?void 0:D.call(s,{group:u})]}}),[[vl("touch"),N.value]])),{group:u}}}),Wi=be({..._a(Na(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Oi=ge()({name:"VTabsWindow",props:Wi(),emits:{"update:modelValue":t=>!0},setup(t,i){let{slots:s}=i;const o=wa(Bt,null),n=st(t,"modelValue"),l=V({get(){var u;return n.value!=null||!o?n.value:(u=o.items.value.find(m=>o.selected.value.includes(m.id)))==null?void 0:u.value},set(u){n.value=u}});return we(()=>{const u=da.filterProps(t);return c(da,te({_as:"VTabsWindow"},u,{modelValue:l.value,"onUpdate:modelValue":m=>l.value=m,class:["v-tabs-window",t.class],style:t.style,mandatory:!1,touch:!1}),s)}),{}}}),Ha=be({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ae(),...gl(),..._l()},"VWindowItem"),ca=ge()({name:"VWindowItem",directives:{Touch:Da},props:Ha(),emits:{"group:selected":t=>!0},setup(t,i){let{slots:s}=i;const o=wa(Wa),n=yl(t,Oa),{isBooted:l}=nt();if(!o||!n)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const u=Pe(!1),m=V(()=>l.value&&(o.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function r(){!u.value||!o||(u.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function v(){var b;u.value||!o||(u.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=We((b=o.rootRef.value)==null?void 0:b.clientHeight)),o.transitionCount.value+=1)}function f(){r()}function h(b){u.value&&va(()=>{!m.value||!u.value||!o||(o.transitionHeight.value=We(b.clientHeight))})}const p=V(()=>{const b=o.isReversed.value?t.reverseTransition:t.transition;return m.value?{name:typeof b!="string"?o.transition.value:b,onBeforeEnter:v,onAfterEnter:r,onEnterCancelled:f,onBeforeLeave:v,onAfterLeave:r,onLeaveCancelled:f,onEnter:h}:!1}),{hasContent:_}=fl(t,n.isSelected);return we(()=>c(hl,{transition:p.value,disabled:!l.value},{default:()=>{var b;return[ba(c("div",{class:["v-window-item",n.selectedClass.value,t.class],style:t.style},[_.value&&((b=s.default)==null?void 0:b.call(s))]),[[bl,n.isSelected.value]])]}})),{groupItem:n}}}),Ni=be({...Ha()},"VTabsWindowItem"),Hi=ge()({name:"VTabsWindowItem",props:Ni(),setup(t,i){let{slots:s}=i;return we(()=>{const o=ca.filterProps(t);return c(ca,te({_as:"VTabsWindowItem"},o,{class:["v-tabs-window-item",t.class],style:t.style}),s)}),{}}});function Ui(t){return t?t.map(i=>kl(i)?i:{text:i,value:i}):[]}const xi=be({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...wl({mandatory:"force",selectedClass:"v-tab-item--selected"}),...ha(),...Ne()},"VTabs"),Fi=ge()({name:"VTabs",props:xi(),emits:{"update:modelValue":t=>!0},setup(t,i){let{attrs:s,slots:o}=i;const n=st(t,"modelValue"),l=V(()=>Ui(t.items)),{densityClasses:u}=ya(t),{backgroundColorClasses:m,backgroundColorStyles:r}=Ye(ie(t,"bgColor")),{scopeId:v}=ma();return Ct({VTab:{color:ie(t,"color"),direction:ie(t,"direction"),stacked:ie(t,"stacked"),fixed:ie(t,"fixedTabs"),sliderColor:ie(t,"sliderColor"),hideSlider:ie(t,"hideSlider")}}),we(()=>{const f=Jt.filterProps(t),h=!!(o.window||t.items.length>0);return c(j,null,[c(Jt,te(f,{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},u.value,m.value,t.class],style:[{"--v-tabs-height":We(t.height)},r.value,t.style],role:"tablist",symbol:Bt},v,s),{default:()=>{var p;return[((p=o.default)==null?void 0:p.call(o))??l.value.map(_=>{var b;return((b=o.tab)==null?void 0:b.call(o,{item:_}))??c(ht,te(_,{key:_.text,value:_.value}),{default:o[`tab.${_.value}`]?()=>{var $;return($=o[`tab.${_.value}`])==null?void 0:$.call(o,{item:_})}:void 0})})]}}),h&&c(Oi,te({modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,key:"tabs-window"},v),{default:()=>{var p;return[l.value.map(_=>{var b;return((b=o.item)==null?void 0:b.call(o,{item:_}))??c(Hi,{value:_.value},{default:()=>{var $;return($=o[`item.${_.value}`])==null?void 0:$.call(o,{item:_})}})}),(p=o.window)==null?void 0:p.call(o)]}})])}),{}}}),Yi=["onClick"],Xi={class:"main"},Gi={key:0,class:"main-media-details"},ji={key:0,class:"main-media-details-image"},Ki={class:"main-media-details-track-info"},Zi={key:0},Ji={key:0},eo={key:11,style:{margin:"auto","padding-top":"20px"}},to={key:1,class:"main-queue-items"},ao={class:"queue-items-scroll-box"},lo={class:"media-thumb listitem-media-thumb"},io={class:"d-flex"},oo={style:{"white-space":"nowrap"},class:"pr-1"},so={key:0},no={key:0,style:{"margin-left":"50px"}},ro={key:0,class:"text-caption"},uo={key:2,class:"main-queue-items"},co={class:"main-media-details-image main-media-details-image-alt"},mo={class:"player-bottom"},vo={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},po={class:"media-controls"},yo={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},fo={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},ho=Y({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(t){const{t:i}=Pl(),{name:s}=kt(),o=t,n=new ft,l=A(-1),u=new ft,m=A([]),r=A(0),v=A(!1),f=V(()=>a.activePlayerQueue?m.value.slice(a.activePlayerQueue.current_index):[]),h=V(()=>a.activePlayerQueue?m.value.slice(0,a.activePlayerQueue.current_index).reverse():[]),p=V(()=>{switch(s.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return a.showQueueItems?"1.5em":"2.5em";case"xl":return a.showQueueItems?"1.6em":"3em";case"xxl":return a.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),_=V(()=>{switch(s.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return a.showQueueItems?"1.0em":"1.6em";case"xl":return a.showQueueItems?"1.2em":"2em";case"xxl":return a.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),b=V(()=>it.display.height.value>800),$=function(S){a.showFullscreenPlayer=!1,lt.push({name:S.media_type,params:{itemId:S.item_id,provider:S.provider}})},q=function(S){a.globalSearchTerm=S,lt.push({name:"search"}),a.showFullscreenPlayer=!1},E=function(S,k){var ae,Z,ce,_e,ke,G,ve;const R=m.value.indexOf(k),X=[{label:"play_now",labelArgs:[],action:()=>{N(k,"play_now")},icon:"mdi-play-circle-outline",disabled:R===((ae=a.activePlayerQueue)==null?void 0:ae.current_index)||R===((Z=a.activePlayerQueue)==null?void 0:Z.index_in_buffer)},{label:"play_next",labelArgs:[],action:()=>{N(k,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:R<=(((ce=a.activePlayerQueue)==null?void 0:ce.index_in_buffer)||0)},{label:"queue_move_up",labelArgs:[],action:()=>{N(k,"up")},icon:"mdi-arrow-up",disabled:R<=(((_e=a.activePlayerQueue)==null?void 0:_e.index_in_buffer)||0)},{label:"queue_move_down",labelArgs:[],action:()=>{N(k,"down")},icon:"mdi-arrow-down",disabled:R<=(((ke=a.activePlayerQueue)==null?void 0:ke.index_in_buffer)||0)},{label:"queue_delete",labelArgs:[],action:()=>{N(k,"delete")},icon:"mdi-delete",disabled:R<=(((G=a.activePlayerQueue)==null?void 0:G.index_in_buffer)||0)}];((ve=k==null?void 0:k.media_item)==null?void 0:ve.media_type)==H.TRACK&&X.push({label:"show_info",labelArgs:[],action:()=>{$(k.media_item)},icon:"mdi-information-outline",disabled:!1}),Be.emit("contextmenu",{items:X,posX:S.clientX,posY:S.clientY})},O=function(S){a.activePlayer&&Be.emit("contextmenu",{items:Ra(a.activePlayer,a.activePlayerQueue),posX:S.clientX,posY:S.clientY})},N=function(S,k){var R,X,ae,Z,ce;!S||!a.activePlayerQueue||(k=="play_now"?w.queueCommandPlayIndex((R=a.activePlayerQueue)==null?void 0:R.queue_id,S.queue_item_id):k=="move_next"?w.queueCommandMoveNext((X=a.activePlayerQueue)==null?void 0:X.queue_id,S.queue_item_id):k=="up"?w.queueCommandMoveUp((ae=a.activePlayerQueue)==null?void 0:ae.queue_id,S.queue_item_id):k=="down"?w.queueCommandMoveDown((Z=a.activePlayerQueue)==null?void 0:Z.queue_id,S.queue_item_id):k=="delete"&&w.queueCommandDelete((ce=a.activePlayerQueue)==null?void 0:ce.queue_id,S.queue_item_id))},L=async function(){v.value=!0,m.value=[],await ea(100),v.value=!1},D=async function({done:S}){var ae;if(!a.activePlayerQueue||a.activePlayerQueue.items==0){S("empty");return}if(m.value.length>=((ae=a.activePlayerQueue)==null?void 0:ae.items)){S("empty");return}const k=m.value.length,R=(a.activePlayerQueue.current_index||0)+50,X=await w.getPlayerQueueItems(a.activePlayerQueue.queue_id,R,k);m.value.push(...X),X.length<50?S("empty"):S("ok")};Oe(()=>{const S=w.subscribe(Cl.QUEUE_ITEMS_UPDATED,k=>{var R;k.object_id==((R=a.activePlayerQueue)==null?void 0:R.queue_id)&&(k.data,L())});Je(S)});const M=async function(S){var X;if(!((X=a.curQueueItem)!=null&&X.media_item))return;if(!a.curQueueItem.media_item.favorite){w.toggleFavorite(a.curQueueItem.media_item);return}let k=a.curQueueItem.media_item;(k.provider!="library"||!("provider_mappings"in k))&&[H.ALBUM,H.ARTIST,H.AUDIOBOOK,H.PLAYLIST,H.PODCAST,H.RADIO,H.TRACK].includes(k.media_type)&&(k=await w.getLibraryItem(k.media_type,k.item_id,k.provider)||k);const R=[];"favorite"in k&&k.favorite&&k.provider=="library"&&[H.ALBUM,H.ARTIST,H.AUDIOBOOK,H.PLAYLIST,H.PODCAST,H.RADIO,H.TRACK].includes(k.media_type)&&R.push({label:"favorites_remove",labelArgs:[],action:()=>{w.removeItemFromFavorites(k.media_type,k.item_id),k.favorite=!1,a.curQueueItem.media_item.favorite=!1},icon:"mdi-heart"}),[H.ALBUM,H.ARTIST,H.AUDIOBOOK,H.PLAYLIST,H.PODCAST,H.RADIO,H.TRACK].includes(k.media_type)&&R.push({label:"add_playlist",labelArgs:[],action:()=>{Be.emit("playlistdialog",{items:[a.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}),Be.emit("contextmenu",{items:R,posX:S.clientX,posY:S.clientY})},B=function(){v.value=!0,ea(100).then(()=>{v.value=!1})},W=function(S,k){w.playMedia(S.uri,Il.PLAY,void 0,k.position.toString())};oe(()=>a.activePlayerId,S=>{L()},{immediate:!0});const z=A(void 0),U=A(void 0);return _t(()=>{const S=tt("white"),k=tt("black"),R=5,X=.05,ae=it.theme.current.value.dark?o.colorPalette.darkColor||"#000":o.colorPalette.lightColor||"#fff";let Z=tt(ae);const ce=S.contrast(Z),_e=k.contrast(Z),ke=ce>=_e;let G=ke?S:k,ve=Math.max(ce,_e);if(ve<R){let Ce=X;for(;ve<R&&Ce<=.5;)ke?Z=Z.darken(X):Z=Z.lighten(X),ve=tt(G).contrast(Z),Ce+=X}document.documentElement.style.setProperty("--text-color",G.hex()),z.value=G.hex(),U.value=Z.hex()}),(S,k)=>(d(),C(Va,{modelValue:e(a).showFullscreenPlayer,"onUpdate:modelValue":k[12]||(k[12]=R=>e(a).showFullscreenPlayer=R),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999"},{default:y(()=>[c(je,{color:U.value},{default:y(()=>{var R,X,ae,Z,ce,_e,ke,G,ve,Ce,He,Et,At,Lt,qt,zt,Rt,Dt,Wt,Ot,Nt,Ht,Ut,xt,Ft,Yt,Xt,Gt,jt;return[c(Nl,{class:"v-toolbar-default",color:"transparent"},{prepend:y(()=>[c(ne,{icon:"",onClick:k[0]||(k[0]=T=>e(a).showFullscreenPlayer=!1)},{default:y(()=>[c(F,{icon:"mdi-chevron-down"})]),_:1})]),append:y(()=>{var T;return[(T=e(a).activePlayerQueue)!=null&&T.radio_source.length?(d(),C($t,{key:0,scrim:""},{activator:y(({props:K})=>[c(ne,te(K,{icon:""}),{default:y(()=>[c(F,{color:"accent",icon:"mdi-radio-tower"})]),_:2},1040)]),default:y(()=>[c(je,{title:e(se)("queue_radio_enabled"),subtitle:e(se)("queue_radio_based_on")},{text:y(()=>{var K;return[(d(!0),g(j,null,re((K=e(a).activePlayerQueue)==null?void 0:K.radio_source,pe=>(d(),g("div",{key:pe.uri},[Q("a",{onClick:qe=>$(pe)},I(pe.name),9,Yi)]))),128))]}),_:1},8,["title","subtitle"])]),_:1})):P("",!0),b.value?P("",!0):(d(),C(za,{key:1})),c(ne,{icon:"",onClick:ue(O,["stop"])},{default:y(()=>[c(F,{icon:"mdi-dots-vertical"})]),_:1})]}),_:1}),Q("div",Xi,[e(J)("bp7")||!e(a).showQueueItems?(d(),g("div",Gi,[S.$vuetify.display.height>600?(d(),g("div",ji,[((R=e(a).activePlayer)==null?void 0:R.powered)!=!1&&!((X=e(a).curQueueItem)!=null&&X.image)&&((Z=(ae=e(a).activePlayer)==null?void 0:ae.current_media)!=null&&Z.image_url)?(d(),C(Xe,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(a).activePlayer.current_media.image_url},null,8,["src"])):((ce=e(a).activePlayer)==null?void 0:ce.powered)!=!1?(d(),C(De,{key:1,item:e(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"},fallback:S.$vuetify.theme.current.dark?e(Ke):e(pt)},null,8,["item","fallback"])):(d(),C(Xe,{key:2,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:S.$vuetify.theme.current.dark?e(Ke):e(pt)},null,8,["src"]))])):P("",!0),Q("div",Ki,[((_e=e(a).activePlayer)==null?void 0:_e.powered)==!1?(d(),C(Ue,{key:0,style:ee(`font-size: ${p.value};`)},{default:y(()=>{var T;return[x(I((T=e(a).activePlayer)==null?void 0:T.display_name),1)]}),_:1},8,["style"])):(ke=e(a).curQueueItem)!=null&&ke.media_item?(d(),C(Ue,{key:1,style:ee(`font-size: ${p.value};cursor:pointer;`),onClick:k[1]||(k[1]=T=>$(e(a).curQueueItem.media_item))},{default:y(()=>[c(fe,{sync:e(n)},{default:y(()=>[x(I(e(a).curQueueItem.media_item.name)+" ",1),"version"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.version?(d(),g("span",Zi,"("+I(e(a).curQueueItem.media_item.version)+")",1)):P("",!0)]),_:1},8,["sync"])]),_:1},8,["style"])):!e(a).activePlayerQueue&&((ve=(G=e(a).activePlayer)==null?void 0:G.current_media)!=null&&ve.title)?(d(),C(Ue,{key:2},{default:y(()=>{var T,K,pe,qe;return[(K=(T=e(a).activePlayer)==null?void 0:T.current_media)!=null&&K.artist?(d(),g("div",Ji,[c(fe,{sync:e(n)},{default:y(()=>{var Ie,Ve;return[x(I((Ve=(Ie=e(a).activePlayer)==null?void 0:Ie.current_media)==null?void 0:Ve.artist),1)]}),_:1},8,["sync"])])):P("",!0),(qe=(pe=e(a).activePlayer)==null?void 0:pe.current_media)!=null&&qe.title?(d(),g("div",{key:1,style:ee(`font-size: ${_.value};`)},[c(fe,{sync:e(n)},{default:y(()=>{var Ie,Ve;return[x(I((Ve=(Ie=e(a).activePlayer)==null?void 0:Ie.current_media)==null?void 0:Ve.title),1)]}),_:1},8,["sync"])],4)):P("",!0)]}),_:1})):(d(),C(Ue,{key:3,style:ee(`font-size: ${p.value};cursor:pointer;`),onClick:k[2]||(k[2]=T=>e(a).showPlayersMenu=!0)},{default:y(()=>[c(fe,{sync:e(n)},{default:y(()=>{var T;return[x(I(((T=e(a).activePlayer)==null?void 0:T.display_name)||e(se)("no_player")),1)]}),_:1},8,["sync"])]),_:1},8,["style"])),((Ce=e(a).activePlayer)==null?void 0:Ce.powered)==!1?(d(),C(Me,{key:4,class:"text-h6 text-md-h5 text-lg-h4"},{default:y(()=>[x(I(e(se)("off")),1)]),_:1})):P("",!0),(Et=(He=e(a).curQueueItem)==null?void 0:He.streamdetails)!=null&&Et.stream_title&&((At=e(a).activePlayer)==null?void 0:At.powered)!=!1?(d(),C(Me,{key:5,class:"text-h6 text-md-h5 text-lg-h4",onClick:k[3]||(k[3]=T=>{var K,pe;return q((pe=(K=e(a).curQueueItem)==null?void 0:K.streamdetails)==null?void 0:pe.stream_title)})},{default:y(()=>[c(fe,{sync:e(n)},{default:y(()=>[x(I(e(a).curQueueItem.streamdetails.stream_title),1)]),_:1},8,["sync"])]),_:1})):P("",!0),(Lt=e(a).curQueueItem)!=null&&Lt.media_item&&"album"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.album&&((qt=e(a).activePlayer)==null?void 0:qt.powered)!=!1?(d(),C(Me,{key:6,style:ee(`font-size: ${_.value};cursor:pointer;`),onClick:k[4]||(k[4]=T=>$(e(a).curQueueItem.media_item.album))},{default:y(()=>[c(fe,{sync:e(n)},{default:y(()=>[x(I(e(a).curQueueItem.media_item.album.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):P("",!0),(zt=e(a).curQueueItem)!=null&&zt.media_item&&"artists"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.artists.length&&((Rt=e(a).activePlayer)==null?void 0:Rt.powered)!=!1?(d(),C(Me,{key:7,style:ee(`font-size: ${_.value};cursor:pointer;`),onClick:k[5]||(k[5]=T=>$(e(a).curQueueItem.media_item.artists[0]))},{default:y(()=>[c(fe,{sync:e(n)},{default:y(()=>[x(I(e(a).curQueueItem.media_item.artists[0].name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):P("",!0),(Dt=e(a).curQueueItem)!=null&&Dt.media_item&&"podcast"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.podcast?(d(),C(Me,{key:8,style:ee(`font-size: ${_.value};`)},{default:y(()=>[c(fe,{sync:e(n)},{default:y(()=>[x(I(e(a).curQueueItem.media_item.podcast.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):e(a).activePlayer&&((Wt=e(a).activePlayer)==null?void 0:Wt.active_source)!=((Ot=e(a).activePlayer)==null?void 0:Ot.player_id)&&((Nt=e(a).activePlayer)==null?void 0:Nt.powered)!=!1?(d(),C(Me,{key:9},{default:y(()=>[x(I(e(se)("external_source_active",[e(Qt)(e(a).activePlayer)])),1)]),_:1})):e(a).activePlayerQueue&&e(a).activePlayerQueue.items==0&&((Ht=e(a).activePlayer)==null?void 0:Ht.powered)!=!1?(d(),C(Me,{key:10,style:ee(`font-size: ${_.value}`)},{default:y(()=>[x(I(e(se)("queue_empty")),1)]),_:1},8,["style"])):P("",!0),((Ut=e(a).activePlayer)==null?void 0:Ut.powered)!=!1?(d(),g("div",eo,[c(ka)])):P("",!0)])])):P("",!0),e(a).showQueueItems?(d(),g("div",to,[c(Fi,{modelValue:r.value,"onUpdate:modelValue":k[6]||(k[6]=T=>r.value=T),"hide-slider":"",density:"compact",onClick:B},{default:y(()=>[c(ht,{value:0},{default:y(()=>{var T,K;return[x(I(e(se)("queue"))+" ",1),c(yt,{color:"grey",content:(((T=e(a).activePlayerQueue)==null?void 0:T.items)||0)-(((K=e(a).activePlayerQueue)==null?void 0:K.current_index)||0),inline:""},null,8,["content"])]}),_:1}),c(ht,{value:1},{default:y(()=>{var T;return[x(I(e(se)("played"))+" ",1),c(yt,{color:"grey",content:(T=e(a).activePlayerQueue)==null?void 0:T.current_index,inline:""},null,8,["content"])]}),_:1})]),_:1},8,["modelValue"]),Q("div",ao,[v.value?P("",!0):(d(),C(Rl,{key:0,onLoad:D,"empty-text":"",height:"100%"},{default:y(()=>[c(Hl,{"item-height":70,"max-height":"90%",items:r.value==0?f.value:h.value},{default:y(({item:T,index:K})=>{var pe,qe,Ie,Ve,Kt;return[c(xa,{link:"","show-menu-btn":!0,onClick:ue(ye=>E(ye,T),["stop"]),onMenu:ue(ye=>E(ye,T),["stop"]),onMouseenter:ye=>l.value=K,onMouseleave:k[7]||(k[7]=ye=>l.value=-1)},{prepend:y(()=>[Q("div",lo,[c(De,{size:"50",item:T},null,8,["item"])])]),title:y(()=>[c(fe,{sync:K==0&&r.value==0?e(n):e(u),disabled:!(K==0&&r.value==0||l.value==K)},{default:y(()=>[x(I(T.name),1)]),_:2},1032,["sync","disabled"])]),subtitle:y(()=>[Q("div",io,[Q("span",oo,I(e(Fe)(T.duration))+" | ",1),c(fe,{sync:K==0&&r.value==0?e(n):e(u),disabled:!(K==0&&r.value==0||l.value==K)},{default:y(()=>[T.media_item&&"album"in T.media_item&&T.media_item.album?(d(),g("span",so,I(T.media_item.album.name),1)):P("",!0)]),_:2},1032,["sync","disabled"])])]),_:2},1032,["onClick","onMenu","onMouseenter"]),T.queue_item_id==((pe=e(a).curQueueItem)==null?void 0:pe.queue_item_id)&&((Ve=(Ie=(qe=T.media_item)==null?void 0:qe.metadata)==null?void 0:Ie.chapters)!=null&&Ve.length)?(d(),g("div",no,[(d(!0),g(j,null,re((Kt=T.media_item.metadata)==null?void 0:Kt.chapters,ye=>(d(),C(he,{key:ye.position,onClick:ue(Ls=>W(T.media_item,ye),["stop"])},{title:y(()=>[Q("div",null,I(ye.name),1)]),append:y(()=>[ye.end?(d(),g("span",ro,I(e(Fe)(ye.end-ye.start)),1)):P("",!0)]),_:2},1032,["onClick"]))),128))])):P("",!0)]}),_:1},8,["items"])]),_:1}))])])):P("",!0),!e(a).showQueueItems&&S.$vuetify.display.height<=600?(d(),g("div",uo,[Q("div",co,[c(De,{item:e(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"}},null,8,["item"])])])):P("",!0)]),Q("div",mo,[Q("div",vo,[c(Ta,{"show-labels":!0,color:z.value},null,8,["color"])]),Q("div",po,[e(a).activePlayerQueue?(d(),C(Le,{key:0,disabled:!((xt=e(a).curQueueItem)!=null&&xt.media_item),icon:(Yt=(Ft=e(a).curQueueItem)==null?void 0:Ft.media_item)!=null&&Yt.favorite?"mdi-heart":"mdi-heart-outline",title:e(se)("tooltip.favorite"),type:"btn",class:"media-controls-item","max-height":"30px",onClick:M},null,8,["disabled","icon","title"])):P("",!0),S.$vuetify.display.mdAndUp?(d(),C(Ba,{key:1,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):P("",!0),c(Aa,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),c(Ea,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"100px"},null,8,["player","player-queue"]),c(La,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),S.$vuetify.display.mdAndUp?(d(),C(Ma,{key:2,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):P("",!0),e(a).activePlayerQueue?(d(),C(qa,{key:3,class:"media-controls-item","max-height":"30px"})):P("",!0)]),e(a).activePlayer?(d(),g("div",yo,[c(Ze,{width:"100%","is-powered":((Xt=e(a).activePlayer)==null?void 0:Xt.powered)!=!1,disabled:!e(a).activePlayer||!((Gt=e(a).activePlayer)!=null&&Gt.available),"model-value":Math.round(((jt=e(a).activePlayer)==null?void 0:jt.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus",color:z.value,"allow-wheel":!0,"onUpdate:modelValue":k[8]||(k[8]=T=>e(a).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolume(e(a).activePlayerId,T):e(w).playerCommandVolumeSet(e(a).activePlayerId,T)),"onClick:prepend":k[9]||(k[9]=T=>e(a).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolumeDown(e(a).activePlayerId):e(w).playerCommandVolumeDown(e(a).activePlayerId)),"onClick:append":k[10]||(k[10]=T=>e(a).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolumeUp(e(a).activePlayerId):e(w).playerCommandVolumeUp(e(a).activePlayerId))},null,8,["is-powered","disabled","model-value","color"])])):P("",!0),b.value?(d(),g("div",fo,[c(Te,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:k[11]||(k[11]=T=>e(a).showPlayersMenu=!0)},{default:y(()=>{var T;return[c(F,{icon:((T=e(a).activePlayer)==null?void 0:T.icon)||"mdi-speaker"},null,8,["icon"]),x(" "+I(e(a).activePlayer?e(rt)(e(a).activePlayer):""),1)]}),_:1})])):P("",!0)])]}),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),_o=de(ho,[["__scopeId","data-v-f12cbe1c"]]),go={key:1},bo={key:2,class:"icon-thumb"},wo={key:0},ko={key:2},Po={key:3},Co={key:4},Io={key:0,class:"pl-4"},Vo={key:0},So={key:1},$o={key:2},Qo={key:3},To={key:4,class:"line-clamp-1"},Mo={key:5,class:"line-clamp-1"},Bo={key:6},Eo={key:7,class:"line-clamp-1"},Ao={key:8,class:"line-clamp-1"},Lo={key:0},qo=Y({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(t){const i=new ft,s=t,o=V(()=>{var n,l;return(l=(n=a.activePlayerQueue)==null?void 0:n.current_item)==null?void 0:l.streamdetails});return(n,l)=>(d(),g(j,null,[c(he,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:y(()=>{var u,m,r,v,f,h,p,_,b,$;return[Q("div",{class:"media-thumb player-media-thumb",style:ee(`cursor: pointer;height: ${e(J)({breakpoint:"phone"})?50:64}px; width: ${e(J)({breakpoint:"phone"})?50:64}px; `),onClick:l[0]||(l[0]=q=>e(a).showFullscreenPlayer=!0)},[((u=e(a).activePlayer)==null?void 0:u.powered)!=!1&&((m=e(a).curQueueItem)!=null&&m.media_item||(r=e(a).curQueueItem)!=null&&r.image)?(d(),C(De,{key:0,item:((v=e(a).curQueueItem)==null?void 0:v.media_item)||e(a).curQueueItem,fallback:e(Ke)},null,8,["item","fallback"])):((f=e(a).activePlayer)==null?void 0:f.powered)!=!1&&((p=(h=e(a).activePlayer)==null?void 0:h.current_media)!=null&&p.image_url)?(d(),g("div",go,[c(Xe,{class:"media-thumb",style:{"border-radius":"4px"},size:"55",src:e(a).activePlayer.current_media.image_url},null,8,["src"])])):(d(),g("div",bo,[c(F,{size:"35",icon:((_=e(a).activePlayer)==null?void 0:_.type)==e(Qe).PLAYER&&((b=e(a).activePlayer)!=null&&b.group_childs.length)?"mdi-speaker-multiple":(($=e(a).activePlayer)==null?void 0:$.icon)||"mdi-speaker",style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))],4)]}),title:y(()=>{var u,m,r,v,f,h;return[Q("div",{style:ee({cursor:"pointer",color:n.primaryColor})},[((u=e(a).activePlayer)==null?void 0:u.powered)==!1?(d(),g("div",{key:0,onClick:l[1]||(l[1]=p=>e(a).showPlayersMenu=!0)},I((m=e(a).activePlayer)==null?void 0:m.display_name),1)):(r=e(a).curQueueItem)!=null&&r.media_item?(d(),g("div",{key:1,onClick:l[2]||(l[2]=p=>e(a).showFullscreenPlayer=!0)},[c(fe,{sync:e(i)},{default:y(()=>[x(I(e(a).curQueueItem.media_item.name)+" ",1),"version"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.version?(d(),g("span",wo,"("+I(e(a).curQueueItem.media_item.version)+")",1)):P("",!0)]),_:1},8,["sync"])])):e(a).curQueueItem?(d(),g("div",ko,I(e(a).curQueueItem.name),1)):!e(a).activePlayerQueue&&((f=(v=e(a).activePlayer)==null?void 0:v.current_media)!=null&&f.title)?(d(),g("div",Po,I(e(a).activePlayer.current_media.title),1)):e(a).activePlayer?(d(),g("div",Co,I((h=e(a).activePlayer)==null?void 0:h.display_name),1)):(d(),g("div",{key:5,onClick:l[3]||(l[3]=p=>e(a).showPlayersMenu=!0)},I(n.$t("no_player")),1))],4)]}),append:y(()=>{var u;return[(u=o.value)!=null&&u.audio_format.content_type&&!e(J)({breakpoint:"phone"})&&n.showQualityDetailsBtn?(d(),g("div",Io,[c(ka)])):P("",!0)]}),subtitle:y(()=>{var u;return[Q("div",{style:ee({cursor:"pointer",color:n.primaryColor}),class:"line-clamp-1",onClick:l[4]||(l[4]=m=>e(a).showFullscreenPlayer=!0)},[c(fe,{sync:e(i)},{default:y(()=>{var m,r,v,f,h,p,_,b,$,q,E,O,N,L,D;return[((m=e(a).activePlayer)==null?void 0:m.powered)==!1?(d(),g("div",Vo,I(n.$t("off")),1)):e(a).curQueueItem&&((r=e(a).curQueueItem.media_item)==null?void 0:r.media_type)==e(H).TRACK&&"album"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.album&&!s.showOnlyArtist?(d(),g("div",So,I(e(Pa)(e(a).curQueueItem.media_item.artists))+" • "+I(e(a).curQueueItem.media_item.album.name),1)):(v=e(a).curQueueItem)!=null&&v.media_item&&"artists"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.artists.length>0?(d(),g("div",$o,I(e(a).curQueueItem.media_item.artists[0].name),1)):(f=e(a).curQueueItem)!=null&&f.media_item&&"podcast"in e(a).curQueueItem.media_item&&((h=e(a).curQueueItem.media_item.podcast)!=null&&h.name)?(d(),g("div",Qo,I(e(a).curQueueItem.media_item.podcast.name),1)):(_=(p=e(a).curQueueItem)==null?void 0:p.streamdetails)!=null&&_.stream_title?(d(),g("div",To,I(($=(b=e(a).curQueueItem)==null?void 0:b.streamdetails)==null?void 0:$.stream_title),1)):(E=(q=e(a).curQueueItem)==null?void 0:q.media_item)!=null&&E.metadata.description?(d(),g("div",Mo,I(e(Ca)(e(a).curQueueItem.media_item.metadata.description,100)),1)):!e(a).activePlayerQueue&&((O=e(a).activePlayer)!=null&&O.active_source)&&((L=(N=e(a).activePlayer)==null?void 0:N.current_media)!=null&&L.artist)?(d(),g("div",Bo,I(e(a).activePlayer.current_media.artist),1)):!e(a).activePlayerQueue&&((D=e(a).activePlayer)!=null&&D.active_source)?(d(),g("div",Eo,I(n.$t("external_source_active",[e(Qt)(e(a).activePlayer)])),1)):e(a).activePlayerQueue&&e(a).activePlayerQueue.items==0?(d(),g("div",Ao,I(n.$t("queue_empty")),1)):P("",!0)]}),_:1},8,["sync"]),e(a).activePlayer&&((u=e(a).activePlayer)==null?void 0:u.powered)!=!1?(d(),g("div",Lo,I(e(rt)(e(a).activePlayer)),1)):P("",!0)],4)]}),_:1}),c(_o,{"show-fullscreen":e(a).showFullscreenPlayer,"color-palette":n.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),zo={key:1,class:"text-caption volumecaption"},Ro={key:0,class:"text-caption volumecaption"},Do=Y({__name:"VolumeControl",props:{player:{},showSyncControls:{type:Boolean},showSubPlayers:{type:Boolean},showHeadingRow:{type:Boolean},showVolumeControl:{type:Boolean},allowWheel:{type:Boolean}},setup(t){const i=t,s=A([]),o=A([]),n=A(void 0),l=V(()=>i.player.group_childs.length>0),u=function(r){var f,h;const v=[];for(const p of r.group_childs){const _=(f=w)==null?void 0:f.players[p];_&&_.volume_control!=me&&_&&_.available&&!v.includes(_)&&v.push(_)}if(i.showSyncControls&&r.supported_features.includes($e.SET_MEMBERS))for(const p of Object.values((h=w)==null?void 0:h.players))p.player_id!=r.player_id&&(!r.can_group_with.includes(p.player_id)&&!r.can_group_with.includes(p.provider)||p.available&&(p.active_group&&p.active_group!=r.player_id||p.active_source&&p.state==Se.PLAYING&&![r.player_id,p.player_id].includes(p.active_source)||v.includes(p)||v.push(p)));return v.sort((p,_)=>p.display_name.toUpperCase()>_.display_name.toUpperCase()?1:-1),v},m=async function(r,v){const f=i.player.player_id;v?(o.value.includes(r)&&(o.value=o.value.filter(h=>h!=r)),s.value.includes(r)||s.value.push(r),w.players[f].group_childs.push(r)):(s.value.includes(r)&&(s.value=s.value.filter(h=>h!=r)),o.value.includes(r)||o.value.push(r),w.players[f].group_childs=w.players[f].group_childs.filter(h=>h!=r)),n.value!=null&&clearTimeout(n.value),n.value=setTimeout(async()=>{o.value.length>0&&w.playerCommandUnGroupMany(o.value).catch(async()=>{w.players[f]=await w.getPlayer(f)}).finally(()=>{o.value=[]}),s.value.length>0&&w.playerCommandGroupMany(f,s.value).catch(async()=>{w.players[f]=await w.getPlayer(f)}).finally(()=>{s.value=[]})},1e3)};return(r,v)=>(d(),C(Ee,{style:{overflow:"hidden",padding:"0"},lines:"two"},{default:y(()=>[r.showHeadingRow?(d(),C(he,{key:0,class:"volumesliderrow heading",link:!1,style:ee(r.player.powered==!1?"opacity: 0.6":"opacity: 1")},{prepend:y(()=>[c(F,{size:25,icon:r.player.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:y(()=>[Q("h5",null,I(e(rt)(r.player,27)),1)]),append:y(()=>[r.player.power_control!=e(me)?(d(),C(ne,{key:0,class:"powerbtn",variant:"icon",onClick:v[0]||(v[0]=ue(f=>e(w).playerCommandPowerToggle(r.player.player_id),["stop"]))},{default:y(()=>[c(F,{size:25,icon:"mdi-power"})]),_:1})):P("",!0)]),_:1},8,["style"])):P("",!0),r.showVolumeControl&&(r.player.volume_control!=e(me)||r.player.group_childs.length)?(d(),C(he,{key:1,class:"volumesliderrow",link:!1,style:ee(r.player.powered==!1?"opacity: 0.35":"opacity: 0.75")},{prepend:y(()=>[c(ne,{icon:"",style:{height:"25px"},disabled:r.player.type==e(Qe).GROUP||r.player.group_childs.length>0||r.player.mute_control==e(me),onClick:v[1]||(v[1]=ue(f=>e(w).playerCommandMuteToggle(r.player.player_id),["stop"]))},{default:y(()=>[c(F,{size:25,icon:r.player.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:1},8,["disabled"])]),default:y(()=>[r.player.volume_control!=e(me)||r.player.group_childs.length?(d(),C(Ze,{key:0,color:"secondary",width:"100%","is-powered":r.player.powered!=!1,disabled:!r.player.available,"model-value":Math.round(r.player.group_childs.length?r.player.group_volume:r.player.volume_level||0),onClick:v[2]||(v[2]=ue(()=>{},["stop"])),"onUpdate:modelValue":v[3]||(v[3]=f=>r.player.group_childs.length>0?e(w).playerCommandGroupVolume(r.player.player_id,f):e(w).playerCommandVolumeSet(r.player.player_id,f))},null,8,["is-powered","disabled","model-value"])):P("",!0)]),append:y(()=>[l.value&&!r.showSubPlayers?(d(),C(F,{key:0,class:"expandbtn"},{default:y(()=>v[7]||(v[7]=[x(" mdi-chevron-down ")])),_:1})):(d(),g("div",zo,I(Math.round(r.player.group_childs.length?r.player.group_volume:r.player.volume_level||0)),1))]),_:1},8,["style"])):P("",!0),r.showSubPlayers&&(r.player.group_childs.length>0||r.showSyncControls)&&u(r.player).length>0?(d(),g("div",{key:2,onClick:v[6]||(v[6]=ue(()=>{},["stop"]))},[c(Ge,{style:{"margin-top":"10px","margin-bottom":"15px"}}),(d(!0),g(j,null,re(u(r.player),f=>(d(),g("div",{key:f.player_id},[c(he,{class:"volumesliderrow",link:!1,style:ee(f.powered!=!1||r.showSyncControls?"opacity: 0.75":"opacity: 0.4"),onClick:v[4]||(v[4]=ue(()=>{},["stop"]))},{prepend:y(()=>[c(F,{size:30,icon:f.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:y(()=>[Q("h6",null,I(e(Ca)(f.display_name,27)),1)]),append:y(()=>[r.showSyncControls?(d(),C(Ul,{key:0,ripple:!1,disabled:f.player_id==r.player.player_id,"model-value":r.player.group_childs.includes(f.player_id)||f.player_id==r.player.player_id,size:"22",class:"checkbox","onUpdate:modelValue":h=>m(f.player_id,h)},null,8,["disabled","model-value","onUpdate:modelValue"])):P("",!0)]),_:2},1032,["style"]),f.volume_control!=e(me)?(d(),C(he,{key:0,class:"volumesliderrow",link:!1,style:ee(f.powered==!1?"opacity: 0.4":"opacity: 0.75"),onClick:v[5]||(v[5]=ue(()=>{},["stop"]))},{prepend:y(()=>[c(ne,{icon:"",disabled:!f.available||f.mute_control==e(me),style:{height:"25px"},onClick:h=>e(w).playerCommandMuteToggle(f.player_id)},{default:y(()=>[c(F,{size:25,icon:f.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:2},1032,["disabled","onClick"])]),default:y(()=>[f.volume_control!=e(me)?(d(),C(Ze,{key:0,color:"secondary",width:"100%","is-powered":f.powered!=!1,disabled:!f.available,"allow-wheel":r.allowWheel,"model-value":Math.round(f.volume_level||0),"onUpdate:modelValue":h=>e(w).playerCommandVolumeSet(f.player_id,h)},null,8,["is-powered","disabled","allow-wheel","model-value","onUpdate:modelValue"])):P("",!0)]),append:y(()=>[f.volume_control!=e(me)?(d(),g("div",Ro,I(f.volume_level),1)):P("",!0)]),_:2},1032,["style"])):P("",!0),v[8]||(v[8]=Q("div",{style:{height:"14px"}},null,-1))]))),128))])):P("",!0)]),_:1}))}}),Ua=de(Do,[["__scopeId","data-v-a2a4ac06"]]),Wo={key:0},Oo={key:0},No={class:"text-caption"},Ho={key:1},Uo=Y({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(t){const i=t,s=A(!1);return(o,n)=>i.isVisible&&e(a).activePlayer?(d(),g("div",Wo,[c($t,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=l=>s.value=l),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:o.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:y(({props:l})=>{var u,m;return[e(J)("bp6")||!o.responsiveVolumeSize?(d(),g("div",Oo,[c(Ze,{style:"margin-right: 0px; margin-left: 0px;",width:o.volumeSize,"is-powered":!0,"model-value":e(a).activePlayer.group_childs.length>0?Math.round(((u=e(a).activePlayer)==null?void 0:u.group_volume)||0):Math.round(((m=e(a).activePlayer)==null?void 0:m.volume_level)||0),"allow-wheel":!0,"onUpdate:modelValue":n[0]||(n[0]=r=>{var v,f;return e(a).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolume(((v=e(a).activePlayer)==null?void 0:v.player_id)||"",r):e(w).playerCommandVolumeSet(((f=e(a).activePlayer)==null?void 0:f.player_id)||"",r)})},{prepend:y(()=>[c(ne,te({variant:"icon",size:"48",ripple:!1},{...l}),{default:y(()=>{var r,v;return[c(F,{color:i.color?o.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),Q("div",No,I(e(a).activePlayer.group_childs.length>0?Math.round(((r=e(a).activePlayer)==null?void 0:r.group_volume)||0):Math.round(((v=e(a).activePlayer)==null?void 0:v.volume_level)||0)),1)]}),_:2},1040)]),_:2},1032,["width","model-value"])])):(d(),g("div",Ho,[c(ne,te({...l},{size:"48",variant:"icon"}),{default:y(()=>{var r,v;return[c(F,{color:i.color?o.color:"",icon:"mdi-volume-high"},null,8,["color"]),Q("div",{class:"text-caption",style:ee({color:i.color?o.color:""})},I(e(a).activePlayer.group_childs.length>0?Math.round(((r=e(a).activePlayer)==null?void 0:r.group_volume)||0):Math.round(((v=e(a).activePlayer)==null?void 0:v.volume_level)||0)),5)]}),_:2},1040)]))]}),default:y(()=>[c(je,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:y(()=>[e(a).activePlayer?(d(),C(Ua,{key:0,player:e(a).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"show-heading-row":!0,"show-volume-control":!0,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):P("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):P("",!0)}}),xo=de(Uo,[["__scopeId","data-v-f4084555"]]),Fo=Y({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(t){return(i,s)=>(d(),g(j,null,[i.player&&i.player.isVisible?(d(),C(za,{key:0,color:i.player.color},null,8,["color"])):P("",!0),i.queue&&i.queue.isVisible?(d(),C(qa,{key:1,color:i.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):P("",!0),i.volume&&i.volume.isVisible?(d(),C(xo,{key:2,color:i.volume.color,"volume-size":i.volume.volumeSize,"responsive-volume-size":i.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):P("",!0)],64))}}),Yo=["data-floating"],Xo=["data-mobile"],Go={class:"mediacontrols-left"},jo={class:"mediacontrols-bottom-center"},Ko={class:"mediacontrols-bottom-right"},Zo={key:0,class:"volume-slider"},Jo=Y({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(t){Sl(l=>({"4978018a":n.value})),pa();const{mobile:i}=kt({mobileBreakpoint:576}),s=A({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),o=new Image;o.src=it.theme.current.value.dark?Ke:pt,o.crossOrigin="Anonymous",o.addEventListener("load",function(){s.value=Vl(o)});const n=V(()=>it.theme.current.value.dark?s.value&&s.value.darkColor?s.value.darkColor+"26":"CCCCCC26":s.value&&s.value.lightColor?s.value.lightColor+"26":"CCCCCC26");return oe(()=>{var l;return(l=a.curQueueItem)==null?void 0:l.queue_item_id},()=>{var l;(l=a.curQueueItem)!=null&&l.media_item?o.src=ta(a.curQueueItem.media_item,aa.THUMB)||"":a.curQueueItem?o.src=ta(a.curQueueItem,aa.THUMB)||"":o.src=""}),(l,u)=>{var m,r,v,f,h,p,_,b,$,q,E;return d(),g(j,null,[Q("div",{class:"mediacontrols-bg","data-floating":l.useFloatingPlayer},null,8,Yo),Q("div",{class:"mediacontrols","data-mobile":e(i)},[Q("div",Go,[c(qo,{"show-quality-details-btn":!!e(J)("bp8"),"show-only-artist":!e(J)("bp7"),"color-palette":s.value,"primary-color":l.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),Q("div",jo,[c(ua,{"visible-components":{repeat:{isVisible:e(J)("bp3")},shuffle:{isVisible:e(J)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"},withCircle:l.useFloatingPlayer},previous:{isVisible:e(J)("bp3")},next:{isVisible:e(J)("bp3")}}},null,8,["visible-components"]),e(J)("bp6")?(d(),C(Ta,{key:0,"is-progress-bar":!1,disabled:!((m=e(a).activePlayerQueue)!=null&&m.active)||((f=(v=(r=e(a).activePlayerQueue)==null?void 0:r.current_item)==null?void 0:v.media_item)==null?void 0:f.media_type)!==e(H).TRACK},null,8,["disabled"])):P("",!0)]),Q("div",Ko,[Q("div",null,[c(Fo,{queue:{isVisible:e(J)("bp3"),color:l.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:l.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!e(i)&&(((h=e(a).activePlayer)==null?void 0:h.volume_control)!=e(me)||((p=e(a).activePlayer)==null?void 0:p.group_childs.length)>0),color:l.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),c(ua,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e(J)({breakpoint:"bp3",condition:"lt"}),withCircle:!1,icon:{staticWidth:"40px",staticHeight:"40px",color:l.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],8,Xo),e(i)&&(((_=e(a).activePlayer)==null?void 0:_.volume_control)!=e(me)||((b=e(a).activePlayer)==null?void 0:b.group_childs.length)>0)?(d(),g("div",Zo,[c(Ze,{width:"100%",color:"secondary","is-powered":(($=e(a).activePlayer)==null?void 0:$.powered)!=!1,disabled:!e(a).activePlayer||!((q=e(a).activePlayer)!=null&&q.available),"model-value":Math.round(((E=e(a).activePlayer)==null?void 0:E.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":u[0]||(u[0]=O=>e(a).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolume(e(a).activePlayerId,O):e(w).playerCommandVolumeSet(e(a).activePlayerId,O)),"onClick:prepend":u[1]||(u[1]=O=>e(a).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolumeDown(e(a).activePlayerId):e(w).playerCommandVolumeDown(e(a).activePlayerId)),"onClick:append":u[2]||(u[2]=O=>e(a).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolumeUp(e(a).activePlayerId):e(w).playerCommandVolumeUp(e(a).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):P("",!0)],64)}}}),es=de(Jo,[["__scopeId","data-v-e7d0fafb"]]),ts=be({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...St(),...Ae(),...Vt(),...Mt(),...It(),...Ne({tag:"footer"}),...et()},"VFooter"),as=ge()({name:"VFooter",props:ts(),setup(t,i){let{slots:s}=i;const o=A(),{themeClasses:n}=ot(t),{backgroundColorClasses:l,backgroundColorStyles:u}=Ye(ie(t,"color")),{borderClasses:m}=bt(t),{elevationClasses:r}=wt(t),{roundedClasses:v}=Pt(t),f=Pe(32),{resizeRef:h}=$l(_=>{_.length&&(f.value=_[0].target.clientHeight)}),p=V(()=>t.height==="auto"?f.value:parseInt(t.height,10));return xe(()=>t.app,()=>{const _=Tt({id:t.name,order:V(()=>parseInt(t.order,10)),position:V(()=>"bottom"),layoutSize:p,elementSize:V(()=>t.height==="auto"?void 0:p.value),active:V(()=>t.app),absolute:ie(t,"absolute")});_t(()=>{o.value=_.layoutItemStyles.value})}),we(()=>c(t.tag,{ref:h,class:["v-footer",n.value,l.value,m.value,r.value,v.value,t.class],style:[u.value,t.app?o.value:{height:We(t.height)},t.style]},s)),{}}}),ls=Y({__name:"Footer",setup(t){const i=V(()=>a.navigationMenuStyle=="horizontal"),s=V(()=>a.navigationMenuStyle!="horizontal"?0:a.isInStandaloneMode?100:80),o=V(()=>i.value?s.value+5:0);return(n,l)=>(d(),g(j,null,[i.value?(d(),g("div",{key:0,class:at(n.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:ee(`
      position: fixed;
      width: 100%;
      height: ${s.value+(e(J)("bp3")?100:70)}px;
      bottom: 0px;
      z-index: 999;
    `)},null,6)):P("",!0),e(a).navigationMenuStyle=="horizontal"?(d(),C(fi,{key:1,height:s.value},null,8,["height"])):P("",!0),c(as,{bottom:"",fixed:"",class:at(`d-flex flex-column ${i.value?"mediacontrols-player-float":"mediacontrols-player-default"}`),style:ee(`bottom: ${o.value}px;`),elevation:"10",app:""},{default:y(()=>[c(es,{"use-floating-player":i.value},null,8,["use-floating-player"])]),_:1},8,["class","style"])],64))}}),is={class:"player-media-thumb"},os={key:1},ss={key:2,class:"icon-thumb"},ns={style:{"margin-bottom":"3px"}},rs={key:0,style:{"font-size":"0.85rem","font-weight":"500","white-space":"nowrap"}},us={key:0},ds={key:0},cs={key:1},ms={key:2},vs={class:"v-list-item-subtitle",style:{"white-space":"nowrap"}},ps={key:0},ys={key:1},fs={key:2},hs={key:3},_s={key:4},gs={key:5},bs={key:6},ws=Y({__name:"PlayerCard",props:{player:{},showVolumeControl:{type:Boolean},showMenuButton:{type:Boolean},showSubPlayers:{type:Boolean},showSyncControls:{type:Boolean}},setup(t){const i=t,s=V(()=>{if(i.player&&i.player.active_source&&i.player.active_source in w.queues)return w.queues[i.player.active_source];if(i.player&&!i.player.active_source&&i.player.player_id in w.queues)return w.queues[i.player.player_id]}),o=V(()=>{if(s.value&&s.value.active)return s.value.current_item}),n=function(l){console.log("openPlayerMenu"),Be.emit("contextmenu",{items:Ra(i.player,s.value),posX:l.clientX,posY:l.clientY})};return(l,u)=>(d(),C(je,{flat:"",class:at(["panel-item",{"panel-item-selected":l.player.player_id==e(a).activePlayerId,"panel-item-idle":l.player.state==e(Se).IDLE,"panel-item-off":l.player.powered==!1}]),ripple:!1,disabled:!l.player.available},{default:y(()=>[c(he,{class:"panel-item-details",flat:"",ripple:!1},{prepend:y(()=>{var m,r,v,f;return[Q("div",is,[l.player.powered!=!1&&((m=o.value)!=null&&m.media_item)||(r=o.value)!=null&&r.image?(d(),C(De,{key:0,class:"media-thumb",size:"55",item:((v=o.value)==null?void 0:v.media_item)||o.value,fallback:e(Ke)},null,8,["item","fallback"])):l.player.powered!=!1&&!s.value&&((f=l.player.current_media)!=null&&f.image_url)?(d(),g("div",os,[c(Xe,{class:"media-thumb",size:"55",src:l.player.current_media.image_url},null,8,["src"])])):(d(),g("div",ss,[c(F,{size:"35",icon:l.player.type==e(Qe).PLAYER&&l.player.group_childs.length?"mdi-speaker-multiple":l.player.icon,style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))])]}),title:y(()=>[Q("div",ns,I(e(rt)(l.player,27)),1)]),subtitle:y(()=>{var m,r,v,f,h,p,_;return[l.player.powered!=!1?(d(),g("div",rs,[(m=o.value)!=null&&m.media_item?(d(),g("div",us,[x(I((r=o.value)==null?void 0:r.media_item.name)+" ",1),"version"in((v=o.value)==null?void 0:v.media_item)&&((f=o.value)!=null&&f.media_item.version)?(d(),g("span",ds,"("+I((h=o.value)==null?void 0:h.media_item.version)+")",1)):P("",!0)])):o.value?(d(),g("div",cs,I((p=o.value)==null?void 0:p.name),1)):!s.value&&((_=l.player.current_media)!=null&&_.title)?(d(),g("div",ms,I(l.player.current_media.title),1)):P("",!0)])):P("",!0)]}),default:y(()=>{var m,r,v,f,h,p,_,b,$,q,E,O,N,L,D,M,B,W,z;return[Q("div",vs,[l.player.powered==!1?(d(),g("div",ps,I(l.$t("off")),1)):(m=o.value)!=null&&m.media_item&&((v=(r=o.value)==null?void 0:r.media_item)==null?void 0:v.media_type)==e(H).TRACK&&"album"in((f=o.value)==null?void 0:f.media_item)&&((h=o.value)!=null&&h.media_item.album)?(d(),g("div",ys,I(e(Pa)((p=o.value)==null?void 0:p.media_item.artists))+" • "+I((_=o.value)==null?void 0:_.media_item.album.name),1)):(b=o.value)!=null&&b.media_item&&"artists"in(($=o.value)==null?void 0:$.media_item)&&((q=o.value)==null?void 0:q.media_item.artists.length)>0?(d(),g("div",fs,I((E=o.value)==null?void 0:E.media_item.artists[0].name),1)):(N=(O=o.value)==null?void 0:O.streamdetails)!=null&&N.stream_title?(d(),g("div",hs,I((D=(L=o.value)==null?void 0:L.streamdetails)==null?void 0:D.stream_title),1)):(B=(M=o.value)==null?void 0:M.media_item)!=null&&B.metadata.description?(d(),g("div",_s,I((W=o.value)==null?void 0:W.media_item.metadata.description),1)):!s.value&&l.player.active_source?(d(),g("div",gs,I(l.$t("external_source_active",[e(Qt)(l.player)])),1)):((z=s.value)==null?void 0:z.items)==0?(d(),g("div",bs,I(l.$t("queue_empty")),1)):P("",!0)])]}),append:y(()=>{var m;return[l.player.state==e(Se).PAUSED||l.player.state==e(Se).PLAYING||(m=s.value)!=null&&m.items?(d(),C(ne,{key:0,variant:"icon",class:"player-command-btn",onClick:u[0]||(u[0]=ue(r=>{e(w).playerCommandPlayPause(l.player.player_id),e(a).activePlayerId=l.player.player_id},["stop"]))},{default:y(()=>[c(F,{size:e(J)({breakpoint:"phone"})?"30":"32",icon:l.player.state==e(Se).PLAYING?"mdi-pause":"mdi-play"},null,8,["size","icon"])]),_:1})):P("",!0),l.player.power_control!=e(me)?(d(),C(ne,{key:1,variant:"icon",class:"player-command-btn",onClick:u[1]||(u[1]=ue(r=>{e(w).playerCommandPowerToggle(l.player.player_id),e(a).activePlayerId=l.player.player_id},["stop"]))},{default:y(()=>[c(F,{size:e(J)({breakpoint:"phone"})?"30":"32"},{default:y(()=>u[2]||(u[2]=[x("mdi-power")])),_:1},8,["size"])]),_:1})):P("",!0),l.showMenuButton?(d(),C(ne,{key:2,variant:"icon",class:"player-command-btn",style:{"margin-right":"-5px"},onClick:ue(n,["stop"])},{default:y(()=>[c(F,{size:e(J)({breakpoint:"phone"})?"30":"32"},{default:y(()=>u[3]||(u[3]=[x("mdi-dots-vertical")])),_:1},8,["size"])]),_:1})):P("",!0)]}),_:1}),l.showVolumeControl?(d(),C(Ua,{key:0,player:l.player,"show-sync-controls":l.showSyncControls,"show-heading-row":!1,"show-sub-players":l.showSubPlayers,"show-volume-control":l.player.powered!=!1,"allow-wheel":!1},null,8,["player","show-sync-controls","show-sub-players","show-volume-control"])):P("",!0)]),_:1},8,["class","disabled"]))}}),ct=de(ws,[["__scopeId","data-v-b3c49fd5"]]),ks={style:{float:"right","margin-right":"-20px"}},Ps=Y({__name:"PlayerSelect",setup(t){const i=A(!1),s=A(null),o=V(()=>Object.values(w.players).filter(m=>dt(m,!1,!1,!1)).sort((m,r)=>{var v;return m.display_name.toUpperCase()>((v=r.display_name)==null?void 0:v.toUpperCase())?1:-1}));oe(()=>a.activePlayerId,m=>{m&&localStorage.setItem("mass.LastPlayerId",m)}),oe(()=>w.players,m=>{m&&!a.activePlayer&&l()},{deep:!0}),oe(()=>w.state,m=>{m.value!=Ql.CONNECTED&&(a.activePlayerId=void 0)},{deep:!0});function n(m,r=!1){a.activePlayerId==m.player_id?i.value=!i.value:(i.value=!1,a.activePlayerId=m.player_id),r&&(a.showPlayersMenu=!1)}Oe(()=>{l()});const l=function(){if(a.activePlayer&&dt(a.activePlayer,!1,!1,!1))return;const m=u();m&&(a.activePlayerId=m.player_id)},u=function(){const m=localStorage.getItem("mass.LastPlayerId");if(m&&m in w.players&&dt(w.players[m],!1,!1,!1))return w.players[m]};return(m,r)=>(d(),g(j,null,[c(Ia,{modelValue:e(a).showPlayersMenu,"onUpdate:modelValue":r[0]||(r[0]=v=>e(a).showPlayersMenu=v)},null,8,["modelValue"]),e(a).showPlayersMenu?(d(),C($a,{key:0,modelValue:e(a).showPlayersMenu,"onUpdate:modelValue":r[3]||(r[3]=v=>e(a).showPlayersMenu=v),location:"right",app:"",clipped:"",temporary:"",width:460,style:{"z-index":"99999"},"z-index":"99999"},{default:y(()=>[Q("div",null,[c(Ue,{class:"title",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:y(()=>[Q("b",null,I(m.$t("players")),1),Q("div",ks,[c(ne,{variant:"icon",to:{name:"playersettings"}},{default:y(()=>[c(F,{size:"30"},{default:y(()=>r[4]||(r[4]=[x("mdi-cog-outline")])),_:1})]),_:1}),c(ne,{variant:"icon",onClick:r[1]||(r[1]=v=>e(a).showPlayersMenu=!1)},{default:y(()=>[c(F,{size:"30"},{default:y(()=>r[5]||(r[5]=[x("mdi-window-close")])),_:1})]),_:1})])]),_:1}),c(Ge),c(Ee,{flat:"",style:{margin:"10px 5px 15px 5px"}},{default:y(()=>[(d(!0),g(j,null,re(o.value.filter(v=>{var f;return[e(Se).PLAYING,e(Se).PAUSED].includes(v.state)||((f=e(w).queues[v.player_id])==null?void 0:f.items)>0&&v.powered!=!1}),v=>(d(),C(ct,{id:v.player_id,key:v.player_id,player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&v.player_id==e(a).activePlayerId,"show-sync-controls":v.supported_features.includes(e($e).SET_MEMBERS),onClick:f=>n(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),c(xl,{modelValue:s.value,"onUpdate:modelValue":r[2]||(r[2]=v=>s.value=v),variant:"accordion",flat:"",class:"expansion"},{default:y(()=>[c(la,{style:{padding:"0"}},{default:y(()=>[c(ia,null,{default:y(()=>[Q("h3",null,I(m.$t("all_players")),1)]),_:1}),c(oa,{style:{padding:"0"}},{default:y(()=>[c(Ee,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(d(!0),g(j,null,re(o.value.filter(v=>v.type!=e(Qe).GROUP),v=>(d(),C(ct,{id:v.player_id,key:v.player_id,player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&v.player_id==e(a).activePlayerId,"show-sync-controls":v.supported_features.includes(e($e).SET_MEMBERS),onClick:f=>n(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1}),o.value.filter(v=>v.type==e(Qe).GROUP).length?(d(),C(la,{key:0,style:{padding:"0"}},{default:y(()=>[c(ia,null,{default:y(()=>[Q("h3",null,I(m.$t("all_groups")),1)]),_:1}),c(oa,{style:{padding:"0"}},{default:y(()=>[c(Ee,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(d(!0),g(j,null,re(o.value.filter(v=>v.type==e(Qe).GROUP),v=>(d(),C(ct,{id:v.player_id,key:v.player_id,player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&v.player_id==e(a).activePlayerId,"show-sync-controls":v.supported_features.includes(e($e).SET_MEMBERS),onClick:f=>n(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1})):P("",!0)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])):P("",!0)],64))}}),Cs=de(Ps,[["__scopeId","data-v-4ea43865"]]);function Is(t={}){const{immediate:i=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:l,onRegisterError:u}=t;let m,r,v;const f=async(p=!0)=>{await r,v==null||v()};async function h(){if("serviceWorker"in navigator){if(m=await Tl(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:p}},[],import.meta.url).then(({Workbox:p})=>new p("./sw.js",{scope:"./",type:"classic"})).catch(p=>{u==null||u(p)}),!m)return;v=()=>{m==null||m.messageSkipWaiting()};{let p=!1;const _=()=>{p=!0,m==null||m.addEventListener("controlling",b=>{b.isUpdate&&window.location.reload()}),s==null||s()};m.addEventListener("installed",b=>{typeof b.isUpdate>"u"?typeof b.isExternal<"u"&&b.isExternal?_():!p&&(o==null||o()):b.isUpdate||o==null||o()}),m.addEventListener("waiting",_)}m.register({immediate:i}).then(p=>{l?l("./sw.js",p):n==null||n(p)}).catch(p=>{u==null||u(p)})}}return r=h(),f}function Vs(t={}){const{immediate:i=!0,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:l,onRegisterError:u}=t,m=A(!1),r=A(!1);return{updateServiceWorker:Is({immediate:i,onNeedRefresh(){m.value=!0,s==null||s()},onOfflineReady(){r.value=!0,o==null||o()},onRegistered:n,onRegisteredSW:l,onRegisterError:u}),offlineReady:r,needRefresh:m}}const Ss={key:0,class:"pwa-toast",role:"alert"},$s={class:"message"},Qs={key:0},Ts={key:1},Ms=Y({__name:"ReloadPrompt",setup(t){const{offlineReady:i,needRefresh:s,updateServiceWorker:o}=Vs(),n=async()=>{i.value=!1,s.value=!1};return(l,u)=>e(i)||e(s)?(d(),g("div",Ss,[Q("div",$s,[e(i)?(d(),g("span",Qs," App ready to work offline ")):(d(),g("span",Ts," New content available, click on reload button to update. "))]),e(s)?(d(),g("button",{key:0,onClick:u[0]||(u[0]=m=>e(o)())},"Reload")):P("",!0),Q("button",{onClick:n},"Close")])):P("",!0)}}),Bs=be({...Ae(),...Ll({fullHeight:!0}),...et()},"VApp"),Es=ge()({name:"VApp",props:Bs(),setup(t,i){let{slots:s}=i;const o=ot(t),{layoutClasses:n,getLayoutItem:l,items:u,layoutRef:m}=Al(t),{rtlClasses:r}=gt();return we(()=>{var v;return c("div",{ref:m,class:["v-application",o.themeClasses.value,n.value,r.value,t.class],style:[t.style]},[c("div",{class:"v-application__wrap"},[(v=s.default)==null?void 0:v.call(s)])])}),{getLayoutItem:l,items:u,theme:o}}}),As=Y({__name:"Default",setup(t){const i=Ml();return oe([()=>i.query.player,()=>Object.keys(w.players).length],([s])=>{var l;if(!s)return;const o=s.toString().toLowerCase(),n=(l=Object.values(w.players).find(u=>u.player_id.toLowerCase()===o||u.display_name.toLowerCase()===o))==null?void 0:l.player_id;n&&(a.activePlayerId=n)},{immediate:!0}),oe(()=>i.query.showFullscreenPlayer,s=>{a.showFullscreenPlayer=!!s},{immediate:!0}),oe(()=>i.query.frameless,s=>{s&&(a.frameless=!0)},{immediate:!0}),(s,o)=>(d(),g(j,null,[e(a).connected?(d(),C(Es,{key:0},{default:y(()=>[e(a).frameless?(d(),C(ra,{key:0})):(d(),g(j,{key:1},[c(Cs),c(ls),c(ra)],64))]),_:1})):(d(),C(Ia,{key:1,class:"centeredoverlay",persistent:"","model-value":!e(a).connected},{default:y(()=>[Q("div",null,[c(Ol,{color:"primary",indeterminate:"",size:"64"})])]),_:1},8,["model-value"])),e(a).isInStandaloneMode?(d(),C(Ms,{key:2})):P("",!0)],64))}}),Js=de(As,[["__scopeId","data-v-33a00054"]]);export{Js as default};
