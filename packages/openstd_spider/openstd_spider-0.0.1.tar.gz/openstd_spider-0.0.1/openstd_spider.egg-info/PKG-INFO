Metadata-Version: 2.2
Name: openstd_spider
Version: 0.0.1
Summary: å›½å®¶æ ‡å‡†å…¨æ–‡å…¬å¼€ç³»ç»Ÿä¸‹è½½å·¥å…·
Author-email: SocialSisterYi <1440239038@qq.com>
License: GPLV3
Project-URL: Repository, https://github.com/SocialSisterYi/OpenSTD_Spider
Requires-Python: <3.13,>=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: httpx>=0.28.1
Requires-Dist: opencv-python>=4.11.0.86
Requires-Dist: numpy>=2.2.3
Requires-Dist: beautifulsoup4>=4.13.3
Requires-Dist: ddddocr>=1.5.6
Requires-Dist: lxml>=5.3.1
Requires-Dist: reportlab>=4.3.1
Requires-Dist: typer>=0.15.1
Requires-Dist: rich>=13.9.4
Requires-Dist: dataclasses-json>=0.6.7

# OpenSTD_Spider

å›½å®¶æ ‡å‡†å…¨æ–‡å…¬å¼€ç³»ç»Ÿä¸‹è½½å·¥å…·

OpenSTD_Spider æ˜¯ä¸€ä¸ªç”¨äºä¸‹è½½å›½å®¶æ ‡å‡†å§”â€œ[å›½å®¶æ ‡å‡†å…¨æ–‡å…¬å¼€ç³»ç»Ÿ](https://openstd.samr.gov.cn/bzgk/gb/)â€å…¬å¼€æ ‡å‡†æ–‡ä»¶çš„å·¥å…·ï¼Œé›†æˆæœç´¢ã€å…ƒæ•°æ®æŸ¥è¯¢ã€PDF ä¸‹è½½ä¸‰ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ CLI è°ƒç”¨ï¼Œä¹Ÿå¯ä½œä¸ºåº“é€šè¿‡ API æ¥å£ä¾›å…¶ä»–ç¨‹åºè°ƒç”¨ã€‚

æœ¬é¡¹ç›®ä¸‹è½½åŠè¾“å‡ºçš„å†…å®¹å‡ä»â€œ[å›½å®¶æ ‡å‡†å…¨æ–‡å…¬å¼€ç³»ç»Ÿ](https://openstd.samr.gov.cn/bzgk/gb/)â€ç½‘ç«™ä¸Šè·å–ï¼Œä½¿ç”¨å…¶è¾“å‡ºå†…å®¹å¿…é¡»éµå®ˆç›¸å…³è§„å®šï¼Œä»¥åŠå›½å®¶æ ‡å‡†å’Œå›½é™…æ ‡å‡†çš„ç‰ˆæƒã€‚

## ğŸš€Quick Start

éœ€è¦ Python ç‰ˆæœ¬ >= 3.10

```bash
pip install openstd_spider
```

ä¹Ÿå¯ä»¥é€šè¿‡[æºä»£ç æ„å»º](#Building)

## ğŸ’»Usage

### æœç´¢å…¬å¼€æ ‡å‡†åˆ—è¡¨

ä½¿ç”¨æ–¹å¼ä¸ºå­å‘½ä»¤ `openstd_spider search`

```
Usage: openstd_spider search [OPTIONS] [KEYWORD]

 æœç´¢ æµè§ˆæ ‡å‡†æ–‡ä»¶åˆ—è¡¨

 Arguments
 keyword      [KEYWORD]  å…³é”®å­—

 Options
 --ps              INTEGER RANGE [10<=x<=50]  æ¯é¡µæ¡æ•°
 --pn      -p      INTEGER RANGE [x>=1]       é¡µç 
 --status  -s      [ç°è¡Œ|å³å°†å®æ–½|åºŸæ­¢]       æ ‡å‡†çŠ¶æ€
 --type    -t      [GB|GBT|GBZ]               æ ‡å‡†ç±»å‹
 --json    -j                                 jsonæ ¼å¼è¾“å‡º
 --help                                       Show this message and exit.
```

æµè§ˆæœ€æ–°å…¬å¼€çš„æ ‡å‡†æ–‡ä»¶

```bash
openstd_spider search
```

ä¹Ÿå¯ä»¥é€šè¿‡å…³é”®å­—æˆ–æ ‡å‡†ç¼–å·æœç´¢

```bash
# æœç´¢æ ‡å‡†ç¼–å·
openstd_spider search 'GB 18030'
# æœç´¢å…³é”®å­—
openstd_spider search 'ç”µåŠ¨è‡ªè¡Œè½¦'
```

è¾“å‡ºçš„è¡¨æ ¼åº•éƒ¨ä¼šæ˜¾ç¤ºç´¢å¼•ä¿¡æ¯ï¼Œå¯ä½¿ç”¨`-p`å‚æ•°ç¿»é¡µ

### æŸ¥è¯¢æ ‡å‡†å…ƒæ•°æ®

ä½¿ç”¨æ–¹å¼ä¸ºå­å‘½ä»¤ `openstd_spider info`

```
Usage: openstd_spider info [OPTIONS] TARGET                              
                                                                              
 æŸ¥è¯¢æ ‡å‡†æ–‡ä»¶å…ƒæ•°æ®

 Arguments
 *    target      TEXT  æ ‡å‡†ç¼–å·æˆ–url [required]
 
 Options
 --json  -j        jsonæ ¼å¼è¾“å‡º
 --help            Show this message and exit.
```

å…ƒæ•°æ®åŒ…å«æ ‡å‡†ç¼–å·ã€ä¸­è‹±æ–‡åç§°ã€åˆ†ç±»ç¼–å·ã€å‘å¸ƒåŠå®æ–½æ—¥æœŸã€ä¸»ç®¡åŠå½’å£å•ä½ç­‰ã€‚

é€šè¿‡ç²¾ç¡®çš„æ ‡å‡†ç¼–å·ï¼ˆéç²¾ç¡®çš„æ ‡å‡†ç¼–å·æœ€å¤šä¸€ä¸ªåŒ¹é…é¡¹ï¼‰æˆ–é¡µé¢çš„ URL å¯ä»¥è¿›è¡ŒæŸ¥è¯¢ã€‚

```bash
# é€šè¿‡ç²¾ç¡®æ ‡å‡†ç¼–å·æŸ¥è¯¢
openstd_spider info 'GB 18030-2022'
# é€šè¿‡é¡µé¢ URL æŸ¥è¯¢
openstd_spider info 'https://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=72969DAA3DA5795AD2163528FF57166C'
```

### ä¸‹è½½æ ‡å‡† pdf æ–‡ä»¶

ä½¿ç”¨æ–¹å¼ä¸ºå­å‘½ä»¤ `openstd_spider download`

```
Usage: openstd_spider download [OPTIONS] TARGET

 ä¸‹è½½æ ‡å‡†æ–‡ä»¶PDF

 Arguments
 *    target      TEXT  æ ‡å‡†ç¼–å·æˆ–url [required]

 Options
 --detail   -d            æ˜¯å¦å±•ç¤ºè¯¦ç»†å…ƒæ•°æ®
 --preview                å¼ºåˆ¶ä¸‹è½½é¢„è§ˆç‰ˆæœ¬
 --output   -o      PATH  ä¸‹è½½è·¯å¾„æˆ–æ–‡ä»¶
 --help                   Show this message and exit.
```

æ ‡å‡†æ–‡ä»¶æœ‰ä¸¤ç§å…¬å¼€æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ä»…å…è®¸é¢„è§ˆå’Œå…è®¸ä¸‹è½½ï¼Œè¿™ä¸¤ç§æ–¹å¼å‡å¯è¿›è¡Œ PDF æ–‡ä»¶ä¸‹è½½ï¼Œä¼˜å…ˆä»¥ç›´æ¥ä¸‹è½½æ–¹å¼ä¸‹è½½ï¼Œä½¿ç”¨é¢„è§ˆæ–¹å¼ä¸‹è½½å°†æ— ä»»ä½•ç›®å½•ç´¢å¼•åŠå¯å¤åˆ¶æ–‡æœ¬ã€‚

å¯¹äºç¦æ­¢é¢„è§ˆå’Œä¸‹è½½çš„æ ‡å‡†æ–‡ä»¶ï¼Œæœ¬é¡¹ç›®æ— æ³•ä¸‹è½½ã€‚

é€šè¿‡ç²¾ç¡®çš„æ ‡å‡†ç¼–å·ï¼ˆéç²¾ç¡®çš„æ ‡å‡†ç¼–å·æœ€å¤šä¸€ä¸ªåŒ¹é…é¡¹ï¼‰æˆ–é¡µé¢çš„ URL å¯ä»¥è¿›è¡Œä¸‹è½½ã€‚

```bash
# é€šè¿‡ç²¾ç¡®æ ‡å‡†ç¼–å·ä¸‹è½½
openstd_spider download 'GB 18030-2022'
# é€šè¿‡é¡µé¢ URL ä¸‹è½½
openstd_spider download 'https://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=72969DAA3DA5795AD2163528FF57166C'
```

é»˜è®¤æƒ…å†µä¸‹ PDF æ–‡ä»¶å°†ä¸‹è½½åˆ°å½“å‰ç›®å½•ï¼Œå¹¶ä»¥æ ‡å‡†ç¼–å·å‘½åï¼Œä¹Ÿå¯åŠ `-o`å‚æ•°æŒ‡å®šè¾“å‡ºè·¯å¾„æˆ–æ–‡ä»¶åã€‚

## âœ¨Features

- é›†æˆæœç´¢ã€å…ƒæ•°æ®æŸ¥è¯¢ã€PDF ä¸‹è½½ä¸‰ä¸ªåŠŸèƒ½ï¼Œé€šè¿‡å­å‘½ä»¤è¿›è¡Œè°ƒç”¨
- å…ƒæ•°æ®æŸ¥è¯¢å’Œ PDF ä¸‹è½½æ”¯æŒè‡ªåŠ¨è¯†åˆ« URL æˆ–æ ‡å‡†ç¼–å·
- æŸ¥è¯¢ç»“æœåŠä¸‹è½½çŠ¶æ€ä»¥ TUI æ–¹å¼åœ¨ç»ˆç«¯æ˜¾ç¤ºï¼Œä¹Ÿå¯ä»¥è¾“å‡ºä¸º json
- è‡ªåŠ¨è¯†åˆ«ä¸‹è½½æ—¶çš„äººæœºéªŒè¯ç 
- é¢„è§ˆæ–¹å¼ä¸‹è½½è‡ªåŠ¨æ‹¼æ¥æ‰“ä¹±çš„å›¾å—ï¼Œå¹¶å°†å›¾ç‰‡ç”Ÿæˆ pdf æ–‡ä»¶

## ğŸ”ŒAPI

ä¸ä»…å¯ä»¥é€šè¿‡ CLI æ–¹å¼ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é›†æˆè¿›å…¶ä»–é¡¹ç›®ï¼Œé€šè¿‡ API è°ƒç”¨

TODO: API è°ƒç”¨ Demo åŠè¯´æ˜

## ğŸ”¨Building

å…‹éš†é¡¹ç›®æºç ï¼ˆå¯é€‰ï¼‰

```bash
git clone https://github.com/SocialSisterYi/OpenSTD_Spider
```

æˆ–ä» Release ä¸­ä¸‹è½½æºç åŒ…

å®‰è£…é¡¹ç›®ä¾èµ–ï¼Œè¯·ç¡®ä¿å·²ç»å®‰è£… pdm

```bash
pdm install
```

æ‰“åŒ…æ„å»ºé¡¹ç›®

```bash
pdm build
```

å®‰è£…æ„å»ºåŒ…åˆ°å…¨å±€ï¼ˆå¯é€‰ï¼‰

```bash
pip install dist/openstd_spider-xxx.whl
```

## âš ï¸Disclaimers

æœ¬é¡¹ç›®ä»¥ GPL-3.0 License ä½œä¸ºå¼€æºåè®®ï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦éµå®ˆç›¸åº”çš„è§„åˆ™

æœ¬é¡¹ç›®ä»…é€‚ç”¨äºå­¦ä¹ ç ”ç©¶ï¼Œä»»ä½•äººä¸å¾—ä»¥æ­¤ç”¨äºç›ˆåˆ©

ä½¿ç”¨æœ¬é¡¹ç›®é€ æˆçš„ä»»ä½•åæœä¸æœ¬äººæ— å…³
