[tool.poetry]
name = "flowgate"
version = "0.0.1"
description = ""
authors = ["nf1s"]

[tool.poetry.dependencies]
python = "^3.10"

datadog = "*"
logstash-formatter = "*"
structlog = "*"

python-schema-registry-client = "^2.4.1"
pydantic = "^1.10.8"
aiokafka = "*"
ddtrace = ">=1"

[tool.poetry.group.dev.dependencies]
ipdb =  "*"
pdbpp = "*"
black = "*"
typer = "^0.9.0"

[tool.poetry.group.test]
[tool.poetry.group.test.dependencies]
bandit = "*"
flake8 = "*"
flake8-black = "*"
flake8-isort = "*"
mypy = "*"
pytest = "*"
pytest-asyncio = "*"
pytest-coverage = "*"
pytest-icdiff = "*"
pytest-mock = "*"
types-requests = "*"
pre-commit = "*"

[build-system]
requires = ["poetry-core>=1.2.0"]
build-backend = "poetry.core.masonry.api"

[tool.black]
line_length = 100
exclude = '''
/(
    \.git
  | \.mypy_cache
  | \.pytest_cache
  | \.tox
  | \.venv
  | __pycache__
  | build
  | dist
)/
'''

[tool.pytest.ini_options]
testpaths = "tests"
python_files = "test_*.py"
python_functions = "test_*"
python_classes = "Test* *Tests"
addopts = "-vv -x"
asyncio_mode = "auto"

[tool.mypy]
check_untyped_defs = true
namespace_packages = true
pretty = true
show_error_context = true

[[tool.mypy.overrides]]
module = "tests.*"
ignore_errors = true

[[tool.mypy.overrides]]
module = [
  "backoff.*",
  "opentracing.*",
  "sentinel"
]
ignore_missing_imports = true

[tool.isort]
atomic = true
profile = "black"
line_length = 100
balanced_wrapping = true
known_localfolder = "app"
known_test = "tests"
sections = "FUTURE,STDLIB,THIRDPARTY,FIRSTPARTY,FRAMEWORKS,LOCALFOLDER,TEST"
virtual_env = ".venv"
skip = ".venv"
